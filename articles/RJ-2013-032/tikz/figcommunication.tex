\documentclass{standalone}
\usepackage{xcolor}
\usepackage{verbatim}
\usepackage{tikz}
\usepackage[T1]{fontenc}
\usepackage{graphics}
\usepackage{hyperref}
\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\R}{R}
\newcommand{\pkg}[1]{#1}
\newcommand{\CRANpkg}[1]{\pkg{#1}}%
\newcommand{\BIOpkg}[1]{\pkg{#1}}
\usetikzlibrary{shadows.blur}
\begin{document}
\nopagecolor
\tikzset{
    node/.style={
            circle ,
            draw=black, 
            fill=blue!10,
            drop shadow,
            minimum width=4.8em
           },
}
	\tikzset{
    node/.style={
			circle ,
			draw=black, 
			fill=blue!10,
			drop shadow,
			minimum width=4.8em
           },
}
\begin{tikzpicture}[>=latex, font=\footnotesize]
\node[node] (master) at (0,0) {Master};
\node[node] (pub) at (0,-5) {Publisher};
\node[node] (sub) at (3.8,0) {Subscriber};
\node[rectangle, rotate=55, draw=black, rounded corners, minimum height=18] (xml) at (0.9,-1.5) {XML/RPC};
\draw[->, line width=0.2em, draw=black!20, fill=black!20] (xml.west) -- (0.1,-2.65);
\draw[->, line width=0.2em, draw=black!20, fill=black!20] (xml.east) -- (1.7,-0.4);
\draw[->, line width=0.2em, draw=black!20, fill=black!20] (xml.south) -- (1.6,-2.0);
\node[rectangle, draw=black, fill=white, opacity=0.85, text width=9em] (info) at (3.1,-5.3) {XML/RPC: foo1234 TCP data: foo:2345};
\node[rotate=90] at (-.2,-2.55) {advertise("/dist",foo:123)};
\draw[->, line width=0.1em]  (pub.north) -- (master.south);
\node[] at (1.92,0.25) {subscribe("/dist")};
\draw[->, line width=0.1em]  (sub.175) -- (master.5);
\draw[->, line width=0.1em]  (master.-5) -- (sub.185);
\node[] at (1.9,-0.3) {\{foo:123\}};
\node[rotate=53.6] at (1.6,-2.24) {connect("/dist", TCP)};
\draw[->, line width=0.1em]  (sub.217) -- (pub.65);
\draw[->, line width=0.1em]  (pub.55) -- (sub.226);
\node[rotate=53.6] at (1.96,-2.56) {TCP server: foo:234};
\node[rotate=53.6] at (2.3,-2.78) {connect(foo:234)};
\draw[->, line width=0.1em] (sub.280) -- (pub.-5) ;
\draw[->, line width=0.1em]  (pub.-30) -- (sub.295) ;
\node[rotate=53.6] at (2.67,-3.1) {Range data messages};
\end{tikzpicture}
\end{document}
