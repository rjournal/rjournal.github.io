<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

<style>
  div.csl-bib-body { }
  div.csl-entry {
    clear: both;
      margin-bottom: 0em;
    }
  .hanging div.csl-entry {
    margin-left:2em;
    text-indent:-2em;
  }
  div.csl-left-margin {
    min-width:2em;
    float:left;
  }
  div.csl-right-inline {
    margin-left:2em;
    padding-left:1em;
  }
  div.csl-indent {
    margin-left: 2em;
  }
</style>

  <!--radix_placeholder_meta_tags-->
<title>shinymgr: A Framework for Building, Managing, and Stitching Shiny Modules into Reproducible Workflows</title>

<meta property="description" itemprop="description" content="The R package shinymgr provides a unifying framework that allows Shiny developers to create, manage, and deploy a master Shiny application comprised of one or more &quot;apps&quot;, where an &quot;app&quot; is a tab-based workflow that guides end-users through a step-by-step analysis. Each tab in a given &quot;app&quot; consists of one or more Shiny modules. The shinymgr app builder allows developers to &quot;stitch&quot; Shiny modules together so that outputs from one module serve as inputs to the next, creating an analysis pipeline that is easy to implement and maintain. Apps developed using shinymgr can be incorporated into R packages or deployed on a server, where they are accessible to end-users.  Users of shinymgr apps can save analyses as an RDS file that fully reproduces the analytic steps and can be ingested into an RMarkdown or Quarto report for rapid reporting. In short, developers use the shinymgr framework to write Shiny modules and seamlessly combine them into Shiny apps, and end-users of these apps can execute reproducible analyses that can be incorporated into reports for rapid dissemination. A comprehensive overview of the package is provided by 12 learnr tutorials."/>

<link rel="canonical" href="https://doi.org/10.32614/RJ-2024-009/"/>
<link rel="license" href="https://creativecommons.org/licenses/by/4.0/"/>
<link rel="icon" type="image/vnd.microsoft.icon" href="../../resources/favicon.ico"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2025-01-10"/>
<meta property="article:created" itemprop="dateCreated" content="2025-01-10"/>
<meta name="article:author" content="Laurence A. Clarfeld"/>
<meta name="article:author" content="Caroline Tang"/>
<meta name="article:author" content="Therese Donovan"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="shinymgr: A Framework for Building, Managing, and Stitching Shiny Modules into Reproducible Workflows"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="The R package shinymgr provides a unifying framework that allows Shiny developers to create, manage, and deploy a master Shiny application comprised of one or more &quot;apps&quot;, where an &quot;app&quot; is a tab-based workflow that guides end-users through a step-by-step analysis. Each tab in a given &quot;app&quot; consists of one or more Shiny modules. The shinymgr app builder allows developers to &quot;stitch&quot; Shiny modules together so that outputs from one module serve as inputs to the next, creating an analysis pipeline that is easy to implement and maintain. Apps developed using shinymgr can be incorporated into R packages or deployed on a server, where they are accessible to end-users.  Users of shinymgr apps can save analyses as an RDS file that fully reproduces the analytic steps and can be ingested into an RMarkdown or Quarto report for rapid reporting. In short, developers use the shinymgr framework to write Shiny modules and seamlessly combine them into Shiny apps, and end-users of these apps can execute reproducible analyses that can be incorporated into reports for rapid dissemination. A comprehensive overview of the package is provided by 12 learnr tutorials."/>
<meta property="og:url" content="https://doi.org/10.32614/RJ-2024-009/"/>
<meta property="og:image" content="https://journal.r-project.org/articles/RJ-2024-009/images/figure1.png"/>
<meta property="og:image:width" content="509"/>
<meta property="og:image:height" content="201"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="The R Journal"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="shinymgr: A Framework for Building, Managing, and Stitching Shiny Modules into Reproducible Workflows"/>
<meta property="twitter:description" content="The R package shinymgr provides a unifying framework that allows Shiny developers to create, manage, and deploy a master Shiny application comprised of one or more &quot;apps&quot;, where an &quot;app&quot; is a tab-based workflow that guides end-users through a step-by-step analysis. Each tab in a given &quot;app&quot; consists of one or more Shiny modules. The shinymgr app builder allows developers to &quot;stitch&quot; Shiny modules together so that outputs from one module serve as inputs to the next, creating an analysis pipeline that is easy to implement and maintain. Apps developed using shinymgr can be incorporated into R packages or deployed on a server, where they are accessible to end-users.  Users of shinymgr apps can save analyses as an RDS file that fully reproduces the analytic steps and can be ingested into an RMarkdown or Quarto report for rapid reporting. In short, developers use the shinymgr framework to write Shiny modules and seamlessly combine them into Shiny apps, and end-users of these apps can execute reproducible analyses that can be incorporated into reports for rapid dissemination. A comprehensive overview of the package is provided by 12 learnr tutorials."/>
<meta property="twitter:url" content="https://doi.org/10.32614/RJ-2024-009/"/>
<meta property="twitter:image" content="https://journal.r-project.org/articles/RJ-2024-009/images/figure1.png"/>
<meta property="twitter:image:width" content="509"/>
<meta property="twitter:image:height" content="201"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="shinymgr: A Framework for Building, Managing, and Stitching Shiny Modules into Reproducible Workflows"/>
<meta name="citation_fulltext_html_url" content="https://doi.org/10.32614/RJ-2024-009"/>
<meta name="citation_pdf_url" content="RJ-2024-009.pdf"/>
<meta name="citation_volume" content="16"/>
<meta name="citation_issue" content="1"/>
<meta name="citation_doi" content="10.32614/RJ-2024-009"/>
<meta name="citation_journal_title" content="The R Journal"/>
<meta name="citation_issn" content="2073-4859"/>
<meta name="citation_firstpage" content="157"/>
<meta name="citation_lastpage" content="174"/>
<meta name="citation_fulltext_world_readable" content=""/>
<meta name="citation_online_date" content="2025/01/10"/>
<meta name="citation_publication_date" content="2025/01/10"/>
<meta name="citation_author" content="Laurence A. Clarfeld"/>
<meta name="citation_author_institution" content="Vermont Cooperative Fish and Wildlife Research Unit"/>
<meta name="citation_author" content="Caroline Tang"/>
<meta name="citation_author_institution" content="Queen&#39;s University"/>
<meta name="citation_author" content="Therese Donovan"/>
<meta name="citation_author_institution" content="U.S. Geological Survey, Vermont Cooperative Fish and Wildlife Research Unit"/>
<!--/radix_placeholder_meta_tags-->
  
  <meta name="citation_reference" content="citation_title=Shiny: Web application framework for r;citation_author=Winston Chang;citation_author=Joe Cheng;citation_author=JJ Allaire;citation_author=Carson Sievert;citation_author=Barret Schloerke;citation_author=Yihui Xie;citation_author=Jeff Allen;citation_author=Jonathan McPherson;citation_author=Alan Dipert;citation_author=Barbara Borges"/>
  <meta name="citation_reference" content="citation_title=Engineering production-grade shiny apps;citation_publisher=Chapman; Hall/CRC;citation_doi=https://doi.org/10.1201/9781003029878;citation_author=Colin Fay;citation_author=Sébastien Rochette;citation_author=Vincent Guyader;citation_author=Cervan Girard"/>
  <meta name="citation_reference" content="citation_title=Datamods: Modules to import and manipulate data in ’shiny’;citation_author=Victor Perrier;citation_author=Fanny Meyer;citation_author=Zauad Shahreer Abeer"/>
  <meta name="citation_reference" content="citation_title=Shiny.reglog: Optional login and registration module system for ShinyApps;citation_author=Michal Kosinski"/>
  <meta name="citation_reference" content="citation_title=Periscope: Enterprise streamlined ’shiny’ application framework;citation_author=Constance Brett;citation_author=Isaac Neuhaus"/>
  <meta name="citation_reference" content="citation_title=Jsmodule: ’RStudio’ addins and ’shiny’ modules for medical research;citation_author=Jinseob Kim;citation_author=Hyunki Lee"/>
  <meta name="citation_reference" content="citation_title=Shinyauthr: ’Shiny’ authentication modules;citation_author=Paul Campbell"/>
  <meta name="citation_reference" content="citation_title=Testthat: Get started with testing;citation_volume=3;citation_author=Hadley Wickham"/>
  <meta name="citation_reference" content="citation_title=Shinytest: Test shiny apps;citation_author=Winston Chang;citation_author=Gábor Csárdi;citation_author=Hadley Wickham"/>
  <meta name="citation_reference" content="citation_title=Learnr: Interactive tutorials for r;citation_author=Barret Schloerke;citation_author=JJ Allaire;citation_author=Barbara Borges"/>
  <meta name="citation_reference" content="citation_title=Shinipsum: Lorem-ipsum helper function for ’shiny’ prototyping;citation_author=Colin Fay;citation_author=Sebastien Rochette"/>
  <meta name="citation_reference" content="citation_title=Shinymgr: A framework for building, managing, and stitching shiny modules into reproducible workflows.;citation_publisher=U.S. Geological Survey software release. Reston, VA.;citation_doi=10.5066/P9UXPOBN;citation_author=Laurence Clarfeld;citation_author=Caroline Tang;citation_author=Therese Donovan"/>
  <meta name="citation_reference" content="citation_title=The use of multiple measurements in taxonomic problems;citation_publisher=Wiley Online Library;citation_volume=7;citation_doi=https://doi.org/10.1111/j.1469-1809.1936.tb02137.x;citation_author=Ronald A Fisher"/>
  <meta name="citation_reference" content="citation_title=AMMonitor: Remote monitoring of biodiversity in an adaptive framework with r;citation_publisher=Wiley Online Library;citation_volume=11;citation_doi=https://doi.org/10.1111/2041-210X.13397;citation_author=Cathleen Balantic;citation_author=Therese Donovan"/>
  <meta name="citation_reference" content="citation_title=Rhino: A framework for enterprise shiny applications;citation_doi=https://doi.org/10.32614/CRAN.package.rhino;citation_author=Kamil Żyła;citation_author=Jakub Nowicki;citation_author=Leszek Siemiński;citation_author=Marek Rogala;citation_author=Recle Vibal;citation_author=Tymoteusz Makowski"/>
  <meta name="citation_reference" content="citation_title=Modularizing shiny app code"/>
  <meta name="citation_reference" content="citation_title=Agile and iterative development: A manager’s guide;citation_publisher=Addison-Wesley Professional;citation_author=Craig Larman"/>
  <meta name="citation_reference" content="citation_title=SQLite;citation_author=Richard D Hipp"/>
  <meta name="citation_reference" content="citation_title=Renv: Project environments;citation_author=Kevin Ushey"/>
  <meta name="citation_reference" content="citation_title=DBI: R database interface;citation_author=Hadley Wickham;citation_author=Kirill Müller;citation_author=DBI: R database interface"/>
  <meta name="citation_reference" content="citation_title=Reactable: Interactive data tables based on ’react table’;citation_author=Greg Lin"/>
  <meta name="citation_reference" content="citation_title=RSQLite: SQLite interface for r;citation_author=Kirill Müller;citation_author=Hadley Wickham;citation_author=David A. James;citation_author=Seth Falcon"/>
  <meta name="citation_reference" content="citation_title=Shinyjs: Easily improve the user experience of your shiny apps in seconds;citation_author=Dean Attali"/>
  <meta name="citation_reference" content="citation_title=Shinydashboard: Create dashboards with ’shiny’;citation_author=Winston Chang;citation_author=Barbara Borges Ribeiro"/>
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","draft","URL","BugReports","LazyData","RoxygenNote","type","disclaimer","bibliography","description","author","output","date","date_received","volume","issue","slug","journal","pdf_url","citation_url","doi","creative_commons","packages","CTV","csl","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["shinymgr: A Framework for Building, Managing, and Stitching Shiny Modules into Reproducible Workflows"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["https://code.usgs.gov/vtcfwru/shinymgr"]},{"type":"character","attributes":{},"value":["https://code.usgs.gov/vtcfwru/shinymgr/issues"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["7.2.1"]},{"type":"character","attributes":{},"value":["package"]},{"type":"character","attributes":{},"value":["This draft manuscript is distributed solely for purposes of scientific peer review. Its content is deliberative and predecisional, so it must not be disclosed or released by reviewers. Because the manuscript has not yet been approved for publication by the U.S. Geological Survey (USGS), it does not represent any official USGS finding or policy."]},{"type":"character","attributes":{},"value":["shinymgrFinal.bib"]},{"type":"character","attributes":{},"value":["The R package shinymgr provides a unifying framework that allows Shiny developers to create, manage, and deploy a master Shiny application comprised of one or more \"apps\", where an \"app\" is a tab-based workflow that guides end-users through a step-by-step analysis. Each tab in a given \"app\" consists of one or more Shiny modules. The shinymgr app builder allows developers to \"stitch\" Shiny modules together so that outputs from one module serve as inputs to the next, creating an analysis pipeline that is easy to implement and maintain. Apps developed using shinymgr can be incorporated into R packages or deployed on a server, where they are accessible to end-users.  Users of shinymgr apps can save analyses as an RDS file that fully reproduces the analytic steps and can be ingested into an RMarkdown or Quarto report for rapid reporting. In short, developers use the shinymgr framework to write Shiny modules and seamlessly combine them into Shiny apps, and end-users of these apps can execute reproducible analyses that can be incorporated into reports for rapid dissemination. A comprehensive overview of the package is provided by 12 learnr tutorials."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","affiliation","address","orcid_id","email"]}},"value":[{"type":"character","attributes":{},"value":["Laurence A. Clarfeld"]},{"type":"character","attributes":{},"value":["Vermont Cooperative Fish and Wildlife Research Unit"]},{"type":"character","attributes":{},"value":["302 Aiken Center, University of Vermont","Burlington, VT 05405 USA"]},{"type":"character","attributes":{},"value":["0000-0002-3927-9411"]},{"type":"character","attributes":{},"value":["laurence.clarfeld@uvm.edu"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","email","orcid_id","affiliation","address"]}},"value":[{"type":"character","attributes":{},"value":["Caroline Tang"]},{"type":"character","attributes":{},"value":["17ct24@queensu.ca"]},{"type":"character","attributes":{},"value":["0000-0001-7966-5854"]},{"type":"character","attributes":{},"value":["Queen's University"]},{"type":"character","attributes":{},"value":["Biology Department","116 Barrie St, Kingston, ON K7L 3N6"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","email","affiliation","address","orcid_id"]}},"value":[{"type":"character","attributes":{},"value":["Therese Donovan"]},{"type":"character","attributes":{},"value":["tdonovan@uvm.edu"]},{"type":"character","attributes":{},"value":["U.S. Geological Survey, Vermont Cooperative Fish and Wildlife Research Unit"]},{"type":"character","attributes":{},"value":["302 Aiken Center, University of Vermont","Burlington, VT 05405 USA"]},{"type":"character","attributes":{},"value":["0000-0001-8124-9251"]}]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article","rjtools::rjournal_pdf_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[false]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"character","attributes":{},"value":["2025-01-10"]},{"type":"character","attributes":{},"value":["2022-11-03"]},{"type":"integer","attributes":{},"value":[16]},{"type":"integer","attributes":{},"value":[1]},{"type":"character","attributes":{},"value":["RJ-2024-009"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","issn","firstpage","lastpage"]}},"value":[{"type":"character","attributes":{},"value":["The R Journal"]},{"type":"character","attributes":{},"value":["2073-4859"]},{"type":"integer","attributes":{},"value":[157]},{"type":"integer","attributes":{},"value":[174]}]},{"type":"character","attributes":{},"value":["RJ-2024-009.pdf"]},{"type":"character","attributes":{},"value":["https://doi.org/10.32614/RJ-2024-009"]},{"type":"character","attributes":{},"value":["10.32614/RJ-2024-009"]},{"type":"character","attributes":{},"value":["CC BY"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["cran","bioc"]}},"value":[{"type":"character","attributes":{},"value":["shiny","shinipsum","golem","rhino","datamods","shiny.reglog","periscope","shinyauthr","jsmodule","shinymgr","DBI","reactable","RSQLite","renv","shinyjs","shinydashboard","learnr","testthat","shinytest"]},{"type":"list","attributes":{},"value":[]}]},{"type":"character","attributes":{},"value":["Databases","ReproducibleResearch","TeachingStatistics","WebTechnologies"]},{"type":"character","attributes":{},"value":["/home/mitchell/R/x86_64-pc-linux-gnu-library/4.4/rjtools/rjournal.csl"]},{"type":"character","attributes":{},"value":["https://doi.org/10.32614/RJ-2024-009/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["images/figure1.png","images/figure2.png","images/figure3.png","images/figure4.jpg","images/figure5.png","images/figure6.png","images/figure7.png","images/figure8.png","RJ-2024-009.log","RJ-2024-009.tex","RJournal.sty","RJwrapper.log","RJwrapper.tex","shinymgr/analyses/iris_explorer_Gandalf_2023_06_05_16_30.RDS","shinymgr/data/iris.RData","shinymgr/database/shinymgr.sqlite","shinymgr/global.R","shinymgr/modules_app/iris_explorer.R","shinymgr/modules_mgr/add_app.R","shinymgr/modules_mgr/add_mod.R","shinymgr/modules_mgr/add_report.R","shinymgr/modules_mgr/add_tab.R","shinymgr/modules_mgr/app_builder.R","shinymgr/modules_mgr/my_db.R","shinymgr/modules_mgr/new_analysis.R","shinymgr/modules_mgr/new_report.R","shinymgr/modules_mgr/queries.R","shinymgr/modules_mgr/save_analysis.R","shinymgr/modules_mgr/stitch_script.R","shinymgr/modules_mgr/table.R","shinymgr/modules/iris_cluster.R","shinymgr/modules/iris_intro.R","shinymgr/modules/single_column_plot.R","shinymgr/modules/subset_rows.R","shinymgr/reports/iris_explorer/iris_explorer_report.Rmd","shinymgr/server.R","shinymgr/tests/shinytest.R","shinymgr/tests/shinytest/test-iris_explorer-expected/001.json","shinymgr/tests/shinytest/test-iris_explorer-expected/001.png","shinymgr/tests/shinytest/test-iris_explorer-expected/002.json","shinymgr/tests/shinytest/test-iris_explorer-expected/002.png","shinymgr/tests/shinytest/test-iris_explorer.R","shinymgr/tests/testthat.R","shinymgr/tests/testthat/test-iris_cluster.R","shinymgr/tests/testthat/test-subset_rows.R","shinymgr/ui.R","shinymgr/www/dark_mode.css","shinymgr/www/shinymgr-hexsticker.png","shinymgrFinal.bib","shinymgrFinal.tex"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
  font-size: 100%;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

hr.section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  margin: 0px;
}


d-byline {
  border-top: none;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
  border-top: none;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

/* tweak for Pandoc numbered line within distill */
d-article pre.numberSource code > span {
    left: -2em;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // separator
  var separator = '<hr class="section-separator" style="clear: both"/>';
  // prepend separator above appendix
  $('.d-byline').before(separator);
  $('.d-article').before(separator);

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme, except when numbering line
  // in code chunk
  $('pre:not(.numberLines) code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      var author_name = front_matter.authors[i].author
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', author_name ? 'ORCID ID for ' + author_name : 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      const citeChild = $(this).children()[0]
      // Do not process if @xyz has been used without escaping and without bibliography activated
      // https://github.com/rstudio/distill/issues/466
      if (citeChild === undefined) return true

      if (citeChild.nodeName == "D-FOOTNOTE") {
        var fn = citeChild
        $(this).html(fn.shadowRoot.querySelector("sup"))
        $(this).id = fn.id
        fn.remove()
      }
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        // Could use CSS.escape too here, we insure backward compatibility in navigator
        return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // fix footnotes in tables (#411)
    // replacing broken distill.pub feature
    $('table d-footnote').each(function() {
      // we replace internal showAtNode methode which is triggered when hovering a footnote
      this.hoverBox.showAtNode = function(node) {
        // ported from https://github.com/distillpub/template/pull/105/files
        calcOffset = function(elem) {
            let x = elem.offsetLeft;
            let y = elem.offsetTop;
            // Traverse upwards until an `absolute` element is found or `elem`
            // becomes null.
            while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                x += elem.offsetLeft;
                y += elem.offsetTop;
            }

            return { left: x, top: y };
        }
        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
        const bbox = node.getBoundingClientRect();
        const offset = calcOffset(node);
        this.show([offset.left + bbox.width, offset.top + bbox.height]);
      }
    })

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    // ignore leaflet img layers (#106)
    figures = figures.filter(':not(img[class*="leaflet"])')
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.7);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(0, 0, 0, 0.8);
  --text-size:        15px;
  --hover-color:      black;
  --bkgd-color:       #ffffff;
}

.distill-site-footer {
  --text-color:       rgba(0, 0, 0, 0.8);
  --text-size:        15px;
  --hover-color:      black;
  --bkgd-color:       #fafafa;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */

.nav-right > a {
  text-transform: uppercase;
}

d-title h1, d-title p, d-title figure,
d-abstract p, d-abstract b {
  grid-column: page;
}

.rj-blue {
  color: #2467bb;
}

ul li {
  line-height: 1.6;
  margin-top: 0em;
  margin-bottom: 0em;
}</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
  font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
d-article > p,  /* only text inside of <p> tags */
d-article > ul, /* lists */
d-article > ol {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}


/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
  font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
  font-size: var(--aside-size, 12px);
  color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
  font-size: var(--fig-cap-size, 13px);
  color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
  font-size: var(--heading-size, 0.6rem);
  color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
  font-size: var(--body-size, 0.8rem);
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
  font-size: var(--heading-size, 18px);
}

.d-contents nav a {
  font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
  color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
  font-size: var(--title-size, 18px);
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.nav-dropdown .nav-dropbtn {
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  font-size: var(--text-size, 15px);
}

.distill-site-header a:hover,
.nav-dropdown:hover .nav-dropbtn {
  color: var(--hover-color, white);
}

.distill-site-header {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
  color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.29/header-attrs.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->
  <script>
    $(function() {
      console.log("Starting...")

      // Mathjax config (add automatic linebreaks when supported)
      // MathJax = {
      //    tex: {
      //        inlineMath: [['$', '$'], ['\\(', '\\)']],
      //        displayMath: [['$$', '$$'], ['\\[', '\\]']],
      //        tags: 'ams',
      //        multline: true,
      //    },
      //    options: {
      //        linebreaks: { automatic: true },
      //    },
      // };

      // Always show Published - distill hides it if not set
      function show_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'visible');
      }

      show_byline_column('Published')

      // tweak function
      var rmd_meta = JSON.parse($("#radix-rmarkdown-metadata").html());
      function get_meta(name, meta) {
        var ind = meta.attributes.names.value.findIndex((e) => e == name)
        var val = meta.value[ind]
        if (val.type != 'list') {
          return val.value.toString()
        }
        return val
      }

      // tweak description
      // Add clickable tags
      const slug = get_meta('slug', rmd_meta)
      const cite_url = get_meta('citation_url', rmd_meta)

      var title = $("d-title").text

      const buttons = $('<div class="dt-tags" style="grid-column: page;">')
      buttons.append('<a href="#citation" class="dt-tag"><i class="fas fa-quote-left"></i> Cite</a>')
      buttons.append('<a href="' + slug + '.pdf" class="dt-tag"><i class="fas fa-file-pdf"></i> PDF</a>')
      buttons.append('<a href="' + slug + '.zip" class="dt-tag"><i class="fas fa-file-zipper"></i> Supplement</a>')

      // adds Abstract: in front of the first <p> in the title section --
      // unless it happens to be the subtitle (FIXME: this is a bad hack - can't distill do this?)
      var tpar = $("d-title p:not(:empty)").filter(function() {
        return !$(this).hasClass("subtitle");
      }).first();
      if (tpar) {
        const abstract = $('<d-abstract>')
        abstract.append('<b>Abstract:</b><br>')
        abstract.append(tpar) // Move description to d-abstract
        $("d-title p:empty").remove() // Remove empty paragraphs after title
        abstract.append(buttons)
        abstract.insertAfter($('d-title')) // Add abstract section after title */
      }

      // tweak by-line
      var byline = $("d-byline div.byline")
      ind = rmd_meta.attributes.names.value.findIndex((e) => e == "journal")
      const journal = get_meta('journal', rmd_meta)
      const volume = get_meta('volume', rmd_meta)
      const issue = get_meta('issue', rmd_meta)
      const jrtitle = get_meta('title', journal)
      const year = ((jrtitle == "R News") ? 2000 : 2008) + parseInt(volume)
      const firstpage = get_meta('firstpage', journal)
      const lastpage = get_meta('lastpage', journal)
      byline.append('<div class="rjournal grid">')
      $('div.rjournal').append('<h3>Volume</h3>')
      $('div.rjournal').append('<h3>Pages</h3>')
      $('div.rjournal').append('<a class="volume" href="../../issues/'+year+'-'+issue+'">'+volume+'/'+issue+'</a>')
      $('div.rjournal').append('<p class="pages">'+firstpage+' - '+lastpage+'</p>')

      const received_date = new Date(get_meta('date_received', rmd_meta))
      byline.find('h3:contains("Published")').parent().append('<h3>Received</h3><p>'+received_date.toLocaleDateString('en-US', {month: 'short'})+' '+received_date.getDate()+', '+received_date.getFullYear()+'</p>')

    })
  </script>

  <style>
      /*
    .nav-dropdown-content .nav-dropdown-header {
      text-transform: lowercase;
    }
    */

    d-byline .byline {
      grid-template-columns: 2fr 2fr 2fr 2fr;
    }

    d-byline .rjournal {
      grid-column-end: span 2;
      grid-template-columns: 1fr 1fr;
      margin-bottom: 0;
    }

    d-title h1, d-title p, d-title figure,
    d-abstract p, d-abstract b {
      grid-column: page;
    }

    d-title .dt-tags {
      grid-column: page;
    }

    .dt-tags .dt-tag {
      text-transform: lowercase;
    }

    d-article h1 {
      line-height: 1.1em;
    }

    d-abstract p, d-article p {
      text-align: justify;
    }

    @media(min-width: 1000px) {
      .d-contents.d-contents-float {
        justify-self: end;
      }

      nav.toc {
        border-right: 1px solid rgba(0, 0, 0, 0.1);
        border-right-width: 1px;
        border-right-style: solid;
        border-right-color: rgba(0, 0, 0, 0.1);
      }
    }

    .posts-list .dt-tags .dt-tag {
      text-transform: lowercase;
    }

    @keyframes highlight-target {
      0% {
        background-color: #ffa;
      }
      66% {
        background-color: #ffa;
      }
      100% {
        background-color: none;
      }
    }

    d-article :target, d-appendix :target {
       animation: highlight-target 3s;
    }

    .header-section-number {
      margin-right: 0.5em;
    }
    
    d-appendix .citation-appendix,
    .d-appendix .citation-appendix {
      color: rgb(60, 60, 60);
    }

    d-article h2 {
      border-bottom: 0px solid rgba(0, 0, 0, 0.1);
      padding-bottom: 0rem;
    }
    d-article h3 {
      font-size: 20px;
    }
    d-article h4 {
      font-size: 18px;
      text-transform: none;
    }

    @media (min-width: 1024px) {
      d-article h2 {
        font-size: 32px;
      }
      d-article h3 {
        font-size: 24px;
      }
      d-article h4 {
        font-size: 20px;
      }
    }
  </style>


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"shinymgr: A Framework for Building, Managing, and Stitching Shiny Modules into Reproducible Workflows","description":"The R package shinymgr provides a unifying framework that allows Shiny developers to create, manage, and deploy a master Shiny application comprised of one or more \"apps\", where an \"app\" is a tab-based workflow that guides end-users through a step-by-step analysis. Each tab in a given \"app\" consists of one or more Shiny modules. The shinymgr app builder allows developers to \"stitch\" Shiny modules together so that outputs from one module serve as inputs to the next, creating an analysis pipeline that is easy to implement and maintain. Apps developed using shinymgr can be incorporated into R packages or deployed on a server, where they are accessible to end-users.  Users of shinymgr apps can save analyses as an RDS file that fully reproduces the analytic steps and can be ingested into an RMarkdown or Quarto report for rapid reporting. In short, developers use the shinymgr framework to write Shiny modules and seamlessly combine them into Shiny apps, and end-users of these apps can execute reproducible analyses that can be incorporated into reports for rapid dissemination. A comprehensive overview of the package is provided by 12 learnr tutorials.","doi":"10.32614/RJ-2024-009","authors":[{"author":"Laurence A. Clarfeld","authorURL":"#","affiliation":"Vermont Cooperative Fish and Wildlife Research Unit","affiliationURL":"#","orcidID":"0000-0002-3927-9411"},{"author":"Caroline Tang","authorURL":"#","affiliation":"Queen's University","affiliationURL":"#","orcidID":"0000-0001-7966-5854"},{"author":"Therese Donovan","authorURL":"#","affiliation":"U.S. Geological Survey, Vermont Cooperative Fish and Wildlife Research Unit","affiliationURL":"#","orcidID":"0000-0001-8124-9251"}],"publishedDate":"2025-01-10T00:00:00.000+00:00","citationText":"Clarfeld, et al., 2025"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="../../index.html">
<img src="../../resources/rlogo.png" alt="Logo"/>
</a>
<a href="../../index.html" class="title">The R Journal</a>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../issues/2024-4">Current</a>
<a href="../../issues.html">Issues</a>
<a href="../../news.html">News</a>
<a href="../../submissions.html">Submit</a>
<a href="../../editors.html">Editorial board</a>
<a href="../../articles.xml">
<i class="fa fa-rss" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>shinymgr: A Framework for Building, Managing, and Stitching Shiny Modules into Reproducible Workflows</h1>

<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>The R package shinymgr provides a unifying framework that allows Shiny developers to create, manage, and deploy a master Shiny application comprised of one or more “apps”, where an “app” is a tab-based workflow that guides end-users through a step-by-step analysis. Each tab in a given “app” consists of one or more Shiny modules. The shinymgr app builder allows developers to “stitch” Shiny modules together so that outputs from one module serve as inputs to the next, creating an analysis pipeline that is easy to implement and maintain. Apps developed using shinymgr can be incorporated into R packages or deployed on a server, where they are accessible to end-users. Users of shinymgr apps can save analyses as an RDS file that fully reproduces the analytic steps and can be ingested into an RMarkdown or Quarto report for rapid reporting. In short, developers use the shinymgr framework to write Shiny modules and seamlessly combine them into Shiny apps, and end-users of these apps can execute reproducible analyses that can be incorporated into reports for rapid dissemination. A comprehensive overview of the package is provided by 12 learnr tutorials.</p></p>
</div>

<div class="d-byline">
  Laurence A. Clarfeld  (Vermont Cooperative Fish and Wildlife Research Unit)
  
,   Caroline Tang  (Queen’s University)
  
,   Therese Donovan  (U.S. Geological Survey, Vermont Cooperative Fish and Wildlife Research Unit)
  
<br/>2025-01-10
</div>

<div class="d-article">
<div class="layout-chunk" data-layout="l-body">

</div>
<h2 data-number="1" id="intro"><span class="header-section-number">1</span> Introduction</h2>
<p>The <a href="https://cran.r-project.org/package=shiny">shiny</a> R package allows users to build interactive web apps straight from R, without advanced knowledge of HTML or JavaScript <span class="citation" data-cites="shiny">(<a href="#ref-shiny" role="doc-biblioref">Chang et al. 2022</a>)</span>. A <em>shiny</em> web app can permit an expedient analysis pipeline or workflow. Ideally, the pipeline can produce outputs that are fully reproducible <span class="citation" data-cites="Peng Gentleman Alston">(<a href="#ref-Gentleman" role="doc-biblioref">Gentleman and Lang 2007</a>; <a href="#ref-Peng" role="doc-biblioref">Peng 2011</a>; <a href="#ref-Alston" role="doc-biblioref">Alston and Rick 2021</a>)</span>. Moreover, the pipeline can permit rapid reporting to convey the results of an analysis workflow to a target audience <span class="citation" data-cites="stoudt2021principles">(<a href="#ref-stoudt2021principles" role="doc-biblioref">Stoudt et al. 2021</a>)</span> (Figure <a href="#fig:fig1">1</a>).</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<div class="figure"><span style="display:block;" id="fig:fig1"></span>
<img src="images/figure1.png" alt="Stages of a reproducible workflow, a process that moves an inquiry from raw data to insightful contribution." width="100%" />
<p class="caption">
Figure 1: Stages of a reproducible workflow, a process that moves an inquiry from raw data to insightful contribution.
</p>
</div>
</div>
<p><em>shiny</em> applications range from simple to complex, each with an intended purpose developed for an intended user audience. Several R packages provide a development framework for building multi-faceted master applications, including <a href="https://cran.r-project.org/package=shinipsum">shinipsum</a> for prototyping <span class="citation" data-cites="shinipsum">(<a href="#ref-shinipsum" role="doc-biblioref">Fay and Rochette 2020</a>)</span>, <a href="https://cran.r-project.org/package=golem">golem</a> <span class="citation" data-cites="golum">(<a href="#ref-golum" role="doc-biblioref">Fay et al. 2021</a>)</span>, and <a href="https://cran.r-project.org/package=rhino">rhino</a> <span class="citation" data-cites="rhino">(<a href="#ref-rhino" role="doc-biblioref">Żyła et al. 2023</a>)</span>.</p>
<p>From the developer’s perspective, complex <em>shiny</em> applications can result in many lines of code, creating challenges for collaborating, debugging, streamlining, and maintaining the overall product. <em>shiny</em> modules are a solution to this problem. As stated by Winston Chang <span class="citation" data-cites="shinyblog">(<a href="#ref-shinyblog" role="doc-biblioref">Modularizing shiny app code 2020</a>)</span>, “A <em>shiny</em> module is a piece of a <em>shiny</em> app. It can’t be directly run, as a <em>shiny</em> app can. Instead, it is included as part of a larger app . . . Once created, a <em>shiny</em> module can be easily reused – whether across different apps, or multiple times in a single app.” <em>shiny</em> modules, and modularization in general, are a core element of agile software development practices <span class="citation" data-cites="larman2004agile">(<a href="#ref-larman2004agile" role="doc-biblioref">Larman 2004</a>)</span>. Several authors have contributed R packages for distributing pre-written <em>shiny</em> modules for general use, including the <a href="https://cran.r-project.org/package=datamods">datamods</a> <span class="citation" data-cites="datamods">(<a href="#ref-datamods" role="doc-biblioref">Perrier et al. 2022</a>)</span>, <a href="https://cran.r-project.org/package=shiny.reglog">shiny.reglog</a> <span class="citation" data-cites="reglog">(<a href="#ref-reglog" role="doc-biblioref">Kosinski 2022</a>)</span>, <a href="https://cran.r-project.org/package=periscope">periscope</a> <span class="citation" data-cites="periscope">(<a href="#ref-periscope" role="doc-biblioref">Brett and Neuhaus 2022</a>)</span>, <a href="https://cran.r-project.org/package=shinyauthr">shinyauthr</a> <span class="citation" data-cites="shinyauthr">(<a href="#ref-shinyauthr" role="doc-biblioref">Campbell 2021</a>)</span>, and <a href="https://cran.r-project.org/package=jsmodule">jsmodule</a> <span class="citation" data-cites="jsmodule">(<a href="#ref-jsmodule" role="doc-biblioref">Kim and Lee 2022</a>)</span> packages.</p>
<p>However, as the number of available modules increases, there is a pressing need for documenting available <em>shiny</em> modules and easily incorporating them into new workflows. For example, consider a toy modular-based app that guides a user through an analysis of the famous “Iris Dataset,” which contains 150 records of 3 species of iris, including measurements of the length and width of the flowers’ sepals and petals <span class="citation" data-cites="fisher1936use">(<a href="#ref-fisher1936use" role="doc-biblioref">Fisher 1936</a>)</span>. The app, called “Iris Explorer,” consists of 5 tabs to be worked through in sequence (Figure <a href="#fig:fig2">2</a>, top).</p>
<p>Tab 1 displays instructions for use, while tab 2 performs a <em>k</em>-means clustering of the data, where <em>k</em> is specified by the user. The resulting clusters are displayed with two variables of the user’s choosing as depicted in Figure <a href="#fig:fig2">2</a>. In tab 3, the user will choose a value <em>n</em>, indicating the number of rows by which to randomly subset the data, and in tab 4 the user selects a single variable to be plotted as a bar chart. Finally, in tab 5 the user can save their outputs as an RDS file. This contrived example includes some key elements of a typical workflow in that the five tabs introduce a dataset, guide the user through light data wrangling, produce analysis outputs, and offer the ability to save the results.</p>
<p>The app’s blueprint (Figure <a href="#fig:fig2">2</a>, bottom) identifies the <em>shiny</em> modules in each tab, showing how outputs from one module can serve as inputs to the next. Note that while this example shows a single module in each tab with differing inputs/outputs, in the general case tabs can contain an arbitrary number of <em>shiny</em> modules (including multiple instances of the same module) and each module can have multiple inputs/outputs.</p>
<p>While two of the <em>shiny</em> modules within the “iris_explorer” app pertain to the iris dataset specifically (“iris_intro” and “iris_cluster”), the remaining <em>shiny</em> modules (“subset_rows”, “single_column_plot”, and “save”) may be incorporated into other apps.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure"><span style="display:block;" id="fig:fig2"></span>
<img src="images/figure2.png" alt="Top:  The 'iris\_explorer' app guides a user through an analysis of the iris dataset in a tab-based sequence.  Bottom:  A blueprint of the 'iris\_explorer' app shows the 5 tabs, each containing a single module identified by name within blue ovals. Some of the shiny modules require inputs and generate outputs as identified in gray polygons." width="100%" />
<p class="caption">
Figure 2: Top: The ‘iris_explorer’ app guides a user through an analysis of the iris dataset in a tab-based sequence. Bottom: A blueprint of the ‘iris_explorer’ app shows the 5 tabs, each containing a single module identified by name within blue ovals. Some of the shiny modules require inputs and generate outputs as identified in gray polygons.
</p>
</div>
</div>
<div style="page-break-after: always;"></div>
<p>Developers who utilize the same <em>shiny</em> modules within different apps will naturally be faced with several questions:</p>
<ol type="1">
<li>Which <em>shiny</em> modules have been written? Are they well documented with unit testing?</li>
<li>What are the module’s inputs (arguments) and outputs (returns)?</li>
<li>Where are the <em>shiny</em> modules stored?</li>
<li>How can <em>shiny</em> modules be combined into a cohesive, well-documented app?</li>
<li>How can production-ready apps be deployed for end-users?</li>
</ol>
<p>Users of an app created with the <em>shinymgr</em> framework may wish to know:</p>
<ol start="6" type="1">
<li>Can analysis outputs be saved as a fully reproducible workflow?</li>
<li>Can outputs be ingested into a <em>Rmarkdown</em> or <em>Quarto</em> template for rapid reporting?</li>
</ol>
<h3 data-number="1.1" id="introducing-shinymgr"><span class="header-section-number">1.1</span> Introducing <em>shinymgr</em></h3>
<p>The R package, <a href="https://cran.r-project.org/package=shinymgr">shinymgr</a>, was developed to meet these challenges <span class="citation" data-cites="shinymgr_citation">(<a href="#ref-shinymgr_citation" role="doc-biblioref">Clarfeld et al. 2024</a>)</span>. The <em>shinymgr</em> package includes a general framework that allows developers to create <em>shiny</em> modules, stitch them together as individual “apps” that are embedded within the master <em>shiny</em> application, and then deploy them on a <em>shiny</em> server or incorporate them into R packages. <em>shinymgr</em> was motivated from our first-hand experience in our work building tools that assist scientists in remote wildlife monitoring with the R package <em>AMMonitor</em> <span class="citation" data-cites="balantic2020ammonitor">(<a href="#ref-balantic2020ammonitor" role="doc-biblioref">Balantic and Donovan 2020</a>)</span>. Dependencies of <em>shinymgr</em> include the packages <a href="https://cran.r-project.org/package=DBI">DBI</a> <span class="citation" data-cites="dbi">(<a href="#ref-dbi" role="doc-biblioref">R Special Interest Group on Databases (R-SIG-DB) et al. 2022</a>)</span>, <a href="https://cran.r-project.org/package=reactable">reactable</a> <span class="citation" data-cites="reactable">(<a href="#ref-reactable" role="doc-biblioref">Lin 2022</a>)</span>, <a href="https://cran.r-project.org/package=RSQLite">RSQLite</a> <span class="citation" data-cites="RSQLite">(<a href="#ref-RSQLite" role="doc-biblioref">Müller et al. 2022</a>)</span>, <a href="https://cran.r-project.org/package=renv">renv</a> <span class="citation" data-cites="renv">(<a href="#ref-renv" role="doc-biblioref">Ushey 2023</a>)</span>, <a href="https://cran.r-project.org/package=shiny">shiny</a> <span class="citation" data-cites="shiny">(<a href="#ref-shiny" role="doc-biblioref">Chang et al. 2022</a>)</span>, <a href="https://cran.r-project.org/package=shinyjs">shinyjs</a> <span class="citation" data-cites="shinyjs">(<a href="#ref-shinyjs" role="doc-biblioref">Attali 2021</a>)</span>, and <a href="https://cran.r-project.org/package=shinydashboard">shinydashboard</a> <span class="citation" data-cites="shinydashboard">(<a href="#ref-shinydashboard" role="doc-biblioref">Chang and Borges Ribeiro 2021</a>)</span>.</p>
<p>From the developer’s perspective, an “app” consists of an ordered set of tabs, each of which contain specified <em>shiny</em> modules. <em>shiny</em> modules are the basic element in the <em>shinymgr</em> framework; they can be used and re-used across different tabs and different apps. Information about each module and app is stored in a SQLite database <span class="citation" data-cites="sqlite2020hipp">(<a href="#ref-sqlite2020hipp" role="doc-biblioref">Hipp 2020</a>)</span>. The <em>shinymgr</em> app builder “stitches” <em>shiny</em> modules together so that outputs from one module serve as inputs to the next, creating an analysis pipeline that is easy to implement and maintain. When apps are production-ready , developers can deploy a stand-alone <em>shiny</em> application independent of <em>shinymgr</em> on a server or within an R package. From the end-user’s perspective, an “app” created with the <em>shinymgr</em> framework consists of an ordered series of <em>shiny</em> tabs, establishing an analysis. Users can save their inputs and outputs as an RDS file to ensure full reproducibility. Furthermore, the RDS file may be loaded into an R Markdown (Rmd) or Quarto (qmd) template for rapid reporting. We are unaware of existing packages that unify the elements of modularization, documentation, reproducibility, and reporting in a single framework.</p>
<p>We introduce <em>shinymgr</em> in sections 2-4 below. In section <a href="#appdev">2</a> we describe how developers can create apps using the <em>shinymgr</em> framework. In section <a href="#appdeploy">3</a> we describe how developers can deploy a <em>shinymgr</em> project on a local machine, server, or within an R package. In section <a href="#appUsing">4</a> describes the end-user experience, where end-users execute an “app” and store results for reproducibility and reporting. The package tutorials and cheat sheet are described in section <a href="#tuts">5</a>. The <em>shinymgr</em> package comes with a series of <a href="https://cran.r-project.org/package=learnr">learnr</a> <span class="citation" data-cites="learnr">(<a href="#ref-learnr" role="doc-biblioref">Schloerke et al. 2020</a>)</span> tutorials described at the end of the paper.</p>
<h2 data-number="2" id="appdev"><span class="header-section-number">2</span> Developing <em>shinymgr</em> apps</h2>
<h3 data-number="2.1" id="setting-up-shinymgr"><span class="header-section-number">2.1</span> Setting up <em>shinymgr</em></h3>
<p>The canonical home of <em>shinymgr</em> is <a href="https://code.usgs.gov/vtcfwru/shinymgr/" class="uri">https://code.usgs.gov/vtcfwru/shinymgr/</a> where <em>shinymgr</em> users may post merge requests and bug fix requests. <em>shinymgr</em> may also be downloaded from CRAN.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"shinymgr"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>The development version can be downloaded with:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>remotes</span><span class='fu'>::</span><span class='fu'><a href='https://remotes.r-lib.org/reference/install_gitlab.html'>install_gitlab</a></span><span class='op'>(</span></span>
<span>  repo <span class='op'>=</span> <span class='st'>"vtcfwru/shinymgr"</span>,</span>
<span>  auth_token <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Sys.getenv.html'>Sys.getenv</a></span><span class='op'>(</span><span class='st'>"GITLAB_PAT"</span><span class='op'>)</span>,</span>
<span>  host <span class='op'>=</span> <span class='st'>"code.usgs.gov"</span>,</span>
<span>  build_vignettes <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>Once installed, a new <em>shinymgr</em> project can be created within a parent directory:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># set the directory path that will house the shinymgr project</span></span>
<span><span class='va'>parentPath</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># set up raw directories and fresh database</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/shinymgr/man/shinymgr_setup.html'>shinymgr_setup</a></span><span class='op'>(</span></span>
<span>  parentPath <span class='op'>=</span> <span class='va'>parentPath</span>, </span>
<span>  demo <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>The <code>shinymgr_setup()</code> function produces the following directory structure within the primary “shinymgr” directory. This structure consists of 3 files that make up the “master” app (global.R, server.R, and ui.R), and 9 directories. If the argument demo is set to FALSE, these directories will be largely empty, except for the “modules_mgr” and “database” directories, which will contain <em>shiny</em> modules for rendering <em>shinymgr</em>’s UI and an empty SQLite database, respectively. If the argument demo is set to TRUE, each directory will include several demo files as shown, including a pre-populated database. Here, we highlight a subset of the demo files related to the “iris_explorer” app to guide developers through the key elements of <em>shinymgr</em> (additional demo files come with package but are omitted here for clarity).</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>shinymgr
├── analyses
│   └── iris_explorer_Gandalf_2023_06_05_16_30.RDS
├── data
│   └── iris.RData
├── database
│   └── shinymgr.sqlite
├── global.R
├── modules
│   ├── iris_cluster.R
│   ├── iris_intro.R
│   ├── single_column_plot.R
│   └── subset_rows.R
├── modules_app
│   └── iris_explorer.R
├── modules_mgr
│   ├── add_app.R
│   ├── add_mod.R
│   ├── add_report.R
│   ├── add_tab.R
│   ├── app_builder.R
│   ├── my_db.R
│   ├── new_analysis.R
│   ├── new_report.R
│   ├── queries.R
│   ├── save_analysis.R
│   ├── stitch_script.R
│   └── table.R
├── reports
│   └── iris_explorer
│       └── iris_explorer_report.Rmd
├── server.R
├── tests
│   ├── shinytest
│   │   ├── test-iris_explorer-expected
│   │   │   ├── 001.json
│   │   │   ├── 001.png
│   │   │   ├── 002.json
│   │   │   └── 002.png
│   │   └── test-iris_explorer.R
│   ├── shinytest.R
│   ├── testthat
│   │   ├── test-iris_cluster.R
│   │   └── test-subset_rows.R
│   └── testthat.R
├── ui.R
└── www
    ├── dark_mode.css
    └── shinymgr-hexsticker.png</code></pre>
</div>
<p>The directory structure produced by <code>shinymgr_setup()</code> includes the following:</p>
<ul>
<li><p>The <strong>analyses</strong> directory provides the developer an example of a previously run analysis that was created using the <em>shinymgr</em> framework (an RDS file). An analysis file name includes the app name (e.g. “iris_explorer”), the name of the person who ran the analysis (e.g. “Gandalf”), and the date and time of the analysis (e.g., “iris_explorer_Gandalf_2023_06_05_16_30.RDS”).</p></li>
<li><p>The <strong>data</strong> directory stores RData files that can be used by various <em>shinymgr</em> apps (e.g., “iris.RData”).</p></li>
<li><p>The <strong>database</strong> directory stores the <em>shinymgr</em> SQLite database, named “shinymgr.sqlite.” The database is used by the developer to track all <em>shiny</em> modules, their arguments (inputs), returns (outputs), and how they are combined into <em>shinymgr</em> apps.</p></li>
<li><p>The <strong>modules</strong> directory stores stand-alone <em>shiny</em> modules. These files are largely written by the developer with the help of the <code>mod_init()</code> function, and are registered in the database with the <code>mod_register()</code> function. Four of the example <em>shiny</em> modules listed are used in the “iris_explorer” app.</p></li>
<li><p>The <strong>modules_app</strong> directory stores <em>shiny</em> modules that are <em>shinymgr</em> “apps” – the stitching together of <em>shiny</em> modules into a tab-based layout that provides an analysis workflow (Figure <a href="#fig:fig2">2</a> shows the
“iris_explorer” app layout). Files within the “modules_app” directory are not written by hand - instead, they are created with the <em>shinymgr</em> “app builder.”</p></li>
<li><p>The <strong>modules_mgr</strong> directory stores <em>shiny</em> modules that build the overall <em>shinymgr</em> framework.</p></li>
<li><p>The <strong>reports</strong> directory provides an example of an <em>RMarkdown</em> (Rmd) template (e.g., “iris_explorer_report.Rmd”), allowing for rapid reporting by an end-user.</p></li>
<li><p>The <strong>tests</strong> directory stores both <a href="https://cran.r-project.org/package=testthat">testthat</a> <span class="citation" data-cites="testthat">(<a href="#ref-testthat" role="doc-biblioref">Wickham 2011</a>)</span> and <a href="https://cran.r-project.org/package=shinytest">shinytest</a> <span class="citation" data-cites="shinytest">(<a href="#ref-shinytest" role="doc-biblioref">Chang et al. 2021</a>)</span> code testing scripts.</p></li>
<li><p>The <strong>www</strong> directory stores images that may be used by a <em>shiny</em> app.</p></li>
<li><p>In addition to these directories, three files are created for launching the master <em>shinymgr</em> <em>shiny</em> application:</p>
<ol type="1">
<li><strong>ui.R</strong> - This file contains code to set the user interface for the master <em>shinymgr</em> app.<br />
</li>
<li><strong>server.R</strong> - The master server file.<br />
</li>
<li><strong>global.R</strong> - The global.R file is sourced into the server.R file at start-up. It sources all of the <em>shiny</em> modules within the <em>shinymgr</em> framework so they are available when <em>shinymgr</em> is launched.</li>
</ol></li>
</ul>
<h3 data-number="2.2" id="the-shinymgr-developers-portal"><span class="header-section-number">2.2</span> The <em>shinymgr</em> developer’s portal</h3>
<p>Once set-up is complete, the <code>launch_shinymgr()</code> function will launch the <em>shinymgr</em> “Developer’s Portal” UI, allowing developers to create and test new <em>shinymgr</em> apps.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># launch shinymgr</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/shinymgr/man/launch_shinymgr.html'>launch_shinymgr</a></span><span class='op'>(</span>shinyMgrPath <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>parentPath</span>, <span class='st'>"/shinymgr"</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>The portal is recognizable by the <em>shinymgr</em> logo in the upper left corner (Figure <a href="#fig:fig3">3</a>). The portal consists of three main tabs in the left menu. The “Developer Tools” tab is used to create apps, view the <em>shinymgr</em> database, and register reports, while the “Analysis (beta)” and “Reports (beta)” tabs allow developers to evaluate apps from the user’s perspective.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure"><span style="display:block;" id="fig:fig3"></span>
<img src="images/figure3.png" alt="The shinymgr Developer Portal consists of a sidebar panel where developers can create new shiny modules and new apps, and test-drive analyses and reports from the user's perspective. The main panel shows the 'Build App' tab within the 'Developer Tools' section." width="100%" />
<p class="caption">
Figure 3: The shinymgr Developer Portal consists of a sidebar panel where developers can create new shiny modules and new apps, and test-drive analyses and reports from the user’s perspective. The main panel shows the ‘Build App’ tab within the ‘Developer Tools’ section.
</p>
</div>
</div>
<p>The “Developer Tools” section includes 4 tabs for app development: The “Build App” tab allows the developer to create new <em>shinymgr</em> apps from existing modules using the <em>shinymgr</em> app builder; the “Database” tab displays the <em>shinymgr</em> database tables, the “Queries” tab contains a set of standard database queries, and the “Add Reports” tab allows the developer to link a report (Rmd or qmd) to a given <em>shinymgr</em> app (Figure <a href="#fig:fig3">3</a>), as described below.</p>
<h3 data-number="2.3" id="the-shinymgr-database"><span class="header-section-number">2.3</span> The <em>shinymgr</em> database</h3>
<p>The <em>shinymgr</em> SQLite database (“shinymgr.sqlite”) is a single file created by the <code>shinymgr_setup()</code> function. The database tracks all <em>shiny</em> modules, their arguments (inputs), returns (outputs), their package dependencies and version numbers, how they are combined into an “app,” and any reports that are associated with apps. The database tables are populated via dedicated <em>shinymgr</em> functions.</p>
<p>The <em>shinymgr</em> database consists of 11 tables in total (Figure <a href="#fig:fig4">4</a>). These tables are connected to each other as a typical relational database, with primary keys establishing unique records in each table, and foreign keys that reference primary keys in other tables (see Appendix A for a full database schema and the “database” <em>learnr</em> tutorial for additional information).</p>
<p>The “apps,” “appReports,” “reports,” “appTabs,” and “tabs” tables largely store information on what a user would see when they run an analysis. The table “apps” stores information about apps such as “iris_explorer.” Apps consist of tabs, which are listed in the “tabs” table. Tabs are linked to apps via the “appTabs” table. The table “reports” lists any Rmd or qmd files that serve as a report template, and the table “appReports” links a specific report with a specific app.</p>
<p>The remaining 6 tables in Figure <a href="#fig:fig4">4</a> are “modules,” “modFunctionArguments,” “modFunctionReturns,” “modPackages,” “tabModules,” and “appStitching.” These tables largely store information about <em>shiny</em> modules that a developer creates, i.e., what <em>shiny</em> modules have been written, what are their arguments and returns, and what packages they use. The “tabModules” table identifies which tabs call which <em>shiny</em> modules (with a single tab capable of calling multiple <em>shiny</em> modules), and the “appStitching” table specifies how <em>shiny</em> modules are “stitched” together, i.e., which module returns are passed in as arguments to downstream <em>shiny</em> modules.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure"><span style="display:block;" id="fig:fig4"></span>
<img src="images/figure4.jpg" alt="The 11 tables of the shinymgr SQLite database. Lines indicate how the tables are related to each other." width="100%" />
<p class="caption">
Figure 4: The 11 tables of the shinymgr SQLite database. Lines indicate how the tables are related to each other.
</p>
</div>
</div>
<p>Four of the 11 database tables focus on modules, highlighting that <em>shiny</em> modules are basic building blocks of any <em>shinymgr</em> app. Developers create new <em>shiny</em> modules with the <code>mod_init()</code> function, which copies a <em>shinymgr</em> module template (an R file template) that includes a header with key-value that describe the module, including the module name, display name, description, citation, notes, and module arguments and returns (if any). For example, the header of the iris_cluster module is:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb2"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>#!! ModName = iris_cluster</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>#!! ModDisplayName = Iris K-Means Clustering</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>#!! ModDescription = Clusters iris data based on 2 attributes</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>#!! ModCitation = Baggins, Bilbo.  (2023). iris_cluster. [Source code].</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>#!! ModNotes = Demo module for the shinymgr package.</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>#!! ModActive = 1</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>#!! FunctionReturn = returndf !! selected attributes and their assigned clusters !! data.frame</span></code></pre></div>
</div>
<p>The module code is written beneath the header (see Appendix B for an example). Function calls within the module code should be written with <code>package::function()</code> notation, making explicit any R package dependencies. Once the module is completed, unit tests can written and stored in the <em>shinymgr</em> project’s “tests” directory. The final module file is saved to the “modules” directory and registered into the database with the <code>mod_register()</code> function. The <code>mod_register()</code> function populates the modules, “modFunctionArguments”, and “modFunctionReturns” SQLite database tables. Further, it uses the <em>renv</em> package to identify any package dependencies and inserts them into the modPackages table. Readers are referred to the “modules” “tests”, and “shinymgr_modules” <em>learnr</em> tutorials that come with the <em>shinymgr</em> package for more details.</p>
<p>Once modules are registered in the database, the developer can incorporate them into new apps. As <em>shiny</em> modules and apps in the database represent files that contain their scripts, deleting a module or an app from the database will delete all downstream database entries as well as (optionally) the actual files themselves. Deletion of a module will fail if it is being used in other apps. Module updates can be versioned by creating a new module and then referencing its precursor in the “modules” database table.</p>
<h3 data-number="2.4" id="the-shinymgr-app-builder"><span class="header-section-number">2.4</span> The <em>shinymgr</em> app builder</h3>
<p>Once developers create and register their own stand-alone <em>shiny</em> modules, apps are generated with <em>shinymgr</em>’s app builder (Figure <a href="#fig:fig5">5</a>).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure"><span style="display:block;" id="fig:fig5"></span>
<img src="images/figure5.png" alt="The shinymgr Developer Portal layout, showing the app builder in the Developer Tools." width="100%" />
<p class="caption">
Figure 5: The shinymgr Developer Portal layout, showing the app builder in the Developer Tools.
</p>
</div>
</div>
<p>Developers are guided through a process where they design their app from <em>shiny</em> modules they have registered. The builder then populates the <em>shinymgr</em> database with instructions on how to construct the app and writes the app’s script based on those instructions. The newly created script is saved to the “modules_app” directory. Through this structured process, apps produced by the builder are well-documented and generate highly reproducible analyses. Readers are encouraged to peruse the tutorial, “apps”, for more information.</p>
<p>The <code>qry_app_flow()</code> function will query the database to return a list of the <em>shiny</em> modules and tabs included in a specified app, such as “iris_explorer”:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># look at the appTabs table in the database</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/shinymgr/man/qry_app_flow.html'>qry_app_flow</a></span><span class='op'>(</span><span class='st'>"iris_explorer"</span>, shinyMgrPath <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span><span class='op'>(</span><span class='op'>)</span>,<span class='st'>"/shinymgr"</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>      fkAppName      fkTabName tabOrder       fkModuleName modOrder
1 iris_explorer       IE_intro        1         iris_intro        1
2 iris_explorer   IE_iris_data        2       iris_cluster        1
3 iris_explorer IE_subset_rows        3        subset_rows        1
4 iris_explorer   IE_plot_data        4 single_column_plot        1</code></pre>
</div>
<p>As shown in Figure <a href="#fig:fig2">2</a>, this app has 5 tabs, and each tab features a single module. The “Save” tab is the final tab in all <em>shinymgr</em> apps and is not listed in the query result.</p>
<p>Developers can “beta test” apps prior to deployment by selecting the Analysis (beta) tab in the Developer’s Portal (Figure <a href="#fig:fig3">3</a>). They can also create <em>RMarkdown</em> or <em>Quarto</em> report templates that accept the outputs from an analysis and incorporate them into a report. Report metadata are logged in the “reports” table of the database, and then linked with a specific app in the “appReports” table. An end-user will run an analysis and render a report, a process described more fully in the “Using <em>shinymgr</em> Apps” section below.</p>
<p>To summarize this section, developers use the <code>shinymgr_setup()</code> function to create the directory structure and underlying database needed to build and run <em>shiny</em> apps with <em>shinymgr</em>. Developers use the <code>mod_init()</code> and <code>mod_register()</code> functions to create modules and make them available for inclusion in new apps built with the <em>shinymgr</em> app builder. A developer can create as many <em>shinymgr</em> projects as needed. In each case, the <em>shinymgr</em> project is simply a fixed directory structure with three R files (ui.R, server.R, and global.R), and a series of subdirectories that contain the apps and <em>shiny</em> modules created by the developer, along with a database for tracking everything.</p>
<h2 data-number="3" id="appdeploy"><span class="header-section-number">3</span> Deploying <em>shinymgr</em> projects</h2>
<p>Once development is completed, developers can deploy their <em>shinymgr</em> project on a server or within an R package by copying portions of the <em>shinymgr</em> project to a new location while retaining the original project for future development. Once deployed, a <em>shinymgr</em> project no longer requires the <em>shinymgr</em> package or database to be run. Thus, the files and directories to be copied for deployment include only:</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>shinymgr
├── data
├── global.R
├── modules
├── modules_app
├── modules_mgr
├── reports
├── server.R
├── ui.R
└── www</code></pre>
</div>
<p>The master app files, ui.R, global.R, and server.R, are needed to run the <em>shinymgr</em> framework.</p>
<p>When deploying a <em>shinymgr</em> project within an R package, objects within the data folder should be copied into the package’s “data” folder. The remaining files should be copied into a directory within the package’s “inst” folder that will house the master <em>shiny</em> application. Deployment on a server such as shinyapps.io will require similar adjustments.</p>
<p>After files are copied to the correct location, a few key adjustments are needed. First, the “modules_app” directory should contain only those apps (and dependent modules and reports) that can be used by end-users; unused apps, modules, and reports can be deleted. Second, the new.analysis.R script within the modules_mgr folder will require minor updates to remove dependencies on the <em>shinymgr</em> database. Third, the ui.R and server.R scripts should be updated to no longer showcase <em>shinymgr</em> and the Developer’s Portal; rather, it should be customized by the developer to create their own purpose-driven apps. For example, Figure <a href="#fig:fig6">6</a> shows a hypothetical deployment of the master app titled “Deployed Project” that is based on the <em>shinymgr</em> framework. Notice the absence of the Developer Tools tab and the absence of references to <em>shinymgr</em>. The “deployment” <em>learnr</em> tutorial provides more in-depth discussion.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure"><span style="display:block;" id="fig:fig6"></span>
<img src="images/figure6.png" alt="An example of a deployed shinymgr app. The deployed version excludes the Developers Tools tab and is an example of what the end user sees when using a deployed app." width="100%" />
<p class="caption">
Figure 6: An example of a deployed shinymgr app. The deployed version excludes the Developers Tools tab and is an example of what the end user sees when using a deployed app.
</p>
</div>
</div>
<p>To summarize this section, deploying the <em>shinymgr</em> framework involves copying key elements of the <em>shinymgr</em> developer project into package or server directories, updated as needed for use by end-users. Readers are referred to the “deployment” tutorial for further information.</p>
<h2 data-number="4" id="appUsing"><span class="header-section-number">4</span> Using <em>shinymgr</em> apps</h2>
<p>Apps built with <em>shinymgr</em> can appeal to various types of end-users. When deployed as part of an R package, end-users would be anyone who uses that package. Apps may also be distributed as stand-alone scripts, or hosted on a server, as described above. Developers may also use <em>shinymgr</em> to produce apps for their own use (i.e., the developer <em>is</em> the end-user). Regardless of who the intended end-user is, this section discusses that user’s experience after the master app is deployed.</p>
<p>Whoever the intended audience for the app, this section discusses how an app can be used <em>after</em> it has been deployed.</p>
<h3 data-number="4.1" id="reproducible-analyses"><span class="header-section-number">4.1</span> Reproducible analyses</h3>
<p>The final tab in any <em>shinymgr</em> app provides the opportunity to save the analysis itself. Reproducibility is a core tenet of <em>shinymgr.</em> Therefore, a robust set of metadata are saved as an RDS file to allow a user to understand and replicate their results. An example of a completed analysis is the file, “iris_explorer_Gandalf_2023_06_05_16_30.RDS,” which stores a user’s analytic steps for a run of the “iris explorer” app. The code below reads in this example file, and shows the structure (a list with 23 elements):</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>rds_filepath</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span><span class='op'>(</span><span class='op'>)</span>,<span class='st'>"/shinymgr/analyses/iris_explorer_Gandalf_2023_06_05_16_30.RDS"</span><span class='op'>)</span></span>
<span><span class='va'>old_analysis</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/readRDS.html'>readRDS</a></span><span class='op'>(</span><span class='va'>rds_filepath</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>old_analysis</span>, max.level <span class='op'>=</span> <span class='fl'>2</span>, nchar.max <span class='op'>=</span> <span class='fl'>20</span>, vec.len <span class='op'>=</span> <span class='fl'>15</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>List of 23
 $ analysisName                          : chr &quot;iri&quot;| __truncated__
 $ app                                   : chr &quot;iris_explorer&quot;
 $ username                              : chr &quot;Gandalf&quot;
 $ mod2-clusters                         : int 3
 $ mod2-xcol                             : chr &quot;Sepal.Length&quot;
 $ mod2-ycol                             : chr &quot;Petal.Length&quot;
 $ mod3-full_table__reactable__pageSize  : int 10
 $ mod3-resample                         : &#39;shinyActionButtonValue&#39; int 1
 $ mod3-full_table__reactable__pages     : int 15
 $ mod3-subset_table__reactable__page    : int 1
 $ mod3-full_table__reactable__page      : int 1
 $ mod3-sample_num                       : int 20
 $ mod3-subset_table__reactable__pages   : int 2
 $ mod3-subset_table__reactable__pageSize: int 10
 $ returns                               :List of 3
  ..$ data1:List of 1
  ..$ data2:List of 1
  ..$ data3:List of 2
 $ notes                                 : chr &quot;Thi&quot;| __truncated__
 $ timestamp                             : POSIXct[1:1], format: &quot;202&quot;| __truncated__
 $ metadata                              :List of 6
  ..$ appDescription: chr &quot;Clu&quot;| __truncated__
  ..$ mod1          :List of 7
  ..$ mod2          :List of 7
  ..$ mod3          :List of 7
  ..$ mod4          :List of 7
  ..$ lockfile      :List of 2
 $ app_code                              : chr &quot;# T&quot;| __truncated__
 $ iris_intro_code                       : chr &quot;#!!&quot;| __truncated__
 $ iris_cluster_code                     : chr &quot;#!!&quot;| __truncated__
 $ subset_rows_code                      : chr &quot;#!!&quot;| __truncated__
 $ single_column_plot_code               : chr &quot;#!!&quot;| __truncated__</code></pre>
</div>
<p>The list stores a great deal of information:</p>
<ul>
<li><strong>analysisName</strong> is the name of the analysis and is equivalent to the filename of the RDS file (without the extension)</li>
<li><strong>app</strong> is the name of the app that produced the saved analysis results.</li>
<li><strong>username</strong> was entered in the “Save” tab when the analysis was performed.</li>
<li><strong>mod#-value</strong> indicate the values of each <em>shiny</em> module’s arguments (inputs), if any exist, at the time the analysis was saved.</li>
<li><strong>returns</strong> includes values of all outputs (returns) of each module.</li>
<li><strong>notes</strong> were entered in the “Save” tab when the analysis was performed.</li>
<li><strong>timestamp</strong> is the date/time when the analysis was saved.</li>
<li><strong>metadata</strong> includes robust information about each module, including the app description and the description of each module as it was originally stored in the <em>shinymgr</em> database tables. The metadata list element also includes an <em>renv</em> “lockfile”: a list that describes the R version and R package dependencies (including <em>shinymgr</em>) used by the app itself. The lockfile captures the state of the app’s package dependencies at the time of its creation; in the case of <em>shinymgr</em>, it contains the dependencies used by the developer who created the app. Each lockfile record includes the name and version of the package and their installation source.</li>
<li><strong>*_code</strong> attributes with this format contain the source code for the app.</li>
</ul>
<p>The code list element allows an end user to revisit the full analysis with <em>shinymgr</em>’s <code>rerun_analysis()</code> function, supplying the file path to a saved <em>shinymgr</em> analysis (RDS file).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/shinymgr/man/rerun_analysis.html'>rerun_analysis</a></span><span class='op'>(</span>analysis_path <span class='op'>=</span> <span class='va'>rds_filepath</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>The <code>rerun_analysis()</code> function will launch a <em>shiny</em> app with two tabs (Figure <a href="#fig:fig7">7</a>); it can only be run during an interactive R session, with no other <em>shiny</em> apps running.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure"><span style="display:block;" id="fig:fig7"></span>
<img src="images/figure7.png" alt="A screenshot of the rerun\_analysis() function, as called on the saved analysis from the iris\_explorer app (RDS file). The active tab, called 'The App', allows a user to rerun a previously executed analysis. The 'Analysis Summary' tab displays the values of all module arguments and returns, captured when the analysis was saved, along with a detailed description of the app, it's modules, the App's source code, and all package dependencies." width="100%" />
<p class="caption">
Figure 7: A screenshot of the rerun_analysis() function, as called on the saved analysis from the iris_explorer app (RDS file). The active tab, called ‘The App’, allows a user to rerun a previously executed analysis. The ‘Analysis Summary’ tab displays the values of all module arguments and returns, captured when the analysis was saved, along with a detailed description of the app, it’s modules, the App’s source code, and all package dependencies.
</p>
</div>
</div>
<p>The first tab is called “The App”, and will be visible when the <code>rerun_analysis()</code> function is called. It contains a header with the app’s name, a subheading of “Analysis Rerun,” and a fully functioning, identical copy of the <em>shiny</em> app used to generate the saved analysis. Below that, a disclaimer appears, indicating the app was produced from a saved analysis. A summary of the analysis is presented on the second tab that displays the values used to produce the given analysis output.</p>
<p>If the <code>rerun_analysis()</code> function fails, it could be due to a change in R and package versions currently installed on the end-user’s machine. To that end, the lockfile that is included in the metadata section of the RDS file can be used to restore the necessary R packages and R version with the <code>restore_analysis()</code> function. This function will attempt to create a self-contained <em>renv</em> R project that includes all of the packages and the R version used by the developer when the app was created. The analysis RDS is added to this new project, where the <code>rerun_analysis()</code> function can be attempted again. Readers are referred to the “analyses” tutorial for further information.</p>
<h3 data-number="4.2" id="rapid-reporting"><span class="header-section-number">4.2</span> Rapid reporting</h3>
<p>Another important feature of <em>shinymgr</em> is the ability to share results of an analysis with others in a friendly, readable format with <em>RMarkdown</em> or <em>Quarto</em>. Apps produce an RDS file, which may be passed into an Rmd or qmd file as a parameterized input. For example, the demo database includes a report template called “iris_explorer_report.Rmd.” This file, with code shown below, allows users to navigate to the RDS file produced by the “iris explorer” app and render the rapid report.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>title<span class="sc">:</span> <span class="st">&#39;Annual Report for Iris Explorer&#39;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>output<span class="sc">:</span> html_document</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>params<span class="sc">:</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  user<span class="sc">:</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    label<span class="sc">:</span> <span class="st">&quot;User&quot;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    value<span class="sc">:</span> <span class="st">&quot;Bilbo&quot;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    placeholder<span class="sc">:</span> <span class="st">&quot;Enter user name&quot;</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  year<span class="sc">:</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    label<span class="sc">:</span> <span class="st">&quot;Year&quot;</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    value<span class="sc">:</span> <span class="dv">2017</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    input<span class="sc">:</span> slider</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    min<span class="sc">:</span> <span class="dv">2010</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    max<span class="sc">:</span> <span class="dv">2018</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    step<span class="sc">:</span> <span class="dv">1</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    sep<span class="sc">:</span> <span class="st">&quot;&quot;</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  file<span class="sc">:</span> </span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>   input<span class="sc">:</span> file</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>   label<span class="sc">:</span> <span class="st">&quot;Choose RDS&quot;</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>   value<span class="sc">:</span> <span class="st">&quot;&quot;</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>   multiple<span class="sc">:</span> <span class="cn">FALSE</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>   buttonLabel<span class="sc">:</span> <span class="st">&quot;Browse to analysis output...&quot;</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r setup, include=FALSE}</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="at">knitr::opts_chunk$set(echo = FALSE)</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="at">library(knitr)</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="at">ps &lt;- readRDS(params$file)</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>This report summarizes an analysis of iris data by </span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">r params$user</span><span class="st">`</span> conducted  <span class="cf">in</span> <span class="st">`</span><span class="at">r params$year</span><span class="st">`</span>. Iris </span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>data was clustered into <span class="st">`</span><span class="at">r ps$&#39;mod2-clusters&#39;</span><span class="st">`</span> groups </span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>based on <span class="st">`</span><span class="at">r ps$&#39;mod2-xcol&#39;</span><span class="st">`</span> and <span class="st">`</span><span class="at">r ps$&#39;mod2-ycol&#39;</span><span class="st">`</span>. </span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>A random sample of  <span class="st">`</span><span class="at">r ps$&#39;mod3-sample_num&#39;</span><span class="st">`</span> records </span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>were collected, with sample sizes shown <span class="cf">in</span> the pie</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>chart below<span class="sc">:</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="at">pie_data &lt;- table(ps$returns$data2$subset_data$cluster)</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a><span class="at">pie(</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a><span class="at">  x = pie_data,</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a><span class="at">  labels = as.character(pie_data), </span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a><span class="at">  col = rainbow(length(pie_data)),</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a><span class="at">  main = &quot;Number of random samples by cluster&quot;</span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a><span class="at">legend(</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a><span class="at">  x = &quot;topright&quot;, </span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a><span class="at">  legend = names(pie_data), </span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a><span class="at">  fill = rainbow(length(pie_data))</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a><span class="at">)</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>Some things to note about this analysis are<span class="sc">:</span>  <span class="st">`</span><span class="at">r ps$notes</span><span class="st">`</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>Respectfully submitted,</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>Gandalf</span></code></pre></div>
</div>
<p>Reports may be run within the deployed version of <em>shinymgr</em> (e.g., left menu of Figure <a href="#fig:fig6">6</a>), or may be run directly in R by opening the Rmd file and navigating to the RDS as a file input. Users who run a report can download it to their local machine as a HTML, PDF, or Word file, where they can further customize the output.</p>
<p>To summarize this section, users of <em>shinymgr</em> “apps” created with the <em>shinymgr</em> framework are presented with a series of <em>shiny</em> tabs that establish an analysis workflow. Users can save their inputs and outputs as an RDS file to ensure full reproducibility. Further, the RDS file may be loaded into an R Markdown (Rmd) or Quarto (qmd) template for rapid reporting.</p>
<h2 data-number="5" id="tuts"><span class="header-section-number">5</span> Tutorials and cheatsheet</h2>
<p>with the package. Below is a list of current tutorials, intended to be worked through in order:</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>Available tutorials:
* shinymgr
  - intro            : &quot;shinymgr-01: Introduction&quot;
  - shiny            : &quot;shinymgr-02: Shiny&quot;
  - modules          : &quot;shinymgr-03: Modules&quot;
  - app_modules      : &quot;shinymgr-04: App modules&quot;
  - tests            : &quot;shinymgr-05: Tests&quot;
  - shinymgr         : &quot;shinymgr-06: shinymgr&quot;
  - database         : &quot;shinymgr-07: Database&quot;
  - shinymgr_modules : &quot;shinymgr-08: shinymgr_modules &quot;
  - apps             : &quot;shinymgr-09: Apps&quot;
  - analyses         : &quot;shinymgr-10: Analyses&quot;
  - reports          : &quot;shinymgr-11: Reports&quot;
  - deployment       : &quot;shinymgr-12: Deployment&quot; </code></pre>
</div>
<p>The “intro” tutorial gives a general overview. Tutorials 2-5 are aimed at developers who are new to <em>shiny</em>, while tutorials 6 – 12 focus on the <em>shinymgr</em> package.</p>
<p>Launch a tutorial with the <em>learnr</em> <code>run_tutorial()</code> function, providing the name of the module to launch. The tutorial should launch in a browser, which has the benefit of being able to print the tutorial to PDF upon completion:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>learnr</span><span class='fu'>::</span><span class='fu'><a href='https://pkgs.rstudio.com/learnr/reference/run_tutorial.html'>run_tutorial</a></span><span class='op'>(</span></span>
<span>  name <span class='op'>=</span> <span class='st'>"modules"</span>, </span>
<span>  package <span class='op'>=</span> <span class='st'>"shinymgr"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>Additionally, the package cheatsheet can be found with:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/utils/browseURL.html'>browseURL</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/find.package.html'>find.package</a></span><span class='op'>(</span><span class='st'>"shinymgr"</span><span class='op'>)</span>, <span class='st'>"/extdata/shinymgr_cheatsheet.pdf"</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>Contributions are welcome from the community. Questions can be asked on the
issues page at <a href="https://code.usgs.gov/vtcfwru/shinymgr/issues" class="uri">https://code.usgs.gov/vtcfwru/shinymgr/issues</a>.</p>
<h2 data-number="6" id="acknowledgments"><span class="header-section-number">6</span> Acknowledgments</h2>
<p>We thank Cathleen Balantic and Jim Hines for feedback on the overall package and package tutorials. <em>shinymgr</em> was prototyped by Therese Donovan at a <em>shiny</em> workshop taught by Chris Dorich and Matthew Ross at Colorado State University in 2020 (pre-pandemic). We thank the instructors for feedback and initial coding assistance. Any use of trade, firm, or product names is for descriptive purposes only and does not imply endorsement by the U.S. Government. The Vermont Cooperative Fish and Wildlife Research Unit is jointly supported by the U.S. Geological Survey, University of Vermont, Vermont Fish and Wildlife Department, and Wildlife Management Institute.</p>
<h2 data-number="7" id="bibliography"><span class="header-section-number">7</span> Bibliography</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Alston" class="csl-entry" role="listitem">
J. M. Alston and J. A. Rick. A beginner’s guide to conducting reproducible research. <em>The Bulletin of the Ecological Society of America</em>, 102(2): e01801, 2021. URL <a href="https://esajournals.onlinelibrary.wiley.com/doi/abs/10.1002/bes2.1801">https://esajournals.onlinelibrary.wiley.com/doi/abs/10.1002/bes2.1801</a>.
</div>
<div id="ref-shinyjs" class="csl-entry" role="listitem">
D. Attali. <em>Shinyjs: Easily improve the user experience of your shiny apps in seconds.</em> 2021. URL <a href="https://CRAN.R-project.org/package=shinyjs">https://CRAN.R-project.org/package=shinyjs</a>. R package version 2.1.0.
</div>
<div id="ref-balantic2020ammonitor" class="csl-entry" role="listitem">
C. Balantic and T. Donovan. AMMonitor: Remote monitoring of biodiversity in an adaptive framework with r. <em>Methods in Ecology and Evolution</em>, 11(7): 869–877, 2020. DOI <a href="https://doi.org/10.1111/2041-210X.13397">https://doi.org/10.1111/2041-210X.13397</a>.
</div>
<div id="ref-periscope" class="csl-entry" role="listitem">
C. Brett and I. Neuhaus. <em>Periscope: Enterprise streamlined ’shiny’ application framework.</em> 2022. URL <a href="https://CRAN.R-project.org/package=periscope">https://CRAN.R-project.org/package=periscope</a>. R package version 1.0.1.
</div>
<div id="ref-shinyauthr" class="csl-entry" role="listitem">
P. Campbell. <em>Shinyauthr: ’Shiny’ authentication modules.</em> 2021. URL <a href="https://CRAN.R-project.org/package=shinyauthr">https://CRAN.R-project.org/package=shinyauthr</a>. R package version 1.0.0.
</div>
<div id="ref-shinydashboard" class="csl-entry" role="listitem">
W. Chang and B. Borges Ribeiro. <em>Shinydashboard: Create dashboards with ’shiny’.</em> 2021. URL <a href="https://CRAN.R-project.org/package=shinydashboard">https://CRAN.R-project.org/package=shinydashboard</a>. R package version 0.7.2.
</div>
<div id="ref-shiny" class="csl-entry" role="listitem">
W. Chang, J. Cheng, J. Allaire, C. Sievert, B. Schloerke, Y. Xie, J. Allen, J. McPherson, A. Dipert and B. Borges. <em>Shiny: Web application framework for r.</em> 2022. URL <a href="https://CRAN.R-project.org/package=shiny">https://CRAN.R-project.org/package=shiny</a>. R package version 1.7.3.
</div>
<div id="ref-shinytest" class="csl-entry" role="listitem">
W. Chang, G. Csárdi and H. Wickham. <em>Shinytest: Test shiny apps.</em> 2021. URL <a href="https://CRAN.R-project.org/package=shinytest">https://CRAN.R-project.org/package=shinytest</a>. R package version 1.5.1.
</div>
<div id="ref-shinymgr_citation" class="csl-entry" role="listitem">
L. Clarfeld, C. Tang and T. Donovan. <em>Shinymgr: A framework for building, managing, and stitching shiny modules into reproducible workflows.</em> U.S. Geological Survey software release. Reston, VA., 2024. DOI <a href="https://doi.org/10.5066/P9UXPOBN">10.5066/P9UXPOBN</a>. R package version 1.1.0.
</div>
<div id="ref-shinipsum" class="csl-entry" role="listitem">
C. Fay and S. Rochette. <em>Shinipsum: Lorem-ipsum helper function for ’shiny’ prototyping.</em> 2020. URL <a href="https://cran.r-project.org/web/packages/shinipsum/index.html">https://cran.r-project.org/web/packages/shinipsum/index.html</a>. R package version 0.1.0.
</div>
<div id="ref-golum" class="csl-entry" role="listitem">
C. Fay, S. Rochette, V. Guyader and C. Girard. <em>Engineering production-grade shiny apps.</em> Chapman; Hall/CRC, 2021. DOI <a href="https://doi.org/10.1201/9781003029878">https://doi.org/10.1201/9781003029878</a>.
</div>
<div id="ref-fisher1936use" class="csl-entry" role="listitem">
R. A. Fisher. The use of multiple measurements in taxonomic problems. <em>Annals of eugenics</em>, 7(2): 179–188, 1936. DOI <a href="https://doi.org/10.1111/j.1469-1809.1936.tb02137.x">https://doi.org/10.1111/j.1469-1809.1936.tb02137.x</a>.
</div>
<div id="ref-Gentleman" class="csl-entry" role="listitem">
R. Gentleman and D. T. Lang. Statistical analyses and reproducible research. <em>Journal of Computational and Graphical Statistics</em>, 16(1): 1–23, 2007. URL <a href="https://doi.org/10.1198/106186007X178663">https://doi.org/10.1198/106186007X178663</a>.
</div>
<div id="ref-sqlite2020hipp" class="csl-entry" role="listitem">
R. D. Hipp. <span>SQLite</span>. 2020. URL <a href="https://www.sqlite.org/index.html">https://www.sqlite.org/index.html</a>.
</div>
<div id="ref-jsmodule" class="csl-entry" role="listitem">
J. Kim and H. Lee. <em>Jsmodule: ’RStudio’ addins and ’shiny’ modules for medical research.</em> 2022. URL <a href="https://CRAN.R-project.org/package=jsmodule">https://CRAN.R-project.org/package=jsmodule</a>. R package version 1.3.0.
</div>
<div id="ref-reglog" class="csl-entry" role="listitem">
M. Kosinski. <em>Shiny.reglog: Optional login and registration module system for ShinyApps.</em> 2022. URL <a href="https://statismike.github.io/shiny.reglog/">https://statismike.github.io/shiny.reglog/</a>. R package version 0.5.2.
</div>
<div id="ref-larman2004agile" class="csl-entry" role="listitem">
C. Larman. <em>Agile and iterative development: A manager’s guide.</em> Addison-Wesley Professional, 2004.
</div>
<div id="ref-reactable" class="csl-entry" role="listitem">
G. Lin. <em>Reactable: Interactive data tables based on ’react table’.</em> 2022. URL <a href="https://CRAN.R-project.org/package=reactable">https://CRAN.R-project.org/package=reactable</a>. R package version 0.3.0.
</div>
<div id="ref-shinyblog" class="csl-entry" role="listitem">
<span class="smallcaps">Modularizing shiny app code</span>. 2020. URL <a href="https://shiny.posit.co/r/articles/improve/modules/">https://shiny.posit.co/r/articles/improve/modules/</a>. Accessed: 2010-09-30.
</div>
<div id="ref-RSQLite" class="csl-entry" role="listitem">
K. Müller, H. Wickham, D. A. James and S. Falcon. <em>RSQLite: SQLite interface for r.</em> 2022. URL <a href="https://CRAN.R-project.org/package=RSQLite">https://CRAN.R-project.org/package=RSQLite</a>. R package version 2.2.14.
</div>
<div id="ref-Peng" class="csl-entry" role="listitem">
R. D. Peng. Reproducible research in computational science. <em>Science</em>, 334(6060): 1226–1227, 2011. URL <a href="https://www.science.org/doi/abs/10.1126/science.1213847">https://www.science.org/doi/abs/10.1126/science.1213847</a>.
</div>
<div id="ref-datamods" class="csl-entry" role="listitem">
V. Perrier, F. Meyer and Z. S. Abeer. <em>Datamods: Modules to import and manipulate data in ’shiny’.</em> 2022. URL <a href="https://CRAN.R-project.org/package=datamods">https://CRAN.R-project.org/package=datamods</a>. R package version 1.3.3.
</div>
<div id="ref-dbi" class="csl-entry" role="listitem">
R Special Interest Group on Databases (R-SIG-DB), H. Wickham and K. Müller. <em>DBI: R database interface.</em> 2022. URL <a href="https://CRAN.R-project.org/package=DBI">https://CRAN.R-project.org/package=DBI</a>. R package version 1.1.3.
</div>
<div id="ref-learnr" class="csl-entry" role="listitem">
B. Schloerke, J. Allaire and B. Borges. <em>Learnr: Interactive tutorials for r.</em> 2020. URL <a href="https://CRAN.R-project.org/package=learnr">https://CRAN.R-project.org/package=learnr</a>. R package version 0.10.1.
</div>
<div id="ref-stoudt2021principles" class="csl-entry" role="listitem">
S. Stoudt, V. N. Vásquez and C. C. Martinez. Principles for data analysis workflows. <em>PLOS Computational Biology</em>, 17(3): e1008770, 2021. DOI <a href="https://doi.org/10.1371/journal.pcbi.1008770">https://doi.org/10.1371/journal.pcbi.1008770</a>.
</div>
<div id="ref-renv" class="csl-entry" role="listitem">
K. Ushey. <em>Renv: Project environments.</em> 2023. URL <a href="https://rstudio.github.io/renv/">https://rstudio.github.io/renv/</a>. R package version 0.17.3.
</div>
<div id="ref-testthat" class="csl-entry" role="listitem">
H. Wickham. Testthat: Get started with testing. <em>The R Journal</em>, 3: 5–10, 2011. URL <a href="https://journal.r-project.org/archive/2011-1/RJournal_2011-1_Wickham.pdf">https://journal.r-project.org/archive/2011-1/RJournal_2011-1_Wickham.pdf</a>.
</div>
<div id="ref-rhino" class="csl-entry" role="listitem">
K. Żyła, J. Nowicki, L. Siemiński, M. Rogala, R. Vibal and T. Makowski. <em>Rhino: A framework for enterprise shiny applications.</em> 2023. DOI <a href="https://doi.org/10.32614/CRAN.package.rhino">https://doi.org/10.32614/CRAN.package.rhino</a>. https://appsilon.github.io/rhino/, https://github.com/Appsilon/rhino.
</div>
</div>
<div style="page-break-after: always;"></div>
<h2 data-number="8" id="appendix-a"><span class="header-section-number">8</span> Appendix A</h2>
<p>Entity relationship diagram for the <em>shinymgr</em> database, which tracks all components of an apps and modules (Figure <a href="#fig:fig8">8</a>). The database consists of 11 tables. Primary keys are referenced with a “pk” prefix, while foreign keys are referenced with an “fk” prefix. A full description of the database is contained in the “database” <em>learnr</em> tutorial that comes with the <em>shinymgr</em> package</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure"><span style="display:block;" id="fig:fig8"></span>
<img src="images/figure8.png" alt="Entity relationship diagram for the shinymgr database, which tracks all components of an apps and modules.  The database consists of 11 tables. Primary keys are referenced with a 'pk' prefix, while foreign keys are referenced with an 'fk' prefix. A full description of the database is contained in the 'database' learnr tutorial that comes with the shinymgr package." width="85%" />
<p class="caption">
Figure 8: Entity relationship diagram for the shinymgr database, which tracks all components of an apps and modules. The database consists of 11 tables. Primary keys are referenced with a ‘pk’ prefix, while foreign keys are referenced with an ‘fk’ prefix. A full description of the database is contained in the ‘database’ learnr tutorial that comes with the shinymgr package.
</p>
</div>
</div>
<div style="page-break-after: always;"></div>
<h2 data-number="9" id="appendix-b"><span class="header-section-number">9</span> Appendix B</h2>
<p>Modules in <em>shinymgr</em> are written by developers for their own purposes. The <code>shinymgr::mod_init()</code> function creates a template for module development. The header is a series of key-value pairs that the developer fills out (typically after the module code is written and tested). The “iris_cluster” module is presented below as an example. The module consists of two paired functions: here, <code>iris_cluster_ui(id)</code> and <code>iris_cluster_server()</code>. The UI is a function with an argument called id, which is turned into module’s “namespace” with the <code>NS()</code> function. A namespace is simply the module’s identifier and ensures that function and object names within a given module do not conflict with function and object names in other modules. The Id’s for each input and output in the UI must be wrapped in a <code>ns()</code> function call to make explicit that these inputs are assigned to the module’s namespace. All UI elements are wrapped in a <code>tagList()</code> function, where a <code>tagList</code> allows one to combine multiple UI elements into a single R object. Readers should consult the “modules,” “tests,” and “shinymgr_modules” tutorials for additional information.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!! ModName = iris_cluster</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#!! ModDisplayName = Iris K-Means Clustering</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#!! ModDescription = Clusters iris data based on 2 attributes</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#!! ModCitation = Baggins, Bilbo.  (2022). iris_cluster. [Source code].</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#!! ModNotes = </span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#!! ModActive = 1</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#!! FunctionReturn = returndf !! selected attributes and their assigned clusters !! data.frame</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>iris_cluster_ui <span class="ot">&lt;-</span> <span class="cf">function</span>(id){</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create the module&#39;s namespace </span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  ns <span class="ot">&lt;-</span> <span class="fu">NS</span>(id)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>        <span class="co"># add the dropdown for the X variable</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ns</span>(<span class="st">&quot;xcol&quot;</span>),</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>          <span class="at">label =</span> <span class="st">&quot;X Variable&quot;</span>, </span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>          <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Sepal.Length&quot;</span>, </span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Sepal.Width&quot;</span>, </span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Petal.Length&quot;</span>, </span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Petal.Width&quot;</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>          <span class="at">selected =</span> <span class="st">&quot;Sepal.Length&quot;</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>        <span class="co"># add the dropdown for the Y variable</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ns</span>(<span class="st">&quot;ycol&quot;</span>), </span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>          <span class="at">label =</span> <span class="st">&quot;Y Variable&quot;</span>, </span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>          <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Sepal.Length&quot;</span>, </span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Sepal.Width&quot;</span>, </span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Petal.Length&quot;</span>, </span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Petal.Width&quot;</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>          <span class="at">selected =</span> <span class="st">&quot;Sepal.Width&quot;</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>        <span class="co"># add input box for the cluster number</span></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>        <span class="fu">numericInput</span>(</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ns</span>(<span class="st">&quot;clusters&quot;</span>), </span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>          <span class="at">label =</span> <span class="st">&quot;Cluster count&quot;</span>, </span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>          <span class="at">value =</span> <span class="dv">3</span>, </span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>          <span class="at">min =</span> <span class="dv">1</span>, </span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>          <span class="at">max =</span> <span class="dv">9</span></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>      ), <span class="co"># end of sidebarPanel</span></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mainPanel</span>(</span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>        <span class="co"># create outputs</span></span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>        <span class="fu">plotOutput</span>(</span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ns</span>(<span class="st">&quot;plot1&quot;</span>)</span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>      ) <span class="co"># end of mainPanel</span></span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>    ) <span class="co"># end of sidebarLayout</span></span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>  ) <span class="co"># end of tagList</span></span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>} <span class="co"># end of UI function</span></span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>iris_cluster_server <span class="ot">&lt;-</span> <span class="cf">function</span>(id) { </span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">moduleServer</span>(id, <span class="cf">function</span>(input, output, session) {</span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>    <span class="co"># combine variables into new data frame</span></span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>    selectedData <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>      iris[, <span class="fu">c</span>(input<span class="sc">$</span>xcol, input<span class="sc">$</span>ycol)]</span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>    <span class="co"># run kmeans algorithm </span></span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>    clusters <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a>      <span class="fu">kmeans</span>(</span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="fu">selectedData</span>(), </span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a>        <span class="at">centers =</span> input<span class="sc">$</span>clusters</span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb8-77"><a href="#cb8-77" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb8-78"><a href="#cb8-78" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-79"><a href="#cb8-79" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>plot1 <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb8-80"><a href="#cb8-80" aria-hidden="true" tabindex="-1"></a>      <span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="fl">5.1</span>, <span class="fl">4.1</span>, <span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb8-81"><a href="#cb8-81" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plot</span>(</span>
<span id="cb8-82"><a href="#cb8-82" aria-hidden="true" tabindex="-1"></a>        <span class="fu">selectedData</span>(),</span>
<span id="cb8-83"><a href="#cb8-83" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">clusters</span>()<span class="sc">$</span>cluster,</span>
<span id="cb8-84"><a href="#cb8-84" aria-hidden="true" tabindex="-1"></a>        <span class="at">pch =</span> <span class="dv">20</span>, </span>
<span id="cb8-85"><a href="#cb8-85" aria-hidden="true" tabindex="-1"></a>        <span class="at">cex =</span> <span class="dv">3</span></span>
<span id="cb8-86"><a href="#cb8-86" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb8-87"><a href="#cb8-87" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb8-88"><a href="#cb8-88" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-89"><a href="#cb8-89" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(</span>
<span id="cb8-90"><a href="#cb8-90" aria-hidden="true" tabindex="-1"></a>      <span class="fu">reactiveValues</span>(</span>
<span id="cb8-91"><a href="#cb8-91" aria-hidden="true" tabindex="-1"></a>        <span class="at">returndf =</span> <span class="fu">reactive</span>({</span>
<span id="cb8-92"><a href="#cb8-92" aria-hidden="true" tabindex="-1"></a>          <span class="fu">cbind</span>(</span>
<span id="cb8-93"><a href="#cb8-93" aria-hidden="true" tabindex="-1"></a>            <span class="fu">selectedData</span>(), </span>
<span id="cb8-94"><a href="#cb8-94" aria-hidden="true" tabindex="-1"></a>            <span class="at">cluster =</span> <span class="fu">clusters</span>()<span class="sc">$</span>cluster</span>
<span id="cb8-95"><a href="#cb8-95" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb8-96"><a href="#cb8-96" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb8-97"><a href="#cb8-97" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb8-98"><a href="#cb8-98" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-99"><a href="#cb8-99" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-100"><a href="#cb8-100" aria-hidden="true" tabindex="-1"></a>  }) <span class="co"># end of moduleServer function</span></span>
<span id="cb8-101"><a href="#cb8-101" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-102"><a href="#cb8-102" aria-hidden="true" tabindex="-1"></a>} <span class="co"># end of irisCluster function</span></span></code></pre></div>
</div>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<h3 class="appendix" data-number="9.1" id="cran-packages-used"><span class="header-section-number">9.1</span> CRAN packages used</h3>
<p><a href="https://cran.r-project.org/package=shiny">shiny</a>, <a href="https://cran.r-project.org/package=shinipsum">shinipsum</a>, <a href="https://cran.r-project.org/package=golem">golem</a>, <a href="https://cran.r-project.org/package=rhino">rhino</a>, <a href="https://cran.r-project.org/package=datamods">datamods</a>, <a href="https://cran.r-project.org/package=shiny.reglog">shiny.reglog</a>, <a href="https://cran.r-project.org/package=periscope">periscope</a>, <a href="https://cran.r-project.org/package=shinyauthr">shinyauthr</a>, <a href="https://cran.r-project.org/package=jsmodule">jsmodule</a>, <a href="https://cran.r-project.org/package=shinymgr">shinymgr</a>, <a href="https://cran.r-project.org/package=DBI">DBI</a>, <a href="https://cran.r-project.org/package=reactable">reactable</a>, <a href="https://cran.r-project.org/package=RSQLite">RSQLite</a>, <a href="https://cran.r-project.org/package=renv">renv</a>, <a href="https://cran.r-project.org/package=shinyjs">shinyjs</a>, <a href="https://cran.r-project.org/package=shinydashboard">shinydashboard</a>, <a href="https://cran.r-project.org/package=learnr">learnr</a>, <a href="https://cran.r-project.org/package=testthat">testthat</a>, <a href="https://cran.r-project.org/package=shinytest">shinytest</a></p>
<h3 class="appendix" data-number="9.2" id="cran-task-views-implied-by-cited-packages"><span class="header-section-number">9.2</span> CRAN Task Views implied by cited packages</h3>
<p><a href="https://cran.r-project.org/view=Databases">Databases</a>, <a href="https://cran.r-project.org/view=ReproducibleResearch">ReproducibleResearch</a>, <a href="https://cran.r-project.org/view=TeachingStatistics">TeachingStatistics</a>, <a href="https://cran.r-project.org/view=WebTechnologies">WebTechnologies</a></p>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="references">References</h3>
  <div id="references-listing"></div>
  <h3 id="reuse">Reuse</h3>
  <p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Clarfeld, et al., "shinymgr: A Framework for Building, Managing, and Stitching Shiny Modules into Reproducible Workflows", The R Journal, 2025</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@article{RJ-2024-009,
  author = {Clarfeld, Laurence A. and Tang, Caroline and Donovan, Therese},
  title = {shinymgr: A Framework for Building, Managing, and Stitching Shiny Modules into Reproducible Workflows},
  journal = {The R Journal},
  year = {2025},
  note = {https://doi.org/10.32614/RJ-2024-009},
  doi = {10.32614/RJ-2024-009},
  volume = {16},
  issue = {1},
  issn = {2073-4859},
  pages = {157-174}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<!--radix_placeholder_navigation_after_body--><html><body>
<div class="distill-site-nav distill-site-footer">
<p>© The R Foundation, <a href="mailto:r-journal@r-project.org">web page
contact</a>.</p>
</div>
<!--/radix_placeholder_navigation_after_body-->
</body></html>


</body>

</html>
