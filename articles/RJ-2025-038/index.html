<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

<style>
  div.csl-bib-body { }
  div.csl-entry {
    clear: both;
      margin-bottom: 0em;
    }
  .hanging div.csl-entry {
    margin-left:2em;
    text-indent:-2em;
  }
  div.csl-left-margin {
    min-width:2em;
    float:left;
  }
  div.csl-right-inline {
    margin-left:2em;
    padding-left:1em;
  }
  div.csl-indent {
    margin-left: 2em;
  }
</style>

  <!--radix_placeholder_meta_tags-->
<title>qCBA: An R Package for Postoptimization of Rule Models Learnt on Quantized Data</title>

<meta property="description" itemprop="description" content="A popular approach to building rule models is association rule&#10;classification. However, these often produce larger models than most&#10;other rule learners, impeding the comprehensibility of the created&#10;classifiers. Also, these algorithms decouple discretization from model&#10;learning, often leading to a loss of predictive performance. This&#10;package presents an implementation of Quantitative Classification&#10;based on Associations (QCBA), which is a collection of postprocessing&#10;algorithms for rule models built over discretized data. The QCBA&#10;method improves the fit of the bins originally produced by&#10;discretization and performs additional pruning, resulting in models&#10;that are typically smaller and often more accurate. The qCBA package&#10;supports models created with multiple packages for rule-based&#10;classification available in CRAN, including arc, arulesCBA, rCBA and&#10;sbrl."/>

<link rel="canonical" href="https://doi.org/10.32614/RJ-2025-038/"/>
<link rel="license" href="https://creativecommons.org/licenses/by/4.0/"/>
<link rel="icon" type="image/vnd.microsoft.icon" href="../../resources/favicon.ico"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2026-02-03"/>
<meta property="article:created" itemprop="dateCreated" content="2026-02-03"/>
<meta name="article:author" content="Tomas Kliegr"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="qCBA: An R Package for Postoptimization of Rule Models Learnt on Quantized Data"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="A popular approach to building rule models is association rule&#10;classification. However, these often produce larger models than most&#10;other rule learners, impeding the comprehensibility of the created&#10;classifiers. Also, these algorithms decouple discretization from model&#10;learning, often leading to a loss of predictive performance. This&#10;package presents an implementation of Quantitative Classification&#10;based on Associations (QCBA), which is a collection of postprocessing&#10;algorithms for rule models built over discretized data. The QCBA&#10;method improves the fit of the bins originally produced by&#10;discretization and performs additional pruning, resulting in models&#10;that are typically smaller and often more accurate. The qCBA package&#10;supports models created with multiple packages for rule-based&#10;classification available in CRAN, including arc, arulesCBA, rCBA and&#10;sbrl."/>
<meta property="og:url" content="https://doi.org/10.32614/RJ-2025-038/"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="The R Journal"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="qCBA: An R Package for Postoptimization of Rule Models Learnt on Quantized Data"/>
<meta property="twitter:description" content="A popular approach to building rule models is association rule&#10;classification. However, these often produce larger models than most&#10;other rule learners, impeding the comprehensibility of the created&#10;classifiers. Also, these algorithms decouple discretization from model&#10;learning, often leading to a loss of predictive performance. This&#10;package presents an implementation of Quantitative Classification&#10;based on Associations (QCBA), which is a collection of postprocessing&#10;algorithms for rule models built over discretized data. The QCBA&#10;method improves the fit of the bins originally produced by&#10;discretization and performs additional pruning, resulting in models&#10;that are typically smaller and often more accurate. The qCBA package&#10;supports models created with multiple packages for rule-based&#10;classification available in CRAN, including arc, arulesCBA, rCBA and&#10;sbrl."/>
<meta property="twitter:url" content="https://doi.org/10.32614/RJ-2025-038/"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="qCBA: An R Package for Postoptimization of Rule Models Learnt on Quantized Data"/>
<meta name="citation_fulltext_html_url" content="https://doi.org/10.32614/RJ-2025-038"/>
<meta name="citation_pdf_url" content="RJ-2025-038.pdf"/>
<meta name="citation_volume" content="17"/>
<meta name="citation_issue" content="4"/>
<meta name="citation_doi" content="10.32614/RJ-2025-038"/>
<meta name="citation_journal_title" content="The R Journal"/>
<meta name="citation_issn" content="2073-4859"/>
<meta name="citation_firstpage" content="156"/>
<meta name="citation_lastpage" content="172"/>
<meta name="citation_fulltext_world_readable" content=""/>
<meta name="citation_online_date" content="2026/02/03"/>
<meta name="citation_publication_date" content="2026/02/03"/>
<meta name="citation_author" content="Tomas Kliegr"/>
<meta name="citation_author_institution" content="Prague University of Economics and Business"/>
<!--/radix_placeholder_meta_tags-->
  
  <meta name="citation_reference" content="citation_title=FOIL: A midterm report;citation_publisher=Springer;citation_author=J Ross Quinlan;citation_author=R Mike Cameron-Jones"/>
  <meta name="citation_reference" content="citation_title=Tuning hyperparameters of classification based on associations (CBA);citation_author=Tomás Kliegr;citation_author=Jaroslav Kuchar"/>
  <meta name="citation_reference" content="citation_title=Sbrl: Scalable Bayesian rule lists model;citation_author=Hongyu Yang;citation_author=Cynthia Rudin;citation_author=Margo Seltzer"/>
  <meta name="citation_reference" content="citation_title=Scalable Bayesian rule lists;citation_publisher=PMLR;citation_author=Hongyu Yang;citation_author=Cynthia Rudin;citation_author=Margo Seltzer"/>
  <meta name="citation_reference" content="citation_title=RCAR framework: Building a regularized class association rules model in a categorical data space;citation_author=Mohamed Azmi;citation_author=Abdelaziz Berrado"/>
  <meta name="citation_reference" content="citation_title=Associative classification in R: Arc, arulesCBA, and rCBA.;citation_volume=9;citation_author=Michael Hahsler;citation_author=Ian Johnson;citation_author=Tomáš Kliegr;citation_author=Jaroslav Kuchař"/>
  <meta name="citation_reference" content="citation_title=QCBA: Improving rule classifiers learned from quantitative data by recovering information lost by discretisation;citation_publisher=Springer;citation_volume=53;citation_author=Tomáš Kliegr;citation_author=Ebroul Izquierdo"/>
  <meta name="citation_reference" content="citation_title=qCBA: Quantitative classification by association rules;citation_author=Tomáš Kliegr"/>
  <meta name="citation_reference" content="citation_title=C4.5: Programs for machine learning;citation_publisher=Morgan Kaufmann;citation_author=J Ross Quinlan"/>
  <meta name="citation_reference" content="citation_title=Association rule classification;citation_author=Tomáš Kliegr"/>
  <meta name="citation_reference" content="citation_title=arulesCBA: Classification based on association rules;citation_author=Tyler Giallanza Michael Hahsler"/>
  <meta name="citation_reference" content="citation_title=rCBA: CBA classifier for R;citation_author=Jaroslav Kuchař;citation_author=Tomáš Kliegr"/>
  <meta name="citation_reference" content="citation_title=CPAR: Classification based on predictive association rules;citation_publisher=SIAM;citation_author=Xiaoxin Yin;citation_author=Jiawei Han"/>
  <meta name="citation_reference" content="citation_title=Fast effective rule induction;citation_publisher=Morgan Kaufmann;citation_author=William W Cohen"/>
  <meta name="citation_reference" content="citation_title=FURIA: An algorithm for unordered fuzzy rule induction;citation_publisher=Springer;citation_volume=19;citation_author=Jens Hühn;citation_author=Eyke Hüllermeier"/>
  <meta name="citation_reference" content="citation_title=Interpretable decision sets: A joint framework for description and prediction;citation_publisher=ACM;citation_author=Himabindu Lakkaraju;citation_author=Stephen H. Bach;citation_author=Jure Leskovec"/>
  <meta name="citation_reference" content="citation_title=The arules r-package ecosystem: Analyzing interesting patterns from large transaction data sets;citation_volume=12;citation_author=Michael Hahsler;citation_author=Sudheer Chelluboina;citation_author=Kurt Hornik;citation_author=Christian Buchta"/>
  <meta name="citation_reference" content="citation_title=CMAR: Accurate and efficient classification based on multiple class-association rules;citation_publisher=IEEE Computer Society;citation_author=Wenmin Li;citation_author=Jiawei Han;citation_author=Jian Pei"/>
  <meta name="citation_reference" content="citation_title=Structure of association rule classifiers: A review;citation_author=K. Vanhoof;citation_author=B. Depaire"/>
  <meta name="citation_reference" content="citation_title=Integrating classification and association rule mining;citation_publisher=AAAI Press;citation_author=Bing Liu;citation_author=Wynne Hsu;citation_author=Yiming Ma"/>
  <meta name="citation_reference" content="citation_title=Multi-interval discretization of continuous-valued attributes for classification learning;citation_author=U. M. Fayyad;citation_author=K. B. Irani"/>
  <meta name="citation_reference" content="citation_title=Fast algorithms for mining association rules in large databases;citation_publisher=Morgan Kaufmann Publishers Inc.;citation_author=Rakesh Agrawal;citation_author=Ramakrishnan Srikant"/>
  <meta name="citation_reference" content="citation_title=Introduction to arules–mining association rules and frequent item sets;citation_publisher=Citeseer;citation_volume=2;citation_author=Michael Hahsler;citation_author=Bettina Grün;citation_author=Kurt Hornik"/>
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","date_received","journal","volume","issue","slug","packages","preview","bibliography","CTV","legacy_pdf","legacy_converted","output","draft","pdf_url","citation_url","doi","creative_commons","csl","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["qCBA: An R Package for Postoptimization of Rule Models Learnt on Quantized Data"]},{"type":"character","attributes":{},"value":["A popular approach to building rule models is association rule\nclassification. However, these often produce larger models than most\nother rule learners, impeding the comprehensibility of the created\nclassifiers. Also, these algorithms decouple discretization from model\nlearning, often leading to a loss of predictive performance. This\npackage presents an implementation of Quantitative Classification\nbased on Associations (QCBA), which is a collection of postprocessing\nalgorithms for rule models built over discretized data. The QCBA\nmethod improves the fit of the bins originally produced by\ndiscretization and performs additional pruning, resulting in models\nthat are typically smaller and often more accurate. The qCBA package\nsupports models created with multiple packages for rule-based\nclassification available in CRAN, including arc, arulesCBA, rCBA and\nsbrl."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","affiliation","address"]}},"value":[{"type":"character","attributes":{},"value":["Tomas Kliegr"]},{"type":"character","attributes":{},"value":["Prague University of Economics and Business"]},{"type":"character","attributes":{},"value":["Winston Churchill Sq. 4, Prague","Czech Republic","<https://nb.vse.cz/~klit01>","*ORCiD: [0000-0002-7261-0380](https://orcid.org/0000-0002-7261-0380)*","[`tomas.kliegr@vse.cz`](mailto:tomas.kliegr@vse.cz)\n[tomas.kliegr@vse.cz](tomas.kliegr@vse.cz){.uri}\n"]}]}]},{"type":"character","attributes":{},"value":["2026-02-03"]},{"type":"character","attributes":{},"value":["2024-10-01"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","issn","firstpage","lastpage"]}},"value":[{"type":"character","attributes":{},"value":["The R Journal"]},{"type":"character","attributes":{},"value":["2073-4859"]},{"type":"integer","attributes":{},"value":[156]},{"type":"integer","attributes":{},"value":[172]}]},{"type":"integer","attributes":{},"value":[17]},{"type":"integer","attributes":{},"value":[4]},{"type":"character","attributes":{},"value":["RJ-2025-038"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["cran","bioc"]}},"value":[{"type":"character","attributes":{},"value":["qCBA","rCBA","arc","arulesCBA","arules","arcPackage","rJava","datasets","discretization","sbrl"]},{"type":"list","attributes":{},"value":[]}]},{"type":"character","attributes":{},"value":["preview.png"]},{"type":"character","attributes":{},"value":["qcba.bib"]},{"type":"character","attributes":{},"value":["HighPerformanceComputing","MachineLearning","ModelDeployment"]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","mathjax","md_extension"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"]},{"type":"character","attributes":{},"value":["-tex_math_single_backslash"]}]}]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["RJ-2025-038.pdf"]},{"type":"character","attributes":{},"value":["https://doi.org/10.32614/RJ-2025-038"]},{"type":"character","attributes":{},"value":["10.32614/RJ-2025-038"]},{"type":"character","attributes":{},"value":["CC BY"]},{"type":"character","attributes":{},"value":["/home/mitchell/R/x86_64-pc-linux-gnu-library/4.5/rjtools/rjournal.csl"]},{"type":"character","attributes":{},"value":["https://doi.org/10.32614/RJ-2025-038/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["figures/figure1a.png","figures/figure1b.png","qcba.bib","qcba.pdf","qcba.tex","RJ-2025-038_files/anchor-4.2.2/anchor.min.js","RJ-2025-038_files/bowser-1.9.3/bowser.min.js","RJ-2025-038_files/distill-2.2.21/template.v2.js","RJ-2025-038_files/header-attrs-2.30/header-attrs.js","RJ-2025-038_files/jquery-3.6.0/jquery-3.6.0.js","RJ-2025-038_files/jquery-3.6.0/jquery-3.6.0.min.js","RJ-2025-038_files/jquery-3.6.0/jquery-3.6.0.min.map","RJ-2025-038_files/popper-2.6.0/popper.min.js","RJ-2025-038_files/tippy-6.2.7/tippy-bundle.umd.min.js","RJ-2025-038_files/tippy-6.2.7/tippy-light-border.css","RJ-2025-038_files/tippy-6.2.7/tippy.css","RJ-2025-038_files/tippy-6.2.7/tippy.umd.min.js","RJ-2025-038_files/webcomponents-2.0.0/webcomponents.js","RJ-2025-038.zip","RJournal.sty","RJwrapper.log","RJwrapper.tex"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
  font-size: 100%;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

hr.section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  margin: 0px;
}


d-byline {
  border-top: none;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
  border-top: none;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

/* tweak for Pandoc numbered line within distill */
d-article pre.numberSource code > span {
    left: -2em;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // separator
  var separator = '<hr class="section-separator" style="clear: both"/>';
  // prepend separator above appendix
  $('.d-byline').before(separator);
  $('.d-article').before(separator);

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme, except when numbering line
  // in code chunk
  $('pre:not(.numberLines) code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      var author_name = front_matter.authors[i].author
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', author_name ? 'ORCID ID for ' + author_name : 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      const citeChild = $(this).children()[0]
      // Do not process if @xyz has been used without escaping and without bibliography activated
      // https://github.com/rstudio/distill/issues/466
      if (citeChild === undefined) return true

      if (citeChild.nodeName == "D-FOOTNOTE") {
        var fn = citeChild
        $(this).html(fn.shadowRoot.querySelector("sup"))
        $(this).id = fn.id
        fn.remove()
      }
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        // Could use CSS.escape too here, we insure backward compatibility in navigator
        return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // fix footnotes in tables (#411)
    // replacing broken distill.pub feature
    $('table d-footnote').each(function() {
      // we replace internal showAtNode methode which is triggered when hovering a footnote
      this.hoverBox.showAtNode = function(node) {
        // ported from https://github.com/distillpub/template/pull/105/files
        calcOffset = function(elem) {
            let x = elem.offsetLeft;
            let y = elem.offsetTop;
            // Traverse upwards until an `absolute` element is found or `elem`
            // becomes null.
            while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                x += elem.offsetLeft;
                y += elem.offsetTop;
            }

            return { left: x, top: y };
        }
        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
        const bbox = node.getBoundingClientRect();
        const offset = calcOffset(node);
        this.show([offset.left + bbox.width, offset.top + bbox.height]);
      }
    })

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    // ignore leaflet img layers (#106)
    figures = figures.filter(':not(img[class*="leaflet"])')
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.7);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(0, 0, 0, 0.8);
  --text-size:        15px;
  --hover-color:      black;
  --bkgd-color:       #ffffff;
}

.distill-site-footer {
  --text-color:       rgba(0, 0, 0, 0.8);
  --text-size:        15px;
  --hover-color:      black;
  --bkgd-color:       #fafafa;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */

.nav-right > a {
  text-transform: uppercase;
}

d-title h1, d-title p, d-title figure,
d-abstract p, d-abstract b {
  grid-column: page;
}

.rj-blue {
  color: #2467bb;
}

ul li {
  line-height: 1.6;
  margin-top: 0em;
  margin-bottom: 0em;
}</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
  font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
d-article > p,  /* only text inside of <p> tags */
d-article > ul, /* lists */
d-article > ol {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}


/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
  font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
  font-size: var(--aside-size, 12px);
  color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
  font-size: var(--fig-cap-size, 13px);
  color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
  font-size: var(--heading-size, 0.6rem);
  color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
  font-size: var(--body-size, 0.8rem);
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
  font-size: var(--heading-size, 18px);
}

.d-contents nav a {
  font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
  color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
  font-size: var(--title-size, 18px);
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.nav-dropdown .nav-dropbtn {
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  font-size: var(--text-size, 15px);
}

.distill-site-header a:hover,
.nav-dropdown:hover .nav-dropbtn {
  color: var(--hover-color, white);
}

.distill-site-header {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
  color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.30/header-attrs.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->
  <script>
    $(function() {
      console.log("Starting...")

      // Mathjax config (add automatic linebreaks when supported)
      // MathJax = {
      //    tex: {
      //        inlineMath: [['$', '$'], ['\\(', '\\)']],
      //        displayMath: [['$$', '$$'], ['\\[', '\\]']],
      //        tags: 'ams',
      //        multline: true,
      //    },
      //    options: {
      //        linebreaks: { automatic: true },
      //    },
      // };

      // Always show Published - distill hides it if not set
      function show_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'visible');
      }

      show_byline_column('Published')

      // tweak function
      var rmd_meta = JSON.parse($("#radix-rmarkdown-metadata").html());
      function get_meta(name, meta) {
        var ind = meta.attributes.names.value.findIndex((e) => e == name)
        var val = meta.value[ind]
        if (val.type != 'list') {
          return val.value.toString()
        }
        return val
      }

      // tweak description
      // Add clickable tags
      const slug = get_meta('slug', rmd_meta)
      const cite_url = get_meta('citation_url', rmd_meta)

      var title = $("d-title").text

      const buttons = $('<div class="dt-tags" style="grid-column: page;">')
      buttons.append('<a href="#citation" class="dt-tag"><i class="fas fa-quote-left"></i> Cite</a>')
      buttons.append('<a href="' + slug + '.pdf" class="dt-tag"><i class="fas fa-file-pdf"></i> PDF</a>')
      
      // Conditionally add supplementary files button
      if (document.getElementById('supplementary-materials')) {
        // create element safely
        const btn_suppl = document.createElement('a');
        btn_suppl.href = slug + '.zip';
        btn_suppl.className = 'dt-tag';
        btn_suppl.innerHTML = '<i class="fas fa-file-zipper"></i> Supplement';
        buttons.append(btn_suppl);
      }

      // adds Abstract: in front of the first <p> in the title section --
      // unless it happens to be the subtitle (FIXME: this is a bad hack - can't distill do this?)
      var tpar = $("d-title p:not(:empty)").filter(function() {
        return !$(this).hasClass("subtitle");
      }).first();
      if (tpar) {
        const abstract = $('<d-abstract>')
        abstract.append('<b>Abstract:</b><br>')
        abstract.append(tpar) // Move description to d-abstract
        $("d-title p:empty").remove() // Remove empty paragraphs after title
        abstract.append(buttons)
        abstract.insertAfter($('d-title')) // Add abstract section after title */
      }

      // tweak by-line
      var byline = $("d-byline div.byline")
      ind = rmd_meta.attributes.names.value.findIndex((e) => e == "journal")
      const journal = get_meta('journal', rmd_meta)
      const volume = get_meta('volume', rmd_meta)
      const issue = get_meta('issue', rmd_meta)
      const jrtitle = get_meta('title', journal)
      const year = ((jrtitle == "R News") ? 2000 : 2008) + parseInt(volume)
      const firstpage = get_meta('firstpage', journal)
      const lastpage = get_meta('lastpage', journal)
      byline.append('<div class="rjournal grid">')
      $('div.rjournal').append('<h3>Volume</h3>')
      $('div.rjournal').append('<h3>Pages</h3>')
      $('div.rjournal').append('<a class="volume" href="../../issues/'+year+'-'+issue+'">'+volume+'/'+issue+'</a>')
      $('div.rjournal').append('<p class="pages">'+firstpage+' - '+lastpage+'</p>')

      const received_date = new Date(get_meta('date_received', rmd_meta))
      byline.find('h3:contains("Published")').parent().append('<h3>Received</h3><p>'+received_date.toLocaleDateString('en-US', {month: 'short'})+' '+received_date.getDate()+', '+received_date.getFullYear()+'</p>')

    })
  </script>

  <style>
      /*
    .nav-dropdown-content .nav-dropdown-header {
      text-transform: lowercase;
    }
    */

    d-byline .byline {
      grid-template-columns: 2fr 2fr 2fr 2fr;
    }

    d-byline .rjournal {
      grid-column-end: span 2;
      grid-template-columns: 1fr 1fr;
      margin-bottom: 0;
    }

    d-title h1, d-title p, d-title figure,
    d-abstract p, d-abstract b {
      grid-column: page;
    }

    d-title .dt-tags {
      grid-column: page;
    }

    .dt-tags .dt-tag {
      text-transform: lowercase;
    }

    d-article h1 {
      line-height: 1.1em;
    }

    d-abstract p, d-article p {
      text-align: justify;
    }

    @media(min-width: 1000px) {
      .d-contents.d-contents-float {
        justify-self: end;
      }

      nav.toc {
        border-right: 1px solid rgba(0, 0, 0, 0.1);
        border-right-width: 1px;
        border-right-style: solid;
        border-right-color: rgba(0, 0, 0, 0.1);
      }
    }

    .posts-list .dt-tags .dt-tag {
      text-transform: lowercase;
    }

    @keyframes highlight-target {
      0% {
        background-color: #ffa;
      }
      66% {
        background-color: #ffa;
      }
      100% {
        background-color: none;
      }
    }

    d-article :target, d-appendix :target {
       animation: highlight-target 3s;
    }

    .header-section-number {
      margin-right: 0.5em;
    }
    
    d-appendix .citation-appendix,
    .d-appendix .citation-appendix {
      color: rgb(60, 60, 60);
    }

    d-article h2 {
      border-bottom: 0px solid rgba(0, 0, 0, 0.1);
      padding-bottom: 0rem;
    }
    d-article h3 {
      font-size: 20px;
    }
    d-article h4 {
      font-size: 18px;
      text-transform: none;
    }

    @media (min-width: 1024px) {
      d-article h2 {
        font-size: 32px;
      }
      d-article h3 {
        font-size: 24px;
      }
      d-article h4 {
        font-size: 20px;
      }
    }
  </style>


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"qCBA: An R Package for Postoptimization of Rule Models Learnt on Quantized Data","description":"A popular approach to building rule models is association rule\nclassification. However, these often produce larger models than most\nother rule learners, impeding the comprehensibility of the created\nclassifiers. Also, these algorithms decouple discretization from model\nlearning, often leading to a loss of predictive performance. This\npackage presents an implementation of Quantitative Classification\nbased on Associations (QCBA), which is a collection of postprocessing\nalgorithms for rule models built over discretized data. The QCBA\nmethod improves the fit of the bins originally produced by\ndiscretization and performs additional pruning, resulting in models\nthat are typically smaller and often more accurate. The qCBA package\nsupports models created with multiple packages for rule-based\nclassification available in CRAN, including arc, arulesCBA, rCBA and\nsbrl.","doi":"10.32614/RJ-2025-038","authors":[{"author":"Tomas Kliegr","authorURL":"#","affiliation":"Prague University of Economics and Business","affiliationURL":"#","orcidID":""}],"publishedDate":"2026-02-03T00:00:00.000+00:00","citationText":"Kliegr, 2026"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="../../index.html">
<img src="../../resources/rlogo.png" alt="Logo"/>
</a>
<a href="../../index.html" class="title">The R Journal</a>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../issues/2025-4">Current</a>
<a href="../../issues.html">Issues</a>
<a href="../../news.html">News</a>
<a href="../../submissions.html">Submit</a>
<a href="../../contribute.html">Contribute</a>
<a href="../../editors.html">Editorial board</a>
<a href="../../articles.xml">
<i class="fa fa-rss" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>qCBA: An R Package for Postoptimization of Rule Models Learnt on Quantized Data</h1>

<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>A popular approach to building rule models is association rule
classification. However, these often produce larger models than most
other rule learners, impeding the comprehensibility of the created
classifiers. Also, these algorithms decouple discretization from model
learning, often leading to a loss of predictive performance. This
package presents an implementation of Quantitative Classification
based on Associations (QCBA), which is a collection of postprocessing
algorithms for rule models built over discretized data. The QCBA
method improves the fit of the bins originally produced by
discretization and performs additional pruning, resulting in models
that are typically smaller and often more accurate. The qCBA package
supports models created with multiple packages for rule-based
classification available in CRAN, including arc, arulesCBA, rCBA and
sbrl.</p></p>
</div>

<div class="d-byline">
  Tomas Kliegr  (Prague University of Economics and Business)
  
<br/>2026-02-03
</div>

<div class="d-article">
<div class="article">
<h3 data-number="1" id="sec:introduction"><span class="header-section-number">1</span> Introduction</h3>
<p>There is a resurgence of interest in interpretable machine learning
models, with rule learning providing an appealing combination of
intrinsic comprehensibility, as humans are naturally used to working
with rules, with well-documented predictive performance and scalability.
Association rule classification (ARC) is a subclass of rule-learning
algorithms that can quickly generate a large number of candidate rules,
a subset of which is subsequently chosen for the final classifier. The
first, and with at least three packages <span class="citation" data-cites="hahsler2019associative">(<a href="#ref-hahsler2019associative" role="doc-biblioref">Hahsler et al. 2019</a>)</span>, the
most popular such algorithm was Classification Based on Associations
(CBA) <span class="citation" data-cites="Liu98integratingclassification">(<a href="#ref-Liu98integratingclassification" role="doc-biblioref">Liu et al. 1998</a>)</span>. There are also multiple newer
approaches, such as SBRL <span class="citation" data-cites="yang2017scalable">(<a href="#ref-yang2017scalable" role="doc-biblioref">Yang et al. 2017</a>)</span> or RCAR <span class="citation" data-cites="azmi2020rcar">(<a href="#ref-azmi2020rcar" role="doc-biblioref">Azmi and Berrado 2020</a>)</span>,
both available in R <span class="citation" data-cites="sbrl arulesCBA">(<a href="#ref-arulesCBA" role="doc-biblioref">Michael Hahsler 2024</a>; <a href="#ref-sbrl" role="doc-biblioref">Yang et al. 2024</a>)</span>.</p>
<p>A major limitation of ARC approaches is that they typically trade off
the ability to process numerical data for the speed of generation. On
the input, these approaches require categorical data. If there are
numerical attributes, these need to be converted to categories,
typically through some discretization (quantization) approach, such as
MDLP <span class="citation" data-cites="FayyadI93">(<a href="#ref-FayyadI93" role="doc-biblioref">Fayyad and Irani 1993</a>)</span>. Association rule learning then operates on
prediscretized datasets, which results in the loss of predictive
performance and larger rule sets.</p>
<p>The Quantitative Classification Based on Associations method (QCBA)
<span class="citation" data-cites="kliegr2023qcba">(<a href="#ref-kliegr2023qcba" role="doc-biblioref">Kliegr and Izquierdo 2023</a>)</span> is a collection of several algorithms that
postoptimize rule-based classifiers learnt on prediscretized data with
respect to the original raw dataset with numerical attributes. As was
experimentally shown in <span class="citation" data-cites="kliegr2023qcba">Kliegr and Izquierdo (<a href="#ref-kliegr2023qcba" role="doc-biblioref">2023</a>)</span>, this makes the models often
more accurate and consistently smaller and thus more interpretable.</p>
<p>This paper presents the
<a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a> R package, which
implements QCBA and is available on CRAN. The
<a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a> R package was
initially developed to postprocess results of CBA implementations, as
these were the most common rule learning systems in R, but it can now
also handle results of other rule learning approaches such as SBRL. The
three CBA implementations in CRAN –
<a href="https://CRAN.R-project.org/package=rCBA"><strong>rCBA</strong></a> <span class="citation" data-cites="rcba">(<a href="#ref-rcba" role="doc-biblioref">Kuchař and Kliegr 2019</a>)</span>,
<a href="https://CRAN.R-project.org/package=arc"><strong>arc</strong></a> <span class="citation" data-cites="arcPackage">(<a href="#ref-arcPackage" role="doc-biblioref">Kliegr 2016</a>)</span> and
<a href="https://CRAN.R-project.org/package=arulesCBA"><strong>arulesCBA</strong></a>
<span class="citation" data-cites="arulesCBA">(<a href="#ref-arulesCBA" role="doc-biblioref">Michael Hahsler 2024</a>)</span> introduced in <span class="citation" data-cites="hahsler2019associative">Hahsler et al. (<a href="#ref-hahsler2019associative" role="doc-biblioref">2019</a>)</span> rely on the fast and
proven <a href="https://CRAN.R-project.org/package=arules"><strong>arules</strong></a> package
<span class="citation" data-cites="hahsler2011arules">(<a href="#ref-hahsler2011arules" role="doc-biblioref">Hahsler et al. 2011</a>)</span> to mine association rules, which is also the main
dependency of the <a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a> R
package.</p>
<h3 data-number="2" id="sec:primer"><span class="header-section-number">2</span> Primer on building rule-based classifiers for QCBA in R</h3>
<p>This primer will show how to use QCBA with CBA as the base rule learner.
Out of the rule learners supported by QCBA, CBA is the most widely
supported in CRAN and also scientifically most cited (as of writing).
This primer is standalone and intends to show the main concepts through
code-based examples. However, it uses the same dataset and setting as
the going example in the open-access publication <span class="citation" data-cites="kliegr2023qcba">(<a href="#ref-kliegr2023qcba" role="doc-biblioref">Kliegr and Izquierdo 2023</a>)</span>,
which contains graphical illustrations as well as formal definitions of
the algorithms (as opposed to R-code examples here).</p>
<h4 class="unnumbered" data-number="2.1" id="brief-introduction-to-association-rule-classification">Brief introduction to association rule classification</h4>
<p>Before we present the details of the QCBA algorithm, we start by
covering the foundational methods of association rule learning and
classification.</p>
<p><strong>Input data</strong> Association rules are historically mined on
<em>transactions</em>, which is also the format used by the most commonly used
R package <a href="https://CRAN.R-project.org/package=arules"><strong>arules</strong></a>. A
standard data table (data frame) can be converted to a transaction
matrix. This can be viewed as a binary incidence matrix, with one dummy
variable for each attribute-value pair (called an <em>item</em>). In the case
of numerical variables, discretization (quantization) is a standard
preprocessing step. It is required to ensure that the search for rules
is fast and the conditions in the discovered rules are sufficiently
broad.</p>
<p><strong>Association rules</strong> Algorithms such as Apriori <span class="citation" data-cites="agrawal94fast">(<a href="#ref-agrawal94fast" role="doc-biblioref">Agrawal and Srikant 1994</a>)</span> are
used for association rule mining. An association rule has the form
<span class="math inline">\(r: antecedent \rightarrow consequent\)</span>, where both <span class="math inline">\(antecedent\)</span> and
<span class="math inline">\(consequent\)</span> are sets of items. The
<a href="https://CRAN.R-project.org/package=arules"><strong>arules</strong></a> package, which
is the most popular Apriori implementation in CRAN, calls the antecedent
the left-hand side of the rule (<span class="math inline">\(lhs\)</span>) and the consequent the right-hand
side (<span class="math inline">\(rhs\)</span>). Each set is interpreted as a conjunction of conditions
corresponding to individual items. When all these conditions are met,
then the rule predicts that its consequent is true for a given input
data point. Formally, we say that a rule <em>covers</em> a transaction if all
items in the rule’s antecedent are contained in the transaction. A rule
<em>correctly classifies</em> the transaction if the transaction is covered
and, at the same time, the items in the rule consequent are contained in
the transaction.</p>
<p><strong>Rule interest measures</strong> Each rule is associated with some quality
metrics (also called rule interest measures). The two most important
ones are the confidence and support of rule <span class="math inline">\(r\)</span>. Confidence is
calculated as <span class="math inline">\(conf(r)=a/(a+b)\)</span>, where <span class="math inline">\(a\)</span> is the number of transactions
matching both the antecedent and consequent and <span class="math inline">\(b\)</span> is the number of
transactions matching the antecedent but not the consequent. Support is
calculated either as <span class="math inline">\(a\)</span> (absolute support) or <span class="math inline">\(a\)</span> divided by the total
number of transactions (relative support). In the association rule
generation step, confidence and support are used as constraints in
association rule learning. Another important constraint to prevent a
combinatorial explosion is a restriction on the length of the rule
(<code>minLen</code> and <code>maxLen</code> parameters in
<a href="https://CRAN.R-project.org/package=arules"><strong>arules</strong></a>), defined as the
threshold on the minimum and maximum count of items in the rule
antecedent and consequent.</p>
<p><strong>Association Rule Classification models</strong> ARC algorithms process
candidate association rules into a classifier. An input to the ARC
algorithm is a set of pre-mined <em>class association rules</em> (CARs). A
class association rule is an association rule that contains exactly one
item corresponding to one of the target classes in the consequent. The
classifier-building process typically amounts to a selection of a subset
of CARs <span class="citation" data-cites="arcReview">(<a href="#ref-arcReview" role="doc-biblioref">Vanhoof and Depaire 2010</a>)</span>. Some ARC algorithms, such as CBA, use rule
interest measures for this: rules are first ordered and then some of
them are removed using <em>data coverage pruning</em> and <em>default rule
pruning</em> (step 2 and step 3 of the CBA-CB algorithm as described in
<span class="citation" data-cites="Liu98integratingclassification">Liu et al. (<a href="#ref-Liu98integratingclassification" role="doc-biblioref">1998</a>)</span>. Some ARC algorithms also include a rule
with an empty antecedent (called <em>default rule</em>) at the end of the rule
list to ensure that the classifier can always provide a prediction even
if there is no specific rule matching that particular transaction.</p>
<p><strong>Types of ARC models</strong> CBA produces <em>rule lists</em>: the rule with the
highest priority in the pruned rule list is used for classification.
Other recent algorithms producing rule lists include SBRL <span class="citation" data-cites="sbrl">(<a href="#ref-sbrl" role="doc-biblioref">Yang et al. 2024</a>)</span>. The
other common ARC approach is based on <em>rule sets</em>, where rules are not
ordered, and multiple rules can be used for classification, e.g.,
through voting. This second group includes algorithms such as CMAR
<span class="citation" data-cites="cmar">(<a href="#ref-cmar" role="doc-biblioref">Li et al. 2001</a>)</span> or CPAR <span class="citation" data-cites="yin2003cpar">(<a href="#ref-yin2003cpar" role="doc-biblioref">Yin and Han 2003</a>)</span>.</p>
<p><strong>Postprocessing with Quantitative CBA</strong> QCBA is a postprocessing
algorithm for ARC models built over quantized data. On the input, it can
take both rule lists or rule sets. However, it always outputs a rule
list. While association rule learning often faces issues with a
combinatorial explosion <span class="citation" data-cites="kliegr2019tuning">(<a href="#ref-kliegr2019tuning" role="doc-biblioref">Kliegr and Kuchar 2019</a>)</span>, the postprocessing by QCBA
is performed on a relatively small number of rules that passed the
pruning steps within the specific ARC algorithm. QCBA is a modular
approach with six steps that can be performed independently of each
other. The only exception is the initial refit tuning step, which
processes all items in a given rule that are the result of quantization.
QCBA adjusts the item boundaries so that they correspond to actual
values appearing in the original training data before discretization.
Benchmarks in <span class="citation" data-cites="kliegr2023qcba">Kliegr and Izquierdo (<a href="#ref-kliegr2023qcba" role="doc-biblioref">2023</a>)</span> have shown that, on average, the
postprocessing with QCBA took a similar time as building the input CBA
model. The most expensive step can be extension, with its complexity
depending on the number of unique numerical values.</p>
<p><strong>Comparison with decision tree induction</strong> A common question is the
relationship between association rule classifiers and decision trees.
Trees can be decomposed into rules that are similar to association
rules, as each path from the root to the leaf corresponds to one rule.
However, individual trees in algorithms such as C4.5 <span class="citation" data-cites="quinlan2014c4">(<a href="#ref-quinlan2014c4" role="doc-biblioref">Quinlan 1993</a>)</span>
are built in such a way that the resulting rules are non-overlapping,
while association rule learning outputs overlapping rules. Algorithms
such as Apriori will output all rules that are valid in the data, given
the user-specified thresholds. In contrast, decision tree induction
algorithms use a heuristic, such as information gain, which results in a
large number of otherwise valid patterns being skipped as rules
prioritize splits that maximize the chosen heuristic.</p>
<h4 class="unnumbered" data-number="2.2" id="sec:example">Example</h4>
<h5 class="unnumbered" data-number="2.2.1" id="dataset">Dataset</h5>
<p>Let’s look at the <code>humtemp</code> synthetic data set, which we will be using
throughout this tutorial and is bundled with the
<a href="https://CRAN.R-project.org/package=arcPackage"><strong>arcPackage</strong></a>. There
are two quantitative explanatory attributes (Temperature and Humidity).
The target attribute is preference (subjective comfort level).</p>
<p>The first six rows of <code>humtemp</code> obtained with <code>head(humtemp)</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">##   Temperature Humidity Class</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1          45       33     2</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 2          27       29     3</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 3          40       48     2</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 4          40       65     1</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 5          38       82     1</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 6          37       30     3</span></span></code></pre></div>
<h5 class="unnumbered" data-number="2.2.2" id="sec:quantiz">Quantization</h5>
<p>The essence of QCBA is the optimization of literals (conditions) created
over numerical attributes in rules. QCBA thus needs to translate back
the bins created during the discretization to the continuous space.</p>
<p>For clarity, we will perform the quantization manually using equidistant
binning and user-defined cut points. An alternative approach using
automatic supervised discretization is shown in
Section <a href="#sec:demo" data-reference-type="ref" data-reference="sec:demo">4</a>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(qCBA)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>temp_breaks <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">15</span>, <span class="at">to =</span> <span class="dv">45</span>, <span class="at">by =</span> <span class="dv">5</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Another possibility with user-defined cutpoints</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>hum_breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">100</span>) </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>data_discr <span class="ot">&lt;-</span> arc<span class="sc">::</span><span class="fu">applyCuts</span>(</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> humtemp,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">cutp =</span> <span class="fu">list</span>(temp_breaks, hum_breaks, <span class="cn">NULL</span>),</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">infinite_bounds =</span> <span class="cn">TRUE</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="cn">TRUE</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data_discr)</span></code></pre></div>
<p>The result of quantization is:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">##   Temperature Humidity Class</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1     (40;45]   (0;40]     2</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 2     (25;30]   (0;40]     3</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 3     (35;40]  (40;60]     2</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 4     (35;40]  (60;80]     1</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 5     (35;40] (80;100]     1</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 6     (35;40]   (0;40]     3</span></span></code></pre></div>
<p>The purpose of the <code>applyCuts()</code> function is to ensure that within
intervals, a semicolon is used as a separator instead of the more common
comma. A semicolon is used as the standard interval separator in some
countries, such as Czechia. However, the main reason is that a comma is
already used within rules for another purpose – to separate conditions.
The use of a different separator fosters unambiguity, for example, in
situations when a rule set aimed to be optimized is read from a file.</p>
<h5 class="unnumbered" data-number="2.2.3" id="discovery-of-candidate-class-association-rules">Discovery of candidate class association rules</h5>
<p>ARC algorithms typically first generate a large number of association
rules or frequent itemsets. Typically, this step is handled internally
by the ARC library (as shown in Section <a href="#%7Bsec:demo%7D">Demonstration of individual
QCBA optimization steps</a>).</p>
<p>For better clarity, in the example below, the list of CARs is generated
by manually invoking the apriori algorithm.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>txns <span class="ot">&lt;-</span> <span class="fu">as</span>(data_discr, <span class="st">&quot;transactions&quot;</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>appearance <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">rhs =</span> <span class="fu">c</span>(<span class="st">&quot;Class=1&quot;</span>, <span class="st">&quot;Class=2&quot;</span>, <span class="st">&quot;Class=3&quot;</span>, <span class="st">&quot;Class=4&quot;</span>))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>rules <span class="ot">&lt;-</span> arules<span class="sc">::</span><span class="fu">apriori</span>(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> txns,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">parameter =</span> <span class="fu">list</span>(</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">confidence =</span> <span class="fl">0.5</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">support =</span> <span class="dv">3</span> <span class="sc">/</span> <span class="fu">nrow</span>(data_discr),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">minlen =</span> <span class="dv">1</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">maxlen =</span> <span class="dv">3</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">appearance =</span> appearance</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The first line converts the input data into <em>items</em>, attribute-value
pairs such as <code>Temperature=(40;45]</code> or <code>Class=3</code>. The <code>appearance</code>
defines which items can appear in the consequent of the rules
(right-hand side, <em>rhs</em>). This data format is required for association
rule learning. On the second line, there are several standard additional
parameters typically used for the extraction of association rules. The
confidence threshold of 0.5 and support of 1% is recommended
<span class="citation" data-cites="Liu98integratingclassification">(<a href="#ref-Liu98integratingclassification" role="doc-biblioref">Liu et al. 1998</a>)</span>. However, since the <code>humtemp</code> dataset
has fewer than 100 rows, the support threshold would correspond to the
support of just 1 transaction, which would miss the purpose of this
threshold to address overfitting by eliminating rules that are backed by
only a small number of instances. We, therefore, set the minimum support
threshold to 3 transactions (expressed as a percentage in the code
snippet). The <code>minlen</code> and <code>maxlen</code> express that rules must contain at
most two items in the condition part (antecedent).</p>
<p>The discovered rules, shown with <code>inspect(rules)</code>, are shown below:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>lhs                                        rhs       support    confidence coverage  lift     <span class="co">#</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>{Humidity<span class="ot">=</span>(<span class="dv">80</span>;<span class="dv">100</span>]<span class="er">}</span>                     <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">1</span>} <span class="fl">0.11111111</span> <span class="fl">0.8000000</span>  <span class="fl">0.1388889</span> <span class="fl">3.600000</span> <span class="dv">4</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>{Temperature<span class="ot">=</span>(<span class="dv">15</span>;<span class="dv">20</span>]<span class="er">}</span>                   <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">2</span>} <span class="fl">0.11111111</span> <span class="fl">0.5714286</span>  <span class="fl">0.1944444</span> <span class="fl">2.057143</span> <span class="dv">4</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>{Temperature<span class="ot">=</span>(<span class="dv">30</span>;<span class="dv">35</span>]<span class="er">}</span>                   <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">4</span>} <span class="fl">0.13888889</span> <span class="fl">0.6250000</span>  <span class="fl">0.2222222</span> <span class="fl">2.045455</span> <span class="dv">5</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>{Temperature<span class="ot">=</span>(<span class="dv">25</span>;<span class="dv">30</span>]<span class="er">}</span>                   <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">4</span>} <span class="fl">0.13888889</span> <span class="fl">0.5000000</span>  <span class="fl">0.2777778</span> <span class="fl">1.636364</span> <span class="dv">5</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>{Temperature<span class="ot">=</span>(<span class="dv">25</span>;<span class="dv">30</span>], <span class="at">Humidity=</span>(<span class="dv">40</span>;<span class="dv">60</span>]<span class="er">}</span> <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">4</span>} <span class="fl">0.08333333</span> <span class="fl">0.6000000</span>  <span class="fl">0.1388889</span> <span class="fl">1.963636</span> <span class="dv">3</span></span></code></pre></div>
<p>In this listing, coverage and lift, as defined in the <span class="citation" data-cites="arules">Hahsler et al. (<a href="#ref-arules" role="doc-biblioref">2007</a>)</span>
documentation, are additional rule quality measures not used by the
<a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a> package. Count
(abbreviated with # in the listing) corresponds to the support of the
rule represented as an integer value rather than a proportion.</p>
<h5 class="unnumbered" data-number="2.2.4" id="learn-classifier-from-candidate-cars">Learn classifier from candidate CARs</h5>
<p>Out of the five discovered rules, we create a CBA classifier. The
following lists the conceptual steps performed by CBA to transform the
input rule list into a CBA model:</p>
<ol type="1">
<li><p>Rule <em>precedence</em> is established: rules are sorted according to
confidence, support and length.</p></li>
<li><p>Rules are subject to <em>pruning</em></p>
<ul>
<li><p><em>data coverage pruning</em>: the algorithm iterates through the
rules in the order of precedence removing any rule which does
not correctly classify at least one instance. If the rule
correctly classifies at least one instance, it is retained and
the instances removed (only for the purpose of subsequent steps
of data coverage pruning).</p></li>
<li><p><em>default rule pruning</em>: the algorithm iterates through the rules
in the sort order, and cuts off the list once keeping the
current rule would result in worse accuracy of the model than if
a default rule was inserted at the place of the current rule and
the rules below it were removed.</p></li>
</ul></li>
<li><p><em>Default rule</em> is inserted at the bottom of the list.</p></li>
</ol>
<p>To supply our own list of candidate rules instead of using one generated
with <code>cba()</code>, we will call:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>classAtt <span class="ot">&lt;-</span> <span class="st">&quot;Class&quot;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>rmCBA <span class="ot">&lt;-</span> <span class="fu">cba_manual</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">datadf_raw =</span> humtemp,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">rules =</span> rules,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">txns =</span> txns,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">rhs =</span> appearance<span class="sc">$</span>rhs,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">classAtt =</span> classAtt,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">cutp =</span> <span class="fu">list</span>()</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(rmCBA<span class="sc">@</span>rules)</span></code></pre></div>
<p>The reason why we invoke <code>cba_manual()</code> from the <code>arc</code> package is that
<code>cba_manual()</code> instead of <code>cba()</code> allows us to supply a custom list of
rules from which the CBA model will be built. This function would also
do the quantization, but since we already did this as part of the
preprocessing, we use <code>cutp = list()</code> to express that no cutpoints are
specified.</p>
<p>In this toy example, the CBA model, which could be displayed through the
function call <code>inspect(rmCBA@rules)</code>, is almost identical to the
candidate list of rules shown above. The main difference is the
reordering of rules by confidence and support (higher is better) and the
addition of the <em>default rule</em> – a rule with an empty antecedent to the
end. Note that for brevity, the conditions in the rules in the printout
below were replaced by {...} as they are the same as in the printout on
the previous page (although mind the different order of rules). The
values of support, confidence, coverage and lift are also the same and
were omitted.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>lhs       rhs        {...}  count lhs_length orderedConf orderedSupp cumulativeConf</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] {...} <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">1</span>}   {...}  <span class="dv">4</span>     <span class="dv">1</span>          <span class="fl">0.8000000</span>   <span class="dv">4</span>           <span class="fl">0.8000000</span>         </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>] {...} <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">4</span>}   {...}  <span class="dv">5</span>     <span class="dv">1</span>          <span class="fl">0.7142857</span>   <span class="dv">5</span>           <span class="fl">0.7500000</span>        </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>] {...} <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">4</span>}   {...}  <span class="dv">3</span>     <span class="dv">2</span>          <span class="fl">0.6000000</span>   <span class="dv">3</span>           <span class="fl">0.7058824</span>          </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>] {...} <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">2</span>}   {...}  <span class="dv">4</span>     <span class="dv">1</span>          <span class="fl">0.5000000</span>   <span class="dv">3</span>           <span class="fl">0.6521739</span>        </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] {...} <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">4</span>}   {...}  <span class="dv">5</span>     <span class="dv">1</span>          <span class="fl">0.5000000</span>   <span class="dv">2</span>           <span class="fl">0.6296296</span>         </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>] {}    <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">2</span>}   {...}  <span class="dv">0</span>     <span class="dv">0</span>          <span class="fl">0.5555556</span>   <span class="dv">5</span>           <span class="fl">0.6111111</span>        </span></code></pre></div>
<p>The default rule ensures that the rule list covers every possible
instance. The rule list is visualized in
Figure <a href="#fig:postpr" data-reference-type="ref" data-reference="fig:postpr">1</a>,
where the green background corresponds to Class 2 predicted by the
default rule. The CBA output contains several additional statistics for
each rule. The <em>ordered</em> versions of confidence and support are computed
only from those training instances reaching the given rule. For the
first rule, the ordered confidence is identical to standard confidence.
The ordered support is also semantically the same but is expressed as an
absolute count rather than a proportion. To compute these values for the
subsequent rules, instances covered by rules higher in the list have
been removed. The cumulative confidence is an experimental measure
described in <a href="https://CRAN.R-project.org/package=arc"><strong>arc</strong></a>
documentation.</p>
<figure id="fig:postpr">
<img src="figures/figure1a.png" style="width:48.0%"
alt="graphic without alt text" />
<img src="figures/figure1b.png" style="width:48.0%"
alt="graphic without alt text" />
<figcaption>
Figure 1: Illustration of postpruning algorithm (HumTemp
dataset). Left: CBA model; right: QCBA model.
</figcaption>
</figure>
<h5 class="unnumbered" data-number="2.2.5" id="applying-the-classifier">Applying the classifier</h5>
<p>The toy example does not contain enough data for a meaningfully large
train/test split. Therefore, we will evaluate the training data. The
accuracy of the CBA model on training data:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>prediction_cba <span class="ot">&lt;-</span> <span class="fu">predict</span>(rmCBA, data_discr)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>acc_cba <span class="ot">&lt;-</span> <span class="fu">CBARuleModelAccuracy</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">prediction =</span> prediction_cba,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">groundtruth =</span> data_discr[[classAtt]]</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The accuracy is 0.61, and the contents of <code>prediction_cba</code> are the
predicted values of comfort:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="dv">2</span> <span class="dv">4</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">1</span> <span class="dv">4</span> <span class="dv">1</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>Levels<span class="sc">:</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">4</span></span></code></pre></div>
<h5 class="unnumbered" data-number="2.2.6" id="explaining-the-prediction">Explaining the prediction</h5>
<p>The <code>predict()</code> function from the
<a href="https://CRAN.R-project.org/package=arc"><strong>arc</strong></a> library allows for
additional output to enhance the explainability of the result. By
setting <code>outputFiringRuleIDs=TRUE</code> we can obtain the ID of a particular
rule that was used to classify each instance in the passed dataset.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>ruleIDs <span class="ot">&lt;-</span> <span class="fu">predict</span>(rmCBA, data_discr, <span class="at">outputFiringRuleIDs =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>For example, we may now explain the classification of the first row of
<code>data_discr</code>, which is, for convenience, reproduced below:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">##   Temperature Humidity Class</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1     (40;45]   (0;40]     2</span></span></code></pre></div>
<p>To do so, we invoke:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(rmCBA<span class="sc">@</span>rules[ruleIDs[<span class="dv">1</span>]])</span></code></pre></div>
<p>This returns the default rule (number 6). The reason is that the values
in this instance are out of bounds of the conditions in all other rules.
Now, we have a rule list ready for postoptimization with QCBA.</p>
<h5 class="unnumbered" data-number="2.2.7" id="postprocessing-with-qcba">Postprocessing with QCBA</h5>
<p>By working with the original continuous data, the QCBA algorithm can
improve the fit of the rules and consequently reduce their count.</p>
<p>We will use the <code>rmCBA</code> model built previously:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>rmqCBA <span class="ot">&lt;-</span> <span class="fu">qcba</span>(<span class="at">cbaRuleModel =</span> rmCBA, <span class="at">datadf =</span> humtemp)</span></code></pre></div>
<p>This ran QCBA with the default set of optimization steps enabled, which
correspond to the best-performing configuration #5 from
<span class="citation" data-cites="kliegr2023qcba">(<a href="#ref-kliegr2023qcba" role="doc-biblioref">Kliegr and Izquierdo 2023</a>)</span>.</p>
<p>The resulting rule list is</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>   rules                                              support    confidence <span class="co"># </span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> {Humidity<span class="ot">=</span>[<span class="dv">82</span>;<span class="dv">95</span>]} <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">1</span>}                     <span class="fl">0.1111111</span>  <span class="fl">0.8000000</span>  <span class="dv">1</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> {Temperature<span class="ot">=</span>[<span class="dv">22</span>;<span class="dv">31</span>],Humidity<span class="ot">=</span>[<span class="dv">33</span>;<span class="dv">53</span>]} <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">4</span>} <span class="fl">0.1666667</span>  <span class="fl">0.7500000</span>  <span class="dv">2</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> {Temperature<span class="ot">=</span>[<span class="dv">31</span>;<span class="dv">34</span>]} <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">4</span>}                  <span class="fl">0.1388889</span>  <span class="fl">0.6250000</span>  <span class="dv">1</span> </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> {} <span class="sc">=&gt;</span> {Class<span class="ot">=</span><span class="dv">2</span>}                                     <span class="fl">0.2777778</span>  <span class="fl">0.2777778</span>  <span class="dv">0</span> </span></code></pre></div>
<p>Note that the ‘condition_count’ column was abbreviated as # in the
listing and the orderedConf and orderedSupp columns were omitted for
brevity.</p>
<p>Figure <a href="#fig:postpr" data-reference-type="ref" data-reference="fig:postpr">1</a>
(right) shows the QCBA model. Compared to the CBA model in
Figure <a href="#fig:postpr" data-reference-type="ref" data-reference="fig:postpr">1</a>
(left), QCBA removed two rules and refined the boundaries of the
remaining rules.</p>
<p>Predictive performance is computed in the same way as for CBA:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>prediction <span class="ot">&lt;-</span> <span class="fu">predict</span>(rmqCBA, humtemp)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>acc <span class="ot">&lt;-</span> <span class="fu">CBARuleModelAccuracy</span>(prediction, humtemp[[rmqCBA<span class="sc">@</span>classAtt]])</span></code></pre></div>
<p>The accuracy is unchanged at 0.61, but we got a smaller model.
Similarly, as with CBA, we could use the argument <em>outputFiringRuleIDs</em>.</p>
<p>Note that the QCBA algorithm does not introduce any mandatory thresholds
or meta-parameters for the user to set or optimize, although it does
allow the user to enable or disable the individual optimizations, as
shown in the next section.</p>
<h3 data-number="3" id="detailed-description-of-package-qcba-with-examples-in-r"><span class="header-section-number">3</span> Detailed description of package <a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a> with examples in R</h3>
<h4 class="unnumbered" data-number="3.1" id="overview-of-qcba-arguments">Overview of <code>qcba()</code> arguments</h4>
<p>To build a model, <code>qcba()</code> needs a set of rules. As a second mandatory
argument, the <code>qcba()</code> function takes the <em>raw</em> data frame. This can
contain nominal as well as numerical columns. The remaining arguments
are optional. The most important ones relating to the optimizations
performed by QCBA are described in the following two subsections.</p>
<p>This rule model can be either the instance of <code>customCBARuleModel</code> or
<code>CBARuleModel</code> class. The difference is that in the <span class="math inline">\(rules\)</span> slot, in the
former class, rules are represented as string objects in a data frame.
This universal data frame format is convenient for loading rules from
other sources or R packages that export rules as strings. The latter
uses an instance of <code>rules</code> class from
<a href="https://CRAN.R-project.org/package=arules"><strong>arules</strong></a>, which is more
efficient, especially when the number of rules or items is larger. An
important slot shared between both classes is <code>cutp</code>, which contains
information on the cutpoints used to quantize the data on which the
rules were learnt.</p>
<h4 class="unnumbered" data-number="3.2" id="optimizations-on-individual-rules">Optimizations on individual rules</h4>
<p>Optimizations can be divided into two groups depending on whether they
are performed on individual rules or on the entire model. We first
describe the first group. Since these operations are independent of the
other rules, they can also be parallelized.</p>
<p><strong>Refitting rules</strong>. This step processes all items derived with
quantization in the antecedent of a given rule. These items have
boundaries that stick to a grid that corresponds to the result of
discretization. The grid used by QCBA corresponds to all unique values
appearing in the training data. <em>This is the only mandatory step.</em></p>
<p><strong>Attribute pruning</strong> (<code>attributePruning</code>). Attribute pruning is a step
in QCBA that evaluates if the items are needed for each rule and item in
its antecedent. The item is removed if a rule created without the item
has at least the confidence of the original rule. <em>Enabled (<code>TRUE</code>) by
default.</em></p>
<p><strong>Trimming</strong> (<code>trim_literal_boundaries</code>). Boundary parts of intervals
into which no instances correctly classified by the rule fall are
removed. <em>Enabled (<code>TRUE</code>) by default.</em></p>
<p><strong>Extension</strong> (<code>extendType</code>). The ranges of intervals in the antecedent
of each rule are attempted to be enlarged. Currently, only extension on
numerical attributes is supported. By default, the extension is accepted
if it does not decrease rule confidence, but this behaviour can be
controlled by setting the <code>minImprovement</code> parameter (default is 0). To
overcome local minima, the extension process can provisionally accept a
drop in confidence in the intermediate result of the extension. How much
the confidence can temporarily decrease for the extension process not to
stop is controlled by <code>minCondImprovement</code>. In the current version, the
extension applies only to numerical attributes (set
<code>extendType="numericOnly"</code> to enable, this is also the default value).
In future versions, other extend types may be added.</p>
<h4 class="unnumbered" data-number="3.3" id="ss:rulelistoptimization">Optimizations on rule list</h4>
<p>The second group of optimizations aims at removing rules, considering
the context of other rules in the list.</p>
<p><strong>Data coverage pruning</strong> (<code>postpruning</code>). The purpose of this step is
to remove rules that were made redundant by the previous QCBA
optimizations. Possible values are <code>none</code>, <code>cba</code> and <code>greedy</code>. The <code>cba</code>
option is identical to CBA’s data coverage pruning: a rule is removed if
it does not correctly classify any transaction in the training data
after all transactions covered by retained rules with higher precedence
were removed. The <code>greedy</code> option is an experimental modification of
data coverage pruning described in the
<a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a> documentation.
<em>Enabled by default</em> (the default value is <code>postpruning=cba</code>).</p>
<p><strong>Default rule overlap pruning</strong> (<code>defaultRuleOverlapPruning</code>). Let
<span class="math inline">\(R_p\)</span> denote the set of rules that classify into the same class as the
default rule <span class="math inline">\(r_d: \{\} \rightarrow cons_1\)</span>. To determine if a pruning
candidate, denoted as <span class="math inline">\(r_p \in R_p: ant \rightarrow cons_1\)</span>, can be
removed, all rules with lower precedence that have a nonempty antecedent
and a different consequent <span class="math inline">\(cons_2\)</span> (<span class="math inline">\(cons_1\neq cons_2\)</span>) are
identified. Let’s denote the set of these rules as <span class="math inline">\(R_c\)</span>. If the
antecedents of all rules in <span class="math inline">\(R_c\)</span> do not cover any of the transactions
covered by <span class="math inline">\(r_p\)</span> in the training data, <span class="math inline">\(r_p\)</span> is removed. The removal of
<span class="math inline">\(r_p\)</span> will not affect the classification of training data, since the
instances originally covered by <span class="math inline">\(r_p: ant \rightarrow cons_1\)</span> will be
classified to the same class by <span class="math inline">\(r_d: \{\} \rightarrow cons_1\)</span>. This is
called the transaction-based version. In the alternative range-based
version, the checks on rules in <span class="math inline">\(R_p\)</span> involve checking the boundaries of
intervals rather than overlap in matched transactions. This parameter
has three possible values: <code>transactionBased</code>, <code>rangeBased</code> and <code>none</code>.
According to analysis and benchmarks in <span class="citation" data-cites="kliegr2023qcba">(<a href="#ref-kliegr2023qcba" role="doc-biblioref">Kliegr and Izquierdo 2023</a>)</span>, the
transaction-based version removes more rules than the range-based
version, although it can sometimes affect predictive performance on
unseen data. <em>Transaction-based pruning is the default.</em></p>
<h4 class="unnumbered" data-number="3.4" id="effects-on-classification-performance-and-model-size">Effects on classification performance and model size</h4>
<p>An overview of observed properties of the QCBA steps is present in
Table <a href="#tab:T1" data-reference-type="ref" data-reference="tbl:guarantees">1</a>. The
entries denote the effect of applying the algorithm specified in the
first column on the input rule list: <span class="math inline">\(\geq\)</span> denotes that the value of
the given metric will increase or will not change, = the value will not
change, <span class="math inline">\(\leq\)</span> decrease or will not change, <span class="math inline">\(na\)</span> can increase, decrease
or will not change. For example, applying the refit algorithm on a rule
can have the following effects according to the table: the density of
the rule will improve or remain the same: the (+) symbol in the table
denotes that an increase in that value is considered a favourable
property, and (-) as negative. Rule confidence (<em>conf</em>), rule support
(<em>supp</em>), rule length (<em>length</em>) will remain unaffected. Considering the
entire rule list, the refit operation will not affect the rule count or
accuracy on training data (<span class="math inline">\(acc_{train}\)</span>). However, the accuracy on
unseen data (<span class="math inline">\(acc_{test}\)</span>) may change.</p>
<div class="center">
<div id="tbl:guarantees">
<table style="width:98%;">
<caption><span id="tab:T1">Table 1: </span> Hypothesized properties of the proposed rule tuning
algorithms. <em>drop</em> denotes default rule pruning (<em>trans.</em>
transaction-based; <em>range</em> range-based). * the number of rules is not
directly reduced, but literal pruning can make a rule redundant
(identical to another rule). The value <em>na</em> expresses that there is no
unanimous effect of the preprocessing algorithm on the quality
measure.</caption>
<colgroup>
<col style="width: 15%" />
<col style="width: 22%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 13%" />
<col style="width: 12%" />
<col style="width: 12%" />
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;">algorithm</td>
<td style="text-align: left;">rule (local classifier)</td>
<td></td>
<td></td>
<td style="text-align: left;">rule list</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: left;">dataset</td>
<td style="text-align: left;">conf</td>
<td>supp</td>
<td>length</td>
<td style="text-align: left;"><span class="math inline">\(acc_{train}\)</span></td>
<td><span class="math inline">\(acc_{test}\)</span></td>
<td>rule count</td>
</tr>
<tr class="odd">
<td style="text-align: left;">refit</td>
<td style="text-align: left;">=</td>
<td>=</td>
<td>=</td>
<td style="text-align: left;">=</td>
<td><span class="math inline">\(na\)</span></td>
<td>=</td>
</tr>
<tr class="even">
<td style="text-align: left;">literal pruning</td>
<td style="text-align: left;"><span class="math inline">\(\geq\)</span></td>
<td><span class="math inline">\(\geq (+)\)</span></td>
<td><span class="math inline">\(\leq (+)\)</span></td>
<td style="text-align: left;"><span class="math inline">\(na\)</span></td>
<td><span class="math inline">\(na\)</span></td>
<td><span class="math inline">\(\leq\)</span>* (+)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">trimming</td>
<td style="text-align: left;"><span class="math inline">\(\geq (+)\)</span></td>
<td>=</td>
<td>=</td>
<td style="text-align: left;"><span class="math inline">\(\geq (+)\)</span></td>
<td><span class="math inline">\(na\)</span></td>
<td>=</td>
</tr>
<tr class="even">
<td style="text-align: left;">extension</td>
<td style="text-align: left;"><span class="math inline">\(\geq (+)\)</span></td>
<td><span class="math inline">\(\geq (+)\)</span></td>
<td>=</td>
<td style="text-align: left;"><span class="math inline">\(na\)</span></td>
<td><span class="math inline">\(na\)</span></td>
<td>=</td>
</tr>
<tr class="odd">
<td style="text-align: left;">postpruning</td>
<td style="text-align: left;">na</td>
<td>na</td>
<td>na</td>
<td style="text-align: left;"><span class="math inline">\(\geq\)</span></td>
<td><span class="math inline">\(na\)</span></td>
<td><span class="math inline">\(\leq\)</span> (+)</td>
</tr>
<tr class="even">
<td style="text-align: left;">drop - trans.</td>
<td style="text-align: left;">na</td>
<td>na</td>
<td>na</td>
<td style="text-align: left;">=</td>
<td><span class="math inline">\(na\)</span></td>
<td><span class="math inline">\(\leq\)</span> (+)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">drop - range</td>
<td style="text-align: left;">na</td>
<td>na</td>
<td>na</td>
<td style="text-align: left;">=</td>
<td>=</td>
<td><span class="math inline">\(\leq\)</span> (+)</td>
</tr>
</tbody>
</table>
</div>
</div>
<h4 class="unnumbered" data-number="3.5" id="handling-missing-data">Handling missing data</h4>
<p>Association rule learning approaches are resilient to the presence of
missing data in the input data frame. The reason is that rows are viewed
as transactions and combinations of column names and their values as
items. A missing value (<code>NA</code>) in a given column is then interpreted as
an item not present in a given transaction and skipped when a data frame
is converted to the <code>transactions</code> data structure from the
<a href="https://CRAN.R-project.org/package=arules"><strong>arules</strong></a> using the <code>as()</code>
function, which will result in NA values not being present in learnt
rules. Note that <code>qcba()</code> treats an empty string in the input dataframe
in the same way as the <code>NA</code> value along with a dataframe containing <code>NA</code>
values: the <code>NA</code> value is first converted to an empty string,
represented using <code>.jarray()</code> from
<a href="https://CRAN.R-project.org/package=rJava"><strong>rJava</strong></a> and then passed to
the Java-based core of
<a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a>, where it is treated
as a <code>Float.NaN</code> value and also generally skipped.</p>
<h4 class="unnumbered" data-number="3.6" id="ss:costs">Computational costs for large datasets</h4>
<p>The individual postprocessing operations have distinct computational
costs. These depend on several main factors: the number of rows and
columns of the input data, the number of unique numerical values, and
the number of input rules. A detailed experimental study of the
influence of these factors is presented in <span class="citation" data-cites="kliegr2023qcba">Kliegr and Izquierdo (<a href="#ref-kliegr2023qcba" role="doc-biblioref">2023</a>)</span>. This was
performed on subsets of the KDD’99 Anomaly Detection dataset, with the
maximum dataset size being processed using all QCBA optimizations,
reaching about 40,000 rows and about the same number of unique numerical
values. The results show that the most computationally intensive step is
the extension step. For large datasets, the user may, therefore,
consider disabling it or tuning its <code>minCI</code> parameter, which can
influence the runtime. An important factor is also the number of input
rules for optimization. This is often related to the chosen base
learning algorithm. For example, CPAR tends to produce a large number of
rules while SBRL will output condensed rule models. For details, please
refer to <span class="citation" data-cites="kliegr2023qcba">Kliegr and Izquierdo (<a href="#ref-kliegr2023qcba" role="doc-biblioref">2023</a>)</span>.</p>
<h3 data-number="4" id="sec:demo"><span class="header-section-number">4</span> Demonstration of individual QCBA optimization steps</h3>
<p>Compared to the example in Subsection <a href="#%7Bsec:example%7D">Example</a>, this
part will use the larger iris dataset, which allows for the
demonstration of all QCBA steps. To show QCBA with a different base rule
learner than CBA from the
<a href="https://CRAN.R-project.org/package=arc"><strong>arc</strong></a> package used in the
previous section, we will use CPAR from the
<a href="https://CRAN.R-project.org/package=arulesCBA"><strong>arulesCBA</strong></a> package.</p>
<h4 class="unnumbered" data-number="4.1" id="ss:data">Data</h4>
<p>We use the <code>iris</code> dataset from the
<a href="https://CRAN.R-project.org/package=datasets"><strong>datasets</strong></a> R package.
The dataset was shuffled and randomly split into a train set (100 rows)
and a test set (50 rows). The data was then automatically discretized
using the MDLP algorithm wrapped by <code>arc::discrNumeric()</code> and originally
available from the R
<a href="https://CRAN.R-project.org/package=discretization"><strong>discretization</strong></a>
library.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arulesCBA)  <span class="co">#version 1.2.7</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12</span>) <span class="co"># Chosen for demonstration purposes</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>allDataShuffled <span class="ot">&lt;-</span> datasets<span class="sc">::</span>iris[<span class="fu">sample</span>(<span class="fu">nrow</span>(datasets<span class="sc">::</span>iris)), ]</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>trainFold <span class="ot">&lt;-</span> allDataShuffled[<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>, ]</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>testFold <span class="ot">&lt;-</span> allDataShuffled[<span class="dv">101</span><span class="sc">:</span><span class="fu">nrow</span>(datasets<span class="sc">::</span>iris), ]</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>classAtt <span class="ot">&lt;-</span> <span class="st">&quot;Species&quot;</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>discrModel <span class="ot">&lt;-</span> <span class="fu">discrNumeric</span>(<span class="at">df =</span> trainFold, <span class="at">classAtt =</span> classAtt)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>train_disc <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">lapply</span>(discrModel<span class="sc">$</span>Disc.data, as.factor))</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>cutPoints <span class="ot">&lt;-</span> discrModel<span class="sc">$</span>cutp</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>test_disc <span class="ot">&lt;-</span> <span class="fu">applyCuts</span>(</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  testFold,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  cutPoints,</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">infinite_bounds =</span> <span class="cn">TRUE</span>,</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="cn">TRUE</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>y_true <span class="ot">&lt;-</span> testFold[[classAtt]]</span></code></pre></div>
<h4 class="unnumbered" data-number="4.2" id="learn-base-arc-model-with-cpar">Learn base ARC model with CPAR</h4>
<p>In the following, we learn an ARC model using the CPAR (Classification
based on Predictive Association Rules) algorithm using its default
settings.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>rmBASE <span class="ot">&lt;-</span> <span class="fu">CPAR</span>(train_disc, <span class="at">formula =</span> <span class="fu">as.formula</span>(<span class="fu">paste</span>(classAtt, <span class="st">&quot;~ .&quot;</span>)))</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>predictionBASE <span class="ot">&lt;-</span> <span class="fu">predict</span>(rmBASE, test_disc)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(rmBASE<span class="sc">$</span>rules)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Number of rules: &quot;</span>, <span class="fu">length</span>(rmBASE<span class="sc">$</span>rules))</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Total conditions: &quot;</span>, <span class="fu">sum</span>(rmBASE<span class="sc">$</span>rules<span class="sc">@</span>lhs<span class="sc">@</span>data))</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Accuracy on test data: &quot;</span>, <span class="fu">mean</span>(predictionBASE <span class="sc">==</span> y_true))</span></code></pre></div>
<p>In this case, the rule model is composed of seven rules. Note that the
last field on the output containing the Laplace statistics was omitted
for brevity.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>    lhs                            rhs                     support confidence     lift </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] {Petal.Length<span class="ot">=</span>[<span class="sc">-</span><span class="cn">Inf</span>;<span class="fl">2.6</span>]}   <span class="sc">=&gt;</span> {Species<span class="ot">=</span>setosa}        <span class="fl">0.32</span>    <span class="fl">1.0000000</span>      <span class="fl">3.125000</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>] {Petal.Width<span class="ot">=</span>[<span class="sc">-</span><span class="cn">Inf</span>;<span class="fl">0.8</span>]}    <span class="sc">=&gt;</span> {Species<span class="ot">=</span>setosa}        <span class="fl">0.32</span>    <span class="fl">1.0000000</span>      <span class="fl">3.125000</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>] {Petal.Length<span class="ot">=</span>(<span class="fl">5.15</span>; <span class="cn">Inf</span>],                                                               </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">Petal.Width=</span>(<span class="fl">1.75</span>; <span class="cn">Inf</span>]<span class="er">}</span>   <span class="sc">=&gt;</span> {Species<span class="ot">=</span>virginica}     <span class="fl">0.25</span>    <span class="fl">1.0000000</span>      <span class="fl">2.777778</span> </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>] {Petal.Width<span class="ot">=</span>(<span class="fl">1.75</span>; <span class="cn">Inf</span>]<span class="er">}</span>   <span class="sc">=&gt;</span> {Species<span class="ot">=</span>virginica}     <span class="fl">0.33</span>    <span class="fl">0.9705882</span>      <span class="fl">2.696078</span> </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] {Sepal.Length<span class="ot">=</span>(<span class="fl">5.55</span>; <span class="cn">Inf</span>],                                                               </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">Petal.Length=</span>(<span class="fl">2.6</span>;<span class="fl">4.75</span>],                                                                </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">Petal.Width=</span>(<span class="fl">0.8</span>;<span class="fl">1.75</span>]<span class="er">}</span>    <span class="sc">=&gt;</span> {Species<span class="ot">=</span>versicolor}    <span class="fl">0.21</span>    <span class="fl">1.0000000</span>      <span class="fl">3.125000</span> </span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>] {Petal.Length<span class="ot">=</span>(<span class="fl">2.6</span>;<span class="fl">4.75</span>]<span class="er">}</span>   <span class="sc">=&gt;</span> {Species<span class="ot">=</span>versicolor}    <span class="fl">0.26</span>    <span class="fl">0.9629630</span>      <span class="fl">3.009259</span> </span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">7</span>] {Petal.Width<span class="ot">=</span>(<span class="fl">0.8</span>;<span class="fl">1.75</span>]<span class="er">}</span>    <span class="sc">=&gt;</span> {Species<span class="ot">=</span>versicolor}    <span class="fl">0.31</span>    <span class="fl">0.9117647</span>      <span class="fl">2.849265</span> </span></code></pre></div>
<p>The statistics are:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Number of rules: 7 Total conditions: 10 Accuracy on test data: 0.96&quot;</span></span></code></pre></div>
<h4 class="unnumbered" data-number="4.3" id="configuring-qcba-optimizations-and-printing-statistics">Configuring QCBA optimizations and printing statistics</h4>
<p>For our demonstration purposes, we will set up a generic
<a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a> configuration
(variable <code>baseModel_arc</code>), which initially disables all optimizations.
To avoid repeating code for passing long argument lists to <code>qcba()</code> and
for printing model statistics such as model size and accuracy on test
data, we will also introduce the helper function <code>qcba_with_summary()</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>baseModel_arc <span class="ot">&lt;-</span> <span class="fu">arulesCBA2arcCBAModel</span>(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">arulesCBAModel =</span> rmBASE,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">cutPoints =</span> cutPoints,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">rawDataset =</span> trainFold,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">classAtt =</span> classAtt</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>qcbaParams <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">cbaRuleModel =</span> baseModel_arc,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">datadf =</span> trainFold,</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">extend =</span> <span class="st">&quot;noExtend&quot;</span>,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">attributePruning =</span> <span class="cn">FALSE</span>,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">continuousPruning =</span> <span class="cn">FALSE</span>,</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">postpruning =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">trim_literal_boundaries =</span> <span class="cn">FALSE</span>,</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">defaultRuleOverlapPruning =</span> <span class="st">&quot;noPruning&quot;</span>,</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">minImprovement =</span> <span class="dv">0</span>,</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">minCondImprovement =</span> <span class="dv">0</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>qcba_with_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(params) {</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>  rmQCBA <span class="ot">&lt;-</span> <span class="fu">do.call</span>(qcba, params)</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Number of rules: &quot;</span>, <span class="fu">nrow</span>(rmQCBA<span class="sc">@</span>rules), <span class="st">&quot; &quot;</span>)</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Total conditions: &quot;</span>, <span class="fu">sum</span>(rmQCBA<span class="sc">@</span>rules<span class="sc">$</span>condition_count), <span class="st">&quot; &quot;</span>)</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>  accuracy <span class="ot">&lt;-</span> <span class="fu">CBARuleModelAccuracy</span>(<span class="fu">predict</span>(rmQCBA, testFold), testFold[[classAtt]])</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Accuracy on test data: &quot;</span>, <span class="fu">round</span>(accuracy, <span class="dv">2</span>))</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(rmQCBA<span class="sc">@</span>rules)</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h4 class="unnumbered" data-number="4.4" id="qcba-refit">QCBA Refit</h4>
<p>The following code will postoptimize the previously learnt CBA model
using the refit optimization:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qcba_with_summary</span>(qcbaParams)</span></code></pre></div>
<p>This will output the following list of eight rules (note that in this
and the following printouts, the columns with rule measures are omitted
for brevity):</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>                                               {Petal.Length<span class="ot">=</span>[<span class="sc">-</span><span class="cn">Inf</span>;<span class="fl">1.9</span>]} <span class="sc">=&gt;</span> {Species<span class="ot">=</span>setosa}</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>                                                {Petal.Width<span class="ot">=</span>[<span class="sc">-</span><span class="cn">Inf</span>;<span class="fl">0.6</span>]} <span class="sc">=&gt;</span> {Species<span class="ot">=</span>setosa}</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>                          {Petal.Length<span class="ot">=</span>[<span class="fl">5.2</span>;<span class="cn">Inf</span>],Petal.Width<span class="ot">=</span>[<span class="fl">1.8</span>;<span class="cn">Inf</span>]} <span class="sc">=&gt;</span> {Species<span class="ot">=</span>virginica}</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     {Sepal.Length<span class="ot">=</span>[<span class="fl">5.6</span>;<span class="cn">Inf</span>],Petal.Length<span class="ot">=</span>[<span class="fl">3.3</span>;<span class="fl">4.7</span>],Petal.Width<span class="ot">=</span>[<span class="dv">1</span>;<span class="fl">1.7</span>]} <span class="sc">=&gt;</span> {Species<span class="ot">=</span>versicolor}</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>                                                 {Petal.Width<span class="ot">=</span>[<span class="fl">1.8</span>;<span class="cn">Inf</span>]} <span class="sc">=&gt;</span> {Species<span class="ot">=</span>virginica}</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>                                                {Petal.Length<span class="ot">=</span>[<span class="fl">3.3</span>;<span class="fl">4.7</span>]} <span class="sc">=&gt;</span> {Species<span class="ot">=</span>versicolor}</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>                                                   {Petal.Width<span class="ot">=</span>[<span class="dv">1</span>;<span class="fl">1.7</span>]} <span class="sc">=&gt;</span> {Species<span class="ot">=</span>versicolor}</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>                                                                      {} <span class="sc">=&gt;</span> {Species<span class="ot">=</span>virginica}</span></code></pre></div>
<p>The intervals (except for boundaries set to infinity) were shortened.
For example, for the first rule, the training data does not contain any
data point with Petal.Length=2.6 (original boundary) but it does contain
the value 1.9 (new boundary).</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(trainFold<span class="sc">$</span>Petal.Length <span class="sc">==</span> <span class="fl">1.9</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(trainFold<span class="sc">$</span>Petal.Length <span class="sc">==</span> <span class="fl">2.6</span>)</span></code></pre></div>
<p>The first returns <code>TRUE</code> and the second <code>FALSE</code>.</p>
<p>The statistics are</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Number of rules: 8 Total conditions: 10 Accuracy on test data: 0.96&quot;</span></span></code></pre></div>
<p>While this is one rule more than the CPAR model, this extra rule is the
explicitly included default rule (rule #8). In the
<a href="https://CRAN.R-project.org/package=arulesCBA"><strong>arulesCBA</strong></a> CPAR
model, the default rule is included in a separate slot
(<code>rmBASE$default</code>) and is the same virginica class as the one in the
QCBA rule set.</p>
<p>Recall that rules are applied from top to bottom. A careful inspection
of the rule list shows that it contains rule 4, which is a special case
of rule 7 (both predicting the versicolor class). However, neither of
these rules can be removed without impact on the predictions. If the
more specific rule 4 was removed, some instances would be classified
differently, as more instances would reach rule 5, which would classify
them as virginica. Similarly, the classification would change if we
replace rule 4 with rule 7 or rule 7 with rule 4.</p>
<h4 class="unnumbered" data-number="4.5" id="adjusting-boundaries-and-attribute-pruning">Adjusting boundaries and attribute pruning</h4>
<p>We will demonstrate extension, trimming and attribute pruning steps
simultaneously for efficient presentation.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>qcbaParams<span class="sc">$</span>attributePruning <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>qcbaParams<span class="sc">$</span>trim_literal_boundaries <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>qcbaParams<span class="sc">$</span>extend <span class="ot">&lt;-</span> <span class="st">&quot;numericOnly&quot;</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">qcba_with_summary</span>(qcbaParams)</span></code></pre></div>
<p>The list of resulting rules is</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  {Petal.Length<span class="ot">=</span>[<span class="sc">-</span><span class="cn">Inf</span>;<span class="fl">1.9</span>]}                     <span class="sc">=&gt;</span> {Species<span class="ot">=</span>setosa}</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  {Petal.Width<span class="ot">=</span>[<span class="sc">-</span><span class="cn">Inf</span>;<span class="fl">0.6</span>]}                      <span class="sc">=&gt;</span> {Species<span class="ot">=</span>setosa}</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  {Petal.Length<span class="ot">=</span>[<span class="fl">5.2</span>;<span class="cn">Inf</span>]}                      <span class="sc">=&gt;</span> {Species<span class="ot">=</span>virginica}</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  {Sepal.Length<span class="ot">=</span>[<span class="dv">5</span>;<span class="cn">Inf</span>],Petal.Length<span class="ot">=</span>[<span class="fl">3.3</span>;<span class="fl">4.7</span>]} <span class="sc">=&gt;</span> {Species<span class="ot">=</span>versicolor}</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  {Petal.Width<span class="ot">=</span>[<span class="fl">1.8</span>;<span class="cn">Inf</span>]}                       <span class="sc">=&gt;</span> {Species<span class="ot">=</span>virginica}</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>  {Petal.Length<span class="ot">=</span>[<span class="fl">3.3</span>;<span class="fl">4.7</span>]}                      <span class="sc">=&gt;</span> {Species<span class="ot">=</span>versicolor}    </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  {Petal.Width<span class="ot">=</span>[<span class="dv">1</span>;<span class="fl">1.7</span>]}                         <span class="sc">=&gt;</span> {Species<span class="ot">=</span>versicolor}    </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  {}                                            <span class="sc">=&gt;</span> {Species<span class="ot">=</span>virginica}</span></code></pre></div>
<p>As can be seen, the adjustment of intervals resulted in a change in the
boundary for Sepal.length in rule #4. The attribute pruning removed
extra conditions from rules #3 and #4 resulting in a smaller model with
overall improved test accuracy:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Number of rules: 8 Total conditions: 8 Accuracy on test data: 1&quot;</span></span></code></pre></div>
<h4 class="unnumbered" data-number="4.6" id="postpruning">Postpruning</h4>
<p>The postpruning is performed on a model resulting from all previous
steps.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>qcbaParams<span class="sc">$</span>postpruning <span class="ot">&lt;-</span> <span class="st">&quot;cba&quot;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qcba_with_summary</span>(qcbaParams)</span></code></pre></div>
<p>The result is a substantially reduced rule list:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  {Petal.Length<span class="ot">=</span>[<span class="dv">1</span>;<span class="fl">1.9</span>]}                        <span class="sc">=&gt;</span> {Species<span class="ot">=</span>setosa}    </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  {Petal.Length<span class="ot">=</span>[<span class="fl">5.2</span>;<span class="cn">Inf</span>]}                      <span class="sc">=&gt;</span> {Species<span class="ot">=</span>virginica} </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  {Sepal.Length<span class="ot">=</span>[<span class="dv">5</span>;<span class="cn">Inf</span>],Petal.Length<span class="ot">=</span>[<span class="fl">3.3</span>;<span class="fl">4.7</span>]} <span class="sc">=&gt;</span> {Species<span class="ot">=</span>versicolor}</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  {Petal.Width<span class="ot">=</span>[<span class="fl">1.8</span>;<span class="cn">Inf</span>]}                       <span class="sc">=&gt;</span> {Species<span class="ot">=</span>virginica}</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  {}                                            <span class="sc">=&gt;</span> {Species<span class="ot">=</span>versicolor}    </span></code></pre></div>
<p>The statistics are:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Number of rules: 5 Total conditions: 5 Accuracy on test data: 1.0&quot;</span></span></code></pre></div>
<p>As can be seen, postpruning reduced the model size significantly, and in
this case, the model has even better accuracy than the base CPAR model.
However, in some other cases, a small average decrease in accuracy as a
result of pruning has been shown in benchmarks in <span class="citation" data-cites="kliegr2023qcba">Kliegr and Izquierdo (<a href="#ref-kliegr2023qcba" role="doc-biblioref">2023</a>)</span>.</p>
<h4 class="unnumbered" data-number="4.7" id="default-rule-pruning">Default rule pruning</h4>
<p>The following code demonstrates the standard strategy for default rule
pruning. As outlined earlier, this often provides an effective way to
reduce the rule count, however, sometimes at the expense of slightly
lower accuracy. <span id="final:cpar" data-label="final:cpar"></span></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>qcbaParams<span class="sc">$</span>defaultRuleOverlapPruning <span class="ot">&lt;-</span> <span class="st">&quot;transactionBased&quot;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qcba_with_summary</span>(qcbaParams)</span></code></pre></div>
<p>The result is the final reduced rule list with the removed rule #3 from
the previous print-out. This rule classifies to the versicolor class.
Since it is the default class, instances that were covered by this rule
will be covered by the default rule. The original rule #4 covers –
considering its position in the rule list – different instances of
training data and, therefore, will not interfere with this.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  {Petal.Length<span class="ot">=</span>[<span class="dv">1</span>;<span class="fl">1.9</span>]}   <span class="sc">=&gt;</span> {Species<span class="ot">=</span>setosa} </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  {Petal.Length<span class="ot">=</span>[<span class="fl">5.2</span>;<span class="cn">Inf</span>]} <span class="sc">=&gt;</span> {Species<span class="ot">=</span>virginica}  </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  {Petal.Width<span class="ot">=</span>[<span class="fl">1.8</span>;<span class="cn">Inf</span>]}  <span class="sc">=&gt;</span> {Species<span class="ot">=</span>virginica}</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  {}                       <span class="sc">=&gt;</span> {Species<span class="ot">=</span>versicolor} </span></code></pre></div>
<p>The statistics for the final model are:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>Number of rules<span class="sc">:</span> <span class="dv">4</span> Total conditions<span class="sc">:</span> <span class="dv">3</span> Accuracy on test data<span class="sc">:</span> <span class="fl">1.0</span></span></code></pre></div>
<p>Compared to the original CPAR model, the number of rules dropped from 8
(including the default rule) to 4, the number of conditions dropped from
10 to 3, and the accuracy increased by 0.04 points. This is an
illustrative example and actual results may vary for a particular
dataset. On average, the improvement reported over CPAR as measured on
22 benchmark datasets was a 2% improvement in accuracy, a 40% reduction
in the number of rules and a 29% reduction in the number of conditions
<span class="citation" data-cites="kliegr2023qcba">(<a href="#ref-kliegr2023qcba" role="doc-biblioref">Kliegr and Izquierdo 2023</a>)</span>. More details on the benchmarks are covered in
Section <a href="#%7Bsec:benchmark%7D">Built-in benchmark support</a>.</p>
<h3 data-number="5" id="interoperability-with-rule-learning-packages-in-cran"><span class="header-section-number">5</span> Interoperability with Rule Learning Packages in CRAN</h3>
<p>The <a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a> package is able
to process CBA models produced by all three CBA implementations in CRAN:
<a href="https://CRAN.R-project.org/package=arc"><strong>arc</strong></a>,
<a href="https://CRAN.R-project.org/package=arulesCBA"><strong>arulesCBA</strong></a>,
<a href="https://CRAN.R-project.org/package=rCBA"><strong>rCBA</strong></a>. Additionally, it
can process other rule models generated by
<a href="https://CRAN.R-project.org/package=arulesCBA"><strong>arulesCBA</strong></a> such as
CPAR and SBRL models generated by the package
<a href="https://CRAN.R-project.org/package=sbrl"><strong>sbrl</strong></a>.</p>
<p>On the input, <code>qcba()</code> requires an instance of <code>CBARuleModel</code>, which has
the following slots:</p>
<ul>
<li><p><code>rules</code>: list of rules in the model (instance of <code>rules</code> from
<code>arules</code> package.</p></li>
<li><p><code>cutp</code>: specification of cutpoints used to discretize numerical
attributes,</p></li>
<li><p><code>classAtt</code>: name of the target attribute,</p></li>
<li><p><code>attTypes</code>: types of the attributes (numeric or factor).</p></li>
</ul>
<p>As shown below, the instance of this class is created automatically when
used with <a href="https://CRAN.R-project.org/package=arc"><strong>arc</strong></a> and through
prepared helper functions for other libraries. The code examples in the
following are built on the data preparation described in
Subsection <a href="#%7Bss:data%7D">Data</a>.</p>
<h4 class="unnumbered" data-number="5.1" id="arc-package"><a href="https://CRAN.R-project.org/package=arc"><strong>arc</strong></a> package</h4>
<p>As the <a href="https://CRAN.R-project.org/package=arc"><strong>arc</strong></a> package was
specifically designed for
<a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a>, it outputs an
instance of the <code>CBARuleModel</code> class, which is accepted by the <code>qcba()</code>
function. The postprocessing can thus be directly applied to the result
of <code>cba()</code>.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>rmCBA <span class="ot">&lt;-</span> <span class="fu">cba</span>(<span class="at">datadf =</span> trainFold, <span class="at">classAtt =</span> <span class="st">&quot;Species&quot;</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>rmqCBA <span class="ot">&lt;-</span> <span class="fu">qcba</span>(<span class="at">cbaRuleModel =</span> rmCBA, <span class="at">datadf =</span> trainFold)</span></code></pre></div>
<p>By default, the function <code>cba()</code> from the
<a href="https://CRAN.R-project.org/package=arc"><strong>arc</strong></a> package learns
candidate association rules using automatic threshold detection using
the heuristic algorithm from <span class="citation" data-cites="kliegr2019tuning">(<a href="#ref-kliegr2019tuning" role="doc-biblioref">Kliegr and Kuchar 2019</a>)</span>. Therefore, no support
and confidence thresholds have to be passed. A more complex case
involving custom discretization and thresholds was demonstrated in
Section <a href="#%7Bsec:primer%7D">Primer on building rule-based classifiers for QCBA in
R</a>.</p>
<h4 class="unnumbered" data-number="5.2" id="arulescba-package"><a href="https://CRAN.R-project.org/package=arulesCBA"><strong>arulesCBA</strong></a> package</h4>
<p>Compared to the previous example, there is an extra line with a call to
a helper function.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arulesCBA)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>arulesCBAModel <span class="ot">&lt;-</span> arulesCBA<span class="sc">::</span><span class="fu">CBA</span>(Species <span class="sc">~</span> ., <span class="at">data =</span> train_disc, <span class="at">supp =</span> <span class="fl">0.1</span>, <span class="at">conf =</span> <span class="fl">0.9</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>CBAmodel <span class="ot">&lt;-</span> <span class="fu">arulesCBA2arcCBARuleModel</span>(arulesCBAModel, discrModel<span class="sc">$</span>cutp, iris, classAtt)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>qCBAmodel <span class="ot">&lt;-</span> <span class="fu">qcba</span>(<span class="at">cbaRuleModel =</span> CBAmodel, <span class="at">datadf =</span> iris)</span></code></pre></div>
<p>Note that we passed a prediscretized data in <code>irisDisc</code> to the package
<a href="https://CRAN.R-project.org/package=arulesCBA"><strong>arulesCBA</strong></a>. While the
<a href="https://CRAN.R-project.org/package=arulesCBA"><strong>arulesCBA</strong></a> package
allows for supervised discretization using the
<code>arulesCBA::discretizeDF.supervised()</code> method, the cutpoints determined
during the discretization are not exposed in a machine-readable way.
Therefore, when
<a href="https://CRAN.R-project.org/package=arulesCBA"><strong>arulesCBA</strong></a> is used in
conjunction with <a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a>,
the discretization should be performed using <code>arc::discrNumeric()</code>.
Since both <a href="https://CRAN.R-project.org/package=arc"><strong>arc</strong></a> and
<a href="https://CRAN.R-project.org/package=arulesCBA"><strong>arulesCBA</strong></a> internally
use the MDLP method from the
<a href="https://CRAN.R-project.org/package=discretization"><strong>discretization</strong></a>
package, this should not influence the results.</p>
<h4 class="unnumbered" data-number="5.3" id="rcba-package"><a href="https://CRAN.R-project.org/package=rCBA"><strong>rCBA</strong></a> package</h4>
<p>The logic of the use of
<a href="https://CRAN.R-project.org/package=rCBA"><strong>rCBA</strong></a> package is similar
to that of the previously covered package; it is only necessary to
ensure the use of a different conversion function:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rCBA)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>rCBAmodel <span class="ot">&lt;-</span> rCBA<span class="sc">::</span><span class="fu">build</span>(train_disc)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>CBAmodel <span class="ot">&lt;-</span> <span class="fu">rcbaModel2CBARuleModel</span>(rCBAmodel, discrModel<span class="sc">$</span>cutp, iris, <span class="st">&quot;Species&quot;</span>)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>qCBAmodel <span class="ot">&lt;-</span> <span class="fu">qcba</span>(CBAmodel, iris)</span></code></pre></div>
<p>Confidence and support thresholds are not specified as
<a href="https://CRAN.R-project.org/package=rCBA"><strong>rCBA</strong></a> uses automatic
confidence and threshold tuning using the simulated annealing algorithm
from <span class="citation" data-cites="kliegr2019tuning">(<a href="#ref-kliegr2019tuning" role="doc-biblioref">Kliegr and Kuchar 2019</a>)</span>. The
<a href="https://CRAN.R-project.org/package=rCBA"><strong>rCBA</strong></a> package internally
uses a Java implementation of CBA, which may result in faster
performance on some datasets than
<a href="https://CRAN.R-project.org/package=arulesCBA"><strong>arulesCBA</strong></a>
<span class="citation" data-cites="hahsler2019associative">(<a href="#ref-hahsler2019associative" role="doc-biblioref">Hahsler et al. 2019</a>)</span>.</p>
<h4 class="unnumbered" data-number="5.4" id="sbrl-and-other-packages"><a href="https://CRAN.R-project.org/package=sbrl"><strong>sbrl</strong></a> and other packages</h4>
<p>The logic of the use of
<a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a> package for
<a href="https://CRAN.R-project.org/package=sbrl"><strong>sbrl</strong></a> is similar; it is
again only necessary to use a dedicated conversion function
<code>sbrlModel2arcCBARuleModel()</code>.</p>
<p>An example for <a href="https://CRAN.R-project.org/package=sbrl"><strong>sbrl</strong></a> is
contained in the <a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a>
package documentation, as
<a href="https://CRAN.R-project.org/package=sbrl"><strong>sbrl</strong></a> requires additional
preprocessing and postprocessing:
<a href="https://CRAN.R-project.org/package=sbrl"><strong>sbrl</strong></a> requires a specially
named target attribute, allows only for binary targets, and outputs
probabilities rather than specific class predictions.</p>
<p>For compatibility with packages that do not use the
<a href="https://CRAN.R-project.org/package=arules"><strong>arules</strong></a> data structures,
there is also the <code>customCBARuleModel</code> class, which takes rules as a
dataframe conforming to the format used in
<a href="https://CRAN.R-project.org/package=arules"><strong>arules</strong></a> that can be
obtained with <code>(as(rules, "data.frame"))</code>.</p>
<h3 data-number="6" id="sec:benchmark"><span class="header-section-number">6</span> Built-in benchmark support</h3>
<p>The <a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a> package has
built-in support for benchmarking over all supported types of algorithms
covered in the previous section. This includes
<a href="https://CRAN.R-project.org/package=arulesCBA"><strong>arulesCBA</strong></a>
implementations of CBA, CMAR, CPAR, PRM and FOIL2 <span class="citation" data-cites="quinlan1993foil">(<a href="#ref-quinlan1993foil" role="doc-biblioref">Quinlan and Cameron-Jones 1993</a>)</span>.</p>
<p>By default, an average of two runs of each algorithm is performed.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># learn with default metaparameter values</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>stats <span class="ot">&lt;-</span> <span class="fu">benchmarkQCBA</span>(<span class="at">train =</span> trainFold, <span class="at">test =</span> testFold, <span class="at">classAtt =</span> classAtt)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(stats)</span></code></pre></div>
<p>The result of the last printout is</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>           CBA   CMAR   CPAR   PRM  FOIL2 CBA_QCBA CMAR_QCBA CPAR_QCBA PRM_QCBA FOIL2_QCBA</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>accuracy  <span class="fl">1.00</span>  <span class="fl">0.960</span>  <span class="fl">0.960</span> <span class="fl">0.960</span>  <span class="fl">0.960</span>    <span class="fl">1.000</span>     <span class="fl">1.000</span>     <span class="fl">1.000</span>    <span class="fl">1.000</span>      <span class="fl">0.960</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>rulecount <span class="fl">5.00</span> <span class="fl">25.000</span>  <span class="fl">7.000</span> <span class="fl">6.000</span>  <span class="fl">8.000</span>    <span class="fl">4.000</span>     <span class="fl">4.000</span>     <span class="fl">4.000</span>    <span class="fl">4.000</span>      <span class="fl">5.000</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>modelsize <span class="fl">5.00</span> <span class="fl">52.000</span> <span class="fl">10.000</span> <span class="fl">9.000</span> <span class="fl">13.000</span>    <span class="fl">3.000</span>     <span class="fl">3.000</span>     <span class="fl">3.000</span>    <span class="fl">3.000</span>      <span class="fl">5.000</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>buildtime <span class="fl">0.05</span>  <span class="fl">0.535</span>  <span class="fl">0.215</span> <span class="fl">0.205</span>  <span class="fl">0.215</span>    <span class="fl">0.058</span>     <span class="fl">0.138</span>     <span class="fl">0.059</span>    <span class="fl">0.059</span>      <span class="fl">0.081</span></span></code></pre></div>
<p>The function can be easily turned into a comparison with
<code>round((stats[, 6:10] / stats[, 1:5] - 1), 3)</code>, the result is then:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>          CBA_QCBA CMAR_QCBA CPAR_QCBA PRM_QCBA FOIL2_QCBA</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>accuracy     <span class="fl">0.000</span>     <span class="fl">0.042</span>     <span class="fl">0.042</span>    <span class="fl">0.042</span>      <span class="fl">0.000</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>rulecount   <span class="sc">-</span><span class="fl">0.200</span>    <span class="sc">-</span><span class="fl">0.840</span>    <span class="sc">-</span><span class="fl">0.429</span>   <span class="sc">-</span><span class="fl">0.333</span>     <span class="sc">-</span><span class="fl">0.375</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>modelsize   <span class="sc">-</span><span class="fl">0.400</span>    <span class="sc">-</span><span class="fl">0.942</span>    <span class="sc">-</span><span class="fl">0.700</span>   <span class="sc">-</span><span class="fl">0.667</span>     <span class="sc">-</span><span class="fl">0.615</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>buildtime    <span class="fl">0.204</span>    <span class="sc">-</span><span class="fl">0.737</span>    <span class="sc">-</span><span class="fl">0.681</span>   <span class="sc">-</span><span class="fl">0.722</span>     <span class="sc">-</span><span class="fl">0.665</span></span></code></pre></div>
<p>This shows that on the iris, depending on the base algorithm, QCBA
decreased the rule count between 20% and 84%, while accuracy remained
unchanged or increased by about 4%. The last row shows that the time
required by QCBA is, for four out of five studied reference algorithms,
lower than what it takes to train the input model by the corresponding
algorithm. The <code>benchmarkQCBA()</code> function can also accept custom
metaparameters and selected base rule learners. The user can also choose
the number of runs (<code>iterations</code> parameter) and obtain the resulting
models from the last iteration.</p>
<p>Since the outputs of some learners may depend on chance, the function
also allows setting the random seed through the optional <code>seed</code>
argument. Note that the provided seed is not used for splitting data,
which needs to be performed externally. This approach provides the most
control for the user, avoids replicating code in other R packages and
functions aimed at splitting data, and also improves reproducibility.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">benchmarkQCBA</span>(</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  trainFold,</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  testFold,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  classAtt,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  train_disc,</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  test_disc,</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  discrModel<span class="sc">$</span>cutp,</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">CBA =</span> <span class="fu">list</span>(<span class="at">support =</span> <span class="fl">0.05</span>, <span class="at">confidence =</span> <span class="fl">0.5</span>),</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">algs =</span> <span class="fu">c</span>(<span class="st">&quot;CPAR&quot;</span>),</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">iterations =</span> <span class="dv">10</span>,</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">return_models =</span> <span class="cn">TRUE</span>,</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">seed =</span> <span class="dv">1</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">&quot;Evaluation statistics&quot;</span>)</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(output<span class="sc">$</span>stats)</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">&quot;CPAR model&quot;</span>)</span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(output<span class="sc">$</span>CPAR[[<span class="dv">1</span>]])</span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">&quot;QCBA model&quot;</span>)</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(output<span class="sc">$</span>CPAR_QCBA[[<span class="dv">1</span>]])</span></code></pre></div>
<p>This will produce output with a list of rules similar to the final CPAR
model presented in Section <a href="#%7Bsec:demo%7D">Demonstration of individual QCBA
optimization steps</a>. A more complex benchmark of
computational costs is presented in <span class="citation" data-cites="kliegr2023qcba">Kliegr and Izquierdo (<a href="#ref-kliegr2023qcba" role="doc-biblioref">2023</a>)</span>, which also includes
the study of various data sizes and the effect of varying the number of
unique values in the dataset. A brief overview of the main results was
presented in Subsection <a href="#%7Bss:costs%7D">Computational costs for large
datasets</a>.</p>
<p>A GitHub repository <a href="https://github.com/kliegr/arcBench" class="uri">https://github.com/kliegr/arcBench</a> contains
scripts that extend this workflow into automation across multiple
datasets and materialized splits in each dataset. It also includes
support for benchmarking additional rule learning algorithms, including
SBRL, Python packages producing IDS models <span class="citation" data-cites="lakkarajuinterpretable">(<a href="#ref-lakkarajuinterpretable" role="doc-biblioref">Lakkaraju et al. 2016</a>)</span> and
Weka libraries for RIPPER <span class="citation" data-cites="cohen1995fast">(<a href="#ref-cohen1995fast" role="doc-biblioref">Cohen 1995</a>)</span> and FURIA <span class="citation" data-cites="huhn2009furia">(<a href="#ref-huhn2009furia" role="doc-biblioref">Hühn and Hüllermeier 2009</a>)</span>.
Detailed benchmarking results are included in <span class="citation" data-cites="kliegr2023qcba">(<a href="#ref-kliegr2023qcba" role="doc-biblioref">Kliegr and Izquierdo 2023</a>)</span>.</p>
<h3 data-number="7" id="conclusions"><span class="header-section-number">7</span> Conclusions</h3>
<p>Quantitative CBA ameliorates one of the major drawbacks of association
rule classification, the adherence of rules comprising the classifier to
the multidimensional grid created by discretization of numerical
attributes. By working with the original continuous data, the algorithm
can improve the fit of the rules and consequently reduce their count.
The QCBA algorithm does not introduce any mandatory thresholds or
meta-parameters for the user to set or optimize, although it does allow
disabling the individual optimizations. The
<a href="https://CRAN.R-project.org/package=qCBA"><strong>qCBA</strong></a> package implements
QCBA, allowing the postprocessing of the output of all three CBA
implementations currently in CRAN. The package can also be used in
conjunction with other association rule-based models, including those
producing rule sets and using multi-rule classification.</p>
<p>The QCBA algorithm is described in detail in <span class="citation" data-cites="kliegr2023qcba">Kliegr and Izquierdo (<a href="#ref-kliegr2023qcba" role="doc-biblioref">2023</a>)</span>, the
package documentation is available in <span class="citation" data-cites="qcbaPackage">Kliegr (<a href="#ref-qcbaPackage" role="doc-biblioref">2024</a>)</span>, and additional
information is available at <a href="https://github.com/kliegr/qcba" class="uri">https://github.com/kliegr/qcba</a>, which also
features an interactive RMarkdown tutorial supplementing this paper.</p>
<h3 data-number="8" id="acknowledgment"><span class="header-section-number">8</span> Acknowledgment</h3>
<p>The author thanks the Faculty of Informatics and Statistics, Prague
University of Economics and Business, for long-term institutional
support of research activities.</p>
</div>
<div class="sourceCode" id="cb41"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<h3 class="appendix" data-number="9" id="supplementary-materials"><span class="header-section-number">9</span> Supplementary materials</h3>
<p>Supplementary materials are available in addition to this article. It can be downloaded at
<a href="RJ-2025-038.zip">RJ-2025-038.zip</a></p>
<h3 class="appendix" data-number="10" id="cran-packages-used"><span class="header-section-number">10</span> CRAN packages used</h3>
<p><a href="https://cran.r-project.org/package=qCBA">qCBA</a>, <a href="https://cran.r-project.org/package=rCBA">rCBA</a>, <a href="https://cran.r-project.org/package=arc">arc</a>, <a href="https://cran.r-project.org/package=arulesCBA">arulesCBA</a>, <a href="https://cran.r-project.org/package=arules">arules</a>, <a href="https://cran.r-project.org/package=arcPackage">arcPackage</a>, <a href="https://cran.r-project.org/package=rJava">rJava</a>, <a href="https://cran.r-project.org/package=datasets">datasets</a>, <a href="https://cran.r-project.org/package=discretization">discretization</a>, <a href="https://cran.r-project.org/package=sbrl">sbrl</a></p>
<h3 class="appendix" data-number="11" id="cran-task-views-implied-by-cited-packages"><span class="header-section-number">11</span> CRAN Task Views implied by cited packages</h3>
<p><a href="https://cran.r-project.org/view=HighPerformanceComputing">HighPerformanceComputing</a>, <a href="https://cran.r-project.org/view=MachineLearning">MachineLearning</a>, <a href="https://cran.r-project.org/view=ModelDeployment">ModelDeployment</a></p>
<h3 class="appendix" data-number="12" id="note"><span class="header-section-number">12</span> Note</h3>
<p>This article is converted from a Legacy LaTeX article using the
<a href="https://cran.r-project.org/package=texor">texor</a> package.
The pdf version is the official version. To report a problem with the html,
refer to CONTRIBUTE on the R Journal homepage.</p>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-agrawal94fast" class="csl-entry" role="listitem">
R. Agrawal and R. Srikant. Fast algorithms for mining association rules in large databases. In <em>Proceedings of the 20th international conference on very large data bases</em>, pages. 487–499 1994. San Francisco, CA, USA: Morgan Kaufmann Publishers Inc. ISBN 1-55860-153-8.
</div>
<div id="ref-azmi2020rcar" class="csl-entry" role="listitem">
M. Azmi and A. Berrado. <span>RCAR</span> framework: Building a regularized class association rules model in a categorical data space. In <em>Proceedings of the 13th international conference on intelligent systems: Theories and applications</em>, pages. 1–6 2020.
</div>
<div id="ref-cohen1995fast" class="csl-entry" role="listitem">
W. W. Cohen. Fast effective rule induction. In <em>Twelfth international conference on machine learning</em>, pages. 115–123 1995. Morgan Kaufmann.
</div>
<div id="ref-FayyadI93" class="csl-entry" role="listitem">
U. M. Fayyad and K. B. Irani. Multi-interval discretization of continuous-valued attributes for classification learning. In <em>13th international joint conference on uncertainly in artificial intelligence (IJCAI93)</em>, pages. 1022–1029 1993.
</div>
<div id="ref-hahsler2011arules" class="csl-entry" role="listitem">
M. Hahsler, S. Chelluboina, K. Hornik and C. Buchta. The arules r-package ecosystem: Analyzing interesting patterns from large transaction data sets. <em>Journal of Machine Learning Research</em>, 12(Jun): 2021–2025, 2011.
</div>
<div id="ref-arules" class="csl-entry" role="listitem">
M. Hahsler, B. Grün and K. Hornik. Introduction to arules–mining association rules and frequent item sets. <em>SIGKDD Explor</em>, 2(4): 1–28, 2007.
</div>
<div id="ref-hahsler2019associative" class="csl-entry" role="listitem">
M. Hahsler, I. Johnson, T. Kliegr and J. Kuchař. Associative classification in <span>R</span>: Arc, arulesCBA, and rCBA. <em>R Journal</em>, 9(2): 2019.
</div>
<div id="ref-huhn2009furia" class="csl-entry" role="listitem">
J. Hühn and E. Hüllermeier. <span>FURIA</span>: An algorithm for unordered fuzzy rule induction. <em>Data Mining and Knowledge Discovery</em>, 19(3): 293–319, 2009.
</div>
<div id="ref-arcPackage" class="csl-entry" role="listitem">
T. Kliegr. <em>Association rule classification.</em> 2016. URL <a href="https://CRAN.R-project.org/package=arc">https://CRAN.R-project.org/package=arc</a>. <span>R</span> package version 1.1.3.
</div>
<div id="ref-qcbaPackage" class="csl-entry" role="listitem">
T. Kliegr. <em><span class="nocase">qCBA</span>: Quantitative classification by association rules.</em> 2024. URL <a href="https://CRAN.R-project.org/package=qCBA">https://CRAN.R-project.org/package=qCBA</a>. <span>R</span> package version 1.0.
</div>
<div id="ref-kliegr2023qcba" class="csl-entry" role="listitem">
T. Kliegr and E. Izquierdo. <span>QCBA</span>: Improving rule classifiers learned from quantitative data by recovering information lost by discretisation. <em>Applied Intelligence</em>, 53(18): 20797–20827, 2023.
</div>
<div id="ref-kliegr2019tuning" class="csl-entry" role="listitem">
T. Kliegr and J. Kuchar. Tuning hyperparameters of classification based on associations (<span>CBA</span>). In <em>ITAT</em>, pages. 9–16 2019.
</div>
<div id="ref-rcba" class="csl-entry" role="listitem">
J. Kuchař and T. Kliegr. <em>rCBA: <span>CBA</span> classifier for <span>R</span>.</em> 2019. URL <a href="https://CRAN.R-project.org/package=rCBA">https://CRAN.R-project.org/package=rCBA</a>. <span>R</span> package version 0.4.3.
</div>
<div id="ref-lakkarajuinterpretable" class="csl-entry" role="listitem">
H. Lakkaraju, S. H. Bach and J. Leskovec. Interpretable decision sets: A joint framework for description and prediction. In <em>Proceedings of the 22Nd ACM SIGKDD international conference on knowledge discovery and data mining</em>, pages. 1675–1684 2016. New York, NY, USA: ACM. ISBN 978-1-4503-4232-2.
</div>
<div id="ref-cmar" class="csl-entry" role="listitem">
W. Li, J. Han and J. Pei. CMAR: Accurate and efficient classification based on multiple class-association rules. In <em>Proceedings of the 2001 IEEE international conference on data mining</em>, pages. 369–376 2001. Washington, DC, USA: IEEE Computer Society. ISBN 0-7695-1119-8.
</div>
<div id="ref-Liu98integratingclassification" class="csl-entry" role="listitem">
B. Liu, W. Hsu and Y. Ma. Integrating classification and association rule mining. In <em>Proceedings of the fourth international conference on knowledge discovery and data mining</em>, pages. 80–86 1998. New York, NY: AAAI Press.
</div>
<div id="ref-arulesCBA" class="csl-entry" role="listitem">
T. G. Michael Hahsler Ian Johnson. <em>arulesCBA: Classification based on association rules.</em> 2024. URL <a href="https://CRAN.R-project.org/package=arulesCBA">https://CRAN.R-project.org/package=arulesCBA</a>. <span>R</span> package version 1.2.7.
</div>
<div id="ref-quinlan2014c4" class="csl-entry" role="listitem">
J. R. Quinlan. <em><span>C4.5</span>: Programs for machine learning.</em> Morgan Kaufmann, 1993.
</div>
<div id="ref-quinlan1993foil" class="csl-entry" role="listitem">
J. R. Quinlan and R. M. Cameron-Jones. <span>FOIL</span>: A midterm report. In <em>European conference on machine learning</em>, pages. 1–20 1993. Springer.
</div>
<div id="ref-arcReview" class="csl-entry" role="listitem">
K. Vanhoof and B. Depaire. Structure of association rule classifiers: A review. In <em>2010 international conference on intelligent systems and knowledge engineering (ISKE)</em>, pages. 9–12 2010.
</div>
<div id="ref-sbrl" class="csl-entry" role="listitem">
H. Yang, C. Rudin and M. Seltzer. <em>Sbrl: Scalable <span>Bayesian</span> rule lists model.</em> 2024. URL <a href="https://CRAN.R-project.org/package=sbrl">https://CRAN.R-project.org/package=sbrl</a>. <span>R</span> package version 1.4.
</div>
<div id="ref-yang2017scalable" class="csl-entry" role="listitem">
H. Yang, C. Rudin and M. Seltzer. Scalable <span>Bayesian</span> rule lists. In <em>International conference on machine learning</em>, pages. 3921–3930 2017. PMLR.
</div>
<div id="ref-yin2003cpar" class="csl-entry" role="listitem">
X. Yin and J. Han. <span>CPAR</span>: Classification based on predictive association rules. In <em>Proceedings of the 2003 SIAM international conference on data mining</em>, pages. 331–335 2003. SIAM.
</div>
</div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="references">References</h3>
  <div id="references-listing"></div>
  <h3 id="reuse">Reuse</h3>
  <p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Kliegr, "qCBA: An R Package for Postoptimization of Rule Models Learnt on Quantized Data", The R Journal, 2026</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@article{RJ-2025-038,
  author = {Kliegr, Tomas},
  title = {qCBA: An R Package for Postoptimization of Rule Models Learnt on Quantized Data},
  journal = {The R Journal},
  year = {2026},
  note = {https://doi.org/10.32614/RJ-2025-038},
  doi = {10.32614/RJ-2025-038},
  volume = {17},
  issue = {4},
  issn = {2073-4859},
  pages = {156-172}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<!--radix_placeholder_navigation_after_body--><html><body>
<div class="distill-site-nav distill-site-footer">
<p>© The R Foundation, <a href="mailto:r-journal@r-project.org">web page
contact</a>.</p>
</div>
<!--/radix_placeholder_navigation_after_body-->
</body></html>


</body>

</html>
