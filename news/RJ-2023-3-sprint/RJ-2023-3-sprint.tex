% !TeX root = RJwrapper.tex
\title{R Project Sprint 2023}


\author{by Heather Turner and Gabriel Becker}

\maketitle

\abstract{%
R Project Sprint 2023 was a three-day event at the University of Warwick, UK, that brought together novice and experienced contributors to work alongside members of the R Core Team. 55 members of the R community participated, with external contributors selected to balance technical expertise and provide opportunities for members of historically under-represented groups. Participants worked collaboratively on contributions to base R and on infrastructure supporting contribution. Several small tasks were completed within the duration of the sprint, whilst significant steps were made on larger projects. The event provided a unique opportunity for external contributors to learn about the R development process and to develop their contribution skills.
}

\hypertarget{introduction}{%
\section{Introduction}\label{introduction}}

R Project Sprint 2023 was a three-day event hosted at the University of Warwick,
UK. The aim of the event was to bring novice and experienced contributors
together to work collaboratively with members of the R Core Team, who
maintain and develop the code and documentation that forms the base
distribution of R (``base R'').

\hypertarget{participants}{%
\section{Participants}\label{participants}}

All members of the R Core Team were invited to the event and 11 were
able to participate. Another 13 participants were invited/pre-selected - these
included local organizers, representatives from sponsors, and experienced
contributors. The remaining 31 participants - along with a few more who were
ultimately unable to participate - were selected from a pool of 71
self-nominated applicants. Figure \ref{fig:photos} shows group photos taken
on Day 2 and Day 3 of the sprint, a full \href{https://contributor.r-project.org/r-project-sprint-2023/participants/}{list of participants} is on the sprint website. Participation was in-person by default,
but exceptions were made in a few cases where travel was not possible, e.g.,
due to visa issues. The number online was higher than anticipated due to
travel disruptions; in the end seven people participated online.

\begin{figure}
\includegraphics[width=1\linewidth]{images/group_thursday} \includegraphics[width=1\linewidth]{images/group_friday} \caption{Photos of sprint participants on Day 2 (top) and Day 3 (bottom) including online participants on screen (not all participants photographed).}\label{fig:photos}
\end{figure}

Members of demographic groups underrepresented within the contributor community
were encouraged to apply for a place, by promoting the event to affinity groups (R-Ladies, MiR, RainbowR, AfricaR, ArabR, AsiaR, and LatinR) and by direct
communication with potential participants. Figure \ref{fig:map} shows the
geographical distribution of all 55 participants. There were 16 from Europe with 8 from the UK; 13 from North America with 12 from the USA;
7 from Asia with 5 from India; 6 from Latin America with 3 from Argentina; 5 from Africa with 2 from Nigeria; 4 from Oceania - all from New Zealand, and 3 from the Middle East.

\begin{figure}
\includegraphics[width=1\linewidth]{figures/participant_map} \caption{Choropleth showing the distribution of participants on the world map.}\label{fig:map}
\end{figure}

We have further information from the nomination form, which was completed by 40 of the 44 invited/selected contributors. Over half (25/40) self-identified as belonging to one or more underrepresented groups. Figure \ref{fig:skills} summarises the skills of these contributors as assessed by the selection committee, using data from the nomination forms. A ``contributor level'' was assigned based on self-ratings of familiarity with relevant concepts and processes, along with answers to free text questions about the applicant's experience and motivation.
The committee deliberately selected participants to achieve the balance shown in
the first plot of Figure \ref{fig:skills}: an equal number of advanced and
novice contributors, with the remainder having intermediate expertise. The second
plot summarises the potential for contribution to translations: 14 of
the selected contributors expressed a specific interest in translation; 8 more
were surmised to have potential based on country of residence. For the
remainder (22) there was no evidence as we did not ask about this explicitly in the form.

\begin{figure}
\includegraphics[width=0.5\linewidth]{figures/contributor_level} \includegraphics[width=0.5\linewidth]{figures/translator_level} \caption{Skills of external contributors as judged by the selection committee. Left: level of expertise in R contribution. Right: potential as a translator of English to other languages.}\label{fig:skills}
\end{figure}

\hypertarget{preparation}{%
\section{Preparation}\label{preparation}}

There were two sides to preparation for the sprint: gathering suitable tasks to
work on and helping participants brush up their knowledge and skills.

We collected ideas for suitable tasks via the discussion forum on the R Project Sprint 2023 GitHub
repository (\href{https://github.com/r-devel/r-project-sprint-2023/discussions/categories/ideas}{GitHub Discussions}).
This provided a space for participating members of R Core to give
feedback and for participating contributors to express an interest. Sprint
participants could propose a project by adding a page to the \href{https://contributor.r-project.org/r-project-sprint-2023/projects/}{Projects}
section of the sprint website. In the run up to the sprint, ideas and projects
were transferred to \href{https://github.com/r-devel/r-project-sprint-2023/issues}{issues on the sprint GitHub repository}
along with further last-minute ideas from core developers and members of the \href{https://contributor.r-project.org/working-group}{R Contribution Working Group (RCWG)}. This enabled participants to assign themselves to
issues and provided a way to track tasks during the sprint.

In the lead-up to the sprint, participants were
pointed to resources created by the R Core Team and the RCWG,
including the R Blog post on \href{https://blog.r-project.org/2019/10/09/r-can-use-your-help-reviewing-bug-reports/index.html}{reviewing bugs} and
the useR! 2021 tutorials on \href{https://contributor.r-project.org/tutorials/contributing-to-r/}{analysing bugs/contributing patches} and
\href{https://contributor.r-project.org/tutorials/translating-r-to-your-language/}{translating messages in R}. In addition, participants were encouraged to engage with relevant events,
in particular the \href{https://youtu.be/179x00KGd9M}{Debugging in R} tutorial run
by Shannon Pileggi for R-Ladies Remote, and the \href{https://contributor.r-project.org/events/c-book-club-2023/}{C Book Club for R Contributors} and
\href{https://contributor.r-project.org/events/office-hours/}{R Contributor Office Hours}
run by the RCWG.

By the time of the sprint, participants were expected to be able to build R
from source on the laptop they brought along. People new to this were
pointed to the \href{https://cran.r-project.org/doc/manuals/r-devel/R-admin.html}{R-admin manual},
the \href{https://contributor.r-project.org/rdevguide/}{R Dev Guide} and the
prototype \href{https://github.com/r-devel/r-dev-env/}{GitHub Codespace} which
provides a virtual environment in which to build R - this was demonstrated in
one of the contributor office hours.

\hypertarget{format}{%
\section{Format}\label{format}}

The sprint began with a hybrid evening welcome event where Martyn Plummer gave some opening remarks on contributing to the R Project, then participants split into small groups to chat with a member of R Core. An informal drinks reception then followed for in-person participants.

Each sprint day started with a kick-off session and ended with a report-back session, both hybrid to include our online participants. On the first day, R Core members gave short talks in these sessions, introducing themselves and their work for the R Project, and laying out their broad interests for work during the sprint. Beyond these introductions, participants used the daily kick-off sessions to collectively match people to tasks.

The remaining day time was spent working in small groups, sometimes arranging
hybrid meetings to discuss specific issues.

On the second evening, in-person participants enjoyed a conference dinner, whilst on the final evening the sprint participants joined the Warwick R User Group for a hybrid meetup to present progress made thus far at the sprint, this was followed by a buffet dinner for in-person participants.

\hypertarget{translation}{%
\section{Translation}\label{translation}}

Translating English messages into other languages to enhance
localization of R was a core activity at the sprint.

In 2022, Gergely Dar√≥czi set up a prototype Weblate instance \url{https://translate.rx.studio} to provide a modern, user-friendly interface for contributing translations to the R Project. Under the RCWG, he has developed and maintained this service, working with Michael Lawrence of R Core to incorporate translations submitted via Weblate into the R sources. Sprint participants created a new
set of \href{https://contributor.r-project.org/translations/}{guidelines for translators} and
a new section in the R Dev Guide on \href{https://contributor.r-project.org/rdevguide/message-translations.html\#how-to-contribute-new-translations}{How to contribute new translations}. Several new features were enabled on the Weblate instance,
including translation memory, hyperlinking to the source string location and
dedicated reviewers to approve translations. New components were added, so that
the instance not only covers base R (messages, warnings, errors and the
Windows GUI), but also the Mac GUI and recommended packages.

Figure \ref{fig:translation} gives a summary of activity on Weblate during
the sprint: around 2000 messages were changed over 14 languages. The
vast majority of this activity can be attributed to the sprint
directly or indirectly - the Hungarian translations were imported from earlier
work in 2011 and the Turkish translations were made by external contributors
after the Mac GUI component was added.

\begin{figure}
\includegraphics[width=1\linewidth]{figures/translations} \caption{Changes in the R Project components on Weblate during the three days of the sprint}\label{fig:translation}
\end{figure}

\hypertarget{code-and-documentation}{%
\section{Code and Documentation}\label{code-and-documentation}}

The remaining activity at the sprint related to code and documentation in base R.
Code issues were split into topics to help organize work groups:
accessibility, graphics, packages, statistics, translation and low-level. The
translation issues here related to infrastructure maintained by the R Core Team, as opposed to Weblate. The low-level topic was a catch-all that covered utility
functions and/or issues that required advanced technical expertise, e.g., in C.

Figure \ref{fig:issues} shows the progress of issues at the end of the sprint
and two months after. An issue is considered closed if a corresponding bug report on R's Bugzilla (\url{https://bugs.r-project.org}) was closed, if a corresponding patch was committed to base R, or if the issue was closed by an update to a CRAN package. By the end of the sprint, ten issues had been closed. Seven of these were documentation bugs, including one that was closed just before the sprint due to a participant reviewing issues in preparation. However, progress had been made on thirty-four other issues, ranging from discussing the issue, through defining a roadmap, to work in progress or proposing a patch. Two months after the sprint, another twelve issues had been closed and six more had progressed status (e.g., from roadmap to work in progress). These eighteen issues included three that were not started at the sprint, but worked on soon after as follow-up to a partial fix or due to participants reviewing the progress of sprint issues.

\begin{figure}
\includegraphics[width=1\linewidth]{figures/bug_review} \caption{Status of issues at the end of the sprint and two months after}\label{fig:issues}
\end{figure}

The low-level issues included new functionality, e.g., \href{https://bugs.r-project.org/show_bug.cgi?id=18587}{supporting custom parallel backends}; refactoring, e.g.,
\href{https://bugs.r-project.org/show_bug.cgi?id=18600}{improving the speed of scalar random number generation}; improving behaviour, e.g., \href{https://bugs.r-project.org/show_bug.cgi?id=16752}{better formating of complex numbers}, and bug fixes, e.g.~\href{https://bugs.r-project.org/show_bug.cgi?id=17871}{managing long names when creating tarballs}.

Participants working on documentation began by triaging all open documentation bugs on Bugzilla to identify ones that could be closed without fixing, or ones that appeared straight-forward to fix, hence the high closure rate for these issues. Some closed bugs had been open for several years.

Package-related issues included adding \href{https://bugs.r-project.org/show_bug.cgi?id=18576}{support for defining vignette order}, \href{https://github.com/r-devel/r-project-sprint-2023/issues/55}{improving messages to CRAN maintainers}, and \href{https://github.com/r-devel/r-project-sprint-2023/issues/78}{caching installed packages}.

Translation-related issues included identifying \href{https://bugs.r-project.org/show_bug.cgi?id=17819}{untranslated strings in the
R source files}, and creating
a roadmap towards \href{https://github.com/r-devel/r-project-sprint-2023/issues/35}{internationalization of help pages}. The R Consortium are funding a project by participants Elio Campitelli and Renata Hirota for the first step on this roadmap.

Statistics issues included \href{https://bugs.r-project.org/show_bug.cgi?id=14359}{improving the behaviour of \texttt{t.test.formula()} and \texttt{wilcox.test.formula()} for paired tests} and enhancing
\texttt{sample.int()} for unequal probability sampling, for which a \href{https://github.com/dickoa/sondage}{prototype package} was developed after the sprint for testing.

Accessibility focused on two issues faced by screenreader users: logging base
graphics and logging R sessions. Functions resulting from this work are now
implemented in \CRANpkg{BrailleR}.

Finally there were two issues related to graphics, one fixed during the sprint
implementing \href{https://github.com/r-devel/r-project-sprint-2023/issues/74}{3-digit hex colors} and one
larger project on \href{https://github.com/r-devel/r-project-sprint-2023/issues/43}{adding alpha masks to the Quartz graphics device}.

There were more issues prepared for the sprint than are summarised here, but
they were not taken up at the sprint. In some cases there was insufficient support from R Core to pursue the idea, or it was considered out of scope for the sprint, or there were no available participants with relevant skills and/or bandwidth to take the idea forward. Often participants were interested in multiple issues and were encouraged to favour issues/topics where larger group discussions were taking
place, to take advantage of everyone being together.

\hypertarget{participant-experience}{%
\section{Participant experience}\label{participant-experience}}

As well as aiming to make progress on contributions to the R Project, the
sprint was intended to develop participants' knowledge and experience in
contribution and motivate them to continue contributing after the sprint.
We further looked to improve visibility and networking between
the R Core Team and the R community (as represented by sprint
participants).

Figure \ref{fig:activities} summarises the activities engaged in at the sprint, for 32 out of 44 external contributors that responded to a post-sprint survey.
Around two-thirds were involved in working on code issues and around a third worked on documentation and/or translation. Scoping work was also an important activity, in which a third of contributors engaged.

\begin{figure}
\includegraphics[width=1\linewidth]{figures/sprint_activities} \caption{Activities of external contributors, based on 32 responses to the participant survey.}\label{fig:activities}
\end{figure}

Figure \ref{fig:firsts} summarises the activities that contributors engaged in for the first time either during the sprint, or to prepare for or follow up on work done at the sprint. For around two-thirds of contributors it was the first time they had discussed a bug or issue with an R Core member, whether online or in person. About a third commented on Bugzilla for the first time and around a quarter posted their first patch. Around half the contributors built R from source for the first time, either on their own laptop or in the GitHub Codespace (or both) and for about half the contributors it was their first time working on R, C, or Rd (R documentation) files in base R.

\begin{figure}
\includegraphics[width=1\linewidth]{figures/first_activities} \caption{R core interactions and R contribution activities that external contributors engaged in for the first time, based on 32 responses to participant survey.}\label{fig:firsts}
\end{figure}

\hypertarget{organizers-and-sponsors}{%
\section{Organizers and sponsors}\label{organizers-and-sponsors}}

The organization of the sprint was led by Heather Turner, as part of a
research fellowship funded by the UK Engineering and Physical Sciences Research Council. This fellowship provided core funding and was supplemented by additional sponsorship:

\begin{itemize}
\tightlist
\item
  Platinum Sponsor (R Core travel): the R Foundation.
\item
  Gold sponsors (evening events, participant travel): the R Consortium; the Centre for Research in Statistical Methodology, University of Warwick, and Posit.
\item
  Silver Sponsors (participant travel): Seminar for Statistics, ETH Zurich; Rx Studio; The Prostate Cancer Clinical Trials Consortium, and Google.
\end{itemize}

\noindent
This sponsorship funded travel, accommodation and subsistence for all participants.

Martyn Plummer and Ella Kaye completed the local organizer team. The selection committee was made up of Heather, Ella, and Gabe Becker of the RCWG.

Members of the RCWG helped with the planning, especially Gabe Becker who also helped gather issues in the run up to the sprint.

\hypertarget{summary}{%
\section{Summary}\label{summary}}

R Project Sprint 2023 was a very collaborative event, where external contributors had a unique opportunity to work closely with R Core members. Good progress was made across a broad range of issues with continued impact after the sprint. The feedback from both R Core and external participants was very positive, e.g.,

\begin{quote}
Thank you for organizing an incredible sprint and creating space for newcomers
\end{quote}

\begin{quote}
There were many different parts that contributed so well to
make it very productive, envigourating, and motivating
\end{quote}

\begin{quote}
From arrival to departure, everything was seamless and I had a great time discovering what it takes to maintain R.
\end{quote}

\begin{quote}
I'm exhausted but also super excited by all the work we did and that I take as homework.
\end{quote}

Several participants - as well as R community members that could not attend this time - asked when we would hold a repeat event. Finding funding for \textasciitilde50 people from around the world to attend a 3-day sprint is quite a challenge. So in the short term we plan to run 1-day events in collaboration with in-person conferences. Whilst this will limit the scope of tasks that can be tackled, we can benefit from people already travelling for the conference, with conference scholarship schemes helping to support inclusion.

\hypertarget{links}{%
\section{Links}\label{links}}

\begin{itemize}
\tightlist
\item
  Sprint website: \url{https://contributor.r-project.org/r-project-sprint-2023/}
\item
  GitHub repository: \url{https://github.com/r-devel/r-project-sprint-2023}
\end{itemize}


\address{%
Heather Turner\\
University of Warwick\\%
Coventry, United Kingdom\\
%
\url{https://warwick.ac.uk/heatherturner}\\%
\textit{ORCiD: \href{https://orcid.org/0000-0002-1256-3375}{0000-0002-1256-3375}}\\%
\href{mailto:h.turner.1@warwick.ac.uk}{\nolinkurl{h.turner.1@warwick.ac.uk}}%
}

\address{%
Gabriel Becker\\
Independent consultant\\%
San Francisco, USA\\
%
%
%
\href{mailto:gabembecker@gmail.com}{\nolinkurl{gabembecker@gmail.com}}%
}
