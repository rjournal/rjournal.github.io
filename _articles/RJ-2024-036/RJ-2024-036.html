<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

<style>
  div.csl-bib-body { }
  div.csl-entry {
    clear: both;
    }
  .hanging div.csl-entry {
    margin-left:2em;
    text-indent:-2em;
  }
  div.csl-left-margin {
    min-width:2em;
    float:left;
  }
  div.csl-right-inline {
    margin-left:2em;
    padding-left:1em;
  }
  div.csl-indent {
    margin-left: 2em;
  }
</style>

  <!--radix_placeholder_meta_tags-->
  <title>Validating and Extracting Information from National Identification Numbers in R: The Case of Finland and Sweden</title>

  <meta property="description" itemprop="description" content="National identification numbers (NIN) and similar identification code systems are widely used for uniquely identifying individuals and organizations in Finland, Sweden, and many other countries. To increase the general understanding of such techniques of identification, openly available methods and tools for NIN analysis and validation are needed. The hetu and sweidnumbr R packages provide functions for extracting embedded information, checking the validity, and generating random but valid numbers in the context of Finnish and Swedish NINs and other identification codes. In this article, we demonstrate these functions from both packages and provide theoretical context and motivation on the importance of the subject matter. Our work contributes to the growing toolkit of standardized methods for computational social science research, epidemiology, demographic studies, and other register-based inquiries."/>

  <link rel="license" href="https://creativecommons.org/licenses/by/4.0/"/>

  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2025-05-27"/>
  <meta property="article:created" itemprop="dateCreated" content="2025-05-27"/>
  <meta name="article:author" content="Pyry Kantanen"/>
  <meta name="article:author" content="Erik Bülow"/>
  <meta name="article:author" content="Aleksi Lahtinen"/>
  <meta name="article:author" content="Måns Magnusson"/>
  <meta name="article:author" content="Jussi Paananen"/>
  <meta name="article:author" content="Leo Lahti"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Validating and Extracting Information from National Identification Numbers in R: The Case of Finland and Sweden"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="National identification numbers (NIN) and similar identification code systems are widely used for uniquely identifying individuals and organizations in Finland, Sweden, and many other countries. To increase the general understanding of such techniques of identification, openly available methods and tools for NIN analysis and validation are needed. The hetu and sweidnumbr R packages provide functions for extracting embedded information, checking the validity, and generating random but valid numbers in the context of Finnish and Swedish NINs and other identification codes. In this article, we demonstrate these functions from both packages and provide theoretical context and motivation on the importance of the subject matter. Our work contributes to the growing toolkit of standardized methods for computational social science research, epidemiology, demographic studies, and other register-based inquiries."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Validating and Extracting Information from National Identification Numbers in R: The Case of Finland and Sweden"/>
  <meta property="twitter:description" content="National identification numbers (NIN) and similar identification code systems are widely used for uniquely identifying individuals and organizations in Finland, Sweden, and many other countries. To increase the general understanding of such techniques of identification, openly available methods and tools for NIN analysis and validation are needed. The hetu and sweidnumbr R packages provide functions for extracting embedded information, checking the validity, and generating random but valid numbers in the context of Finnish and Swedish NINs and other identification codes. In this article, we demonstrate these functions from both packages and provide theoretical context and motivation on the importance of the subject matter. Our work contributes to the growing toolkit of standardized methods for computational social science research, epidemiology, demographic studies, and other register-based inquiries."/>

  <!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
  <meta name="citation_title" content="Validating and Extracting Information from National Identification Numbers in R: The Case of Finland and Sweden"/>
  <meta name="citation_fulltext_html_url" content="https://doi.org/10.32614/RJ-2024-036"/>
  <meta name="citation_pdf_url" content="RJ-2024-036.pdf"/>
  <meta name="citation_volume" content="16"/>
  <meta name="citation_issue" content="3"/>
  <meta name="citation_doi" content="10.32614/RJ-2024-036"/>
  <meta name="citation_journal_title" content="The R Journal"/>
  <meta name="citation_issn" content="2073-4859"/>
  <meta name="citation_firstpage" content="1"/>
  <meta name="citation_fulltext_world_readable" content=""/>
  <meta name="citation_online_date" content="2025/05/27"/>
  <meta name="citation_publication_date" content="2025/05/27"/>
  <meta name="citation_author" content="Pyry Kantanen"/>
  <meta name="citation_author" content="Erik Bülow"/>
  <meta name="citation_author" content="Aleksi Lahtinen"/>
  <meta name="citation_author" content="Måns Magnusson"/>
  <meta name="citation_author" content="Jussi Paananen"/>
  <meta name="citation_author" content="Leo Lahti"/>
  <!--/radix_placeholder_meta_tags-->
  
  <meta name="citation_reference" content="citation_title=Finnish health and social welfare registers in epidemiological research;citation_volume=14;citation_author=Mika Gissler;citation_author=Jari Haukka"/>
  <meta name="citation_reference" content="citation_title=A code for care and control: The PIN as an operator of interoperability in the nordic welfare state;citation_volume=35;citation_author=Marja Alastalo;citation_author=Ilpo Helén"/>
  <meta name="citation_reference" content="citation_title=The Sociology of Personal Identification;citation_author=Jordan Brensinger;citation_author=Gil Eyal"/>
  <meta name="citation_reference" content="citation_title=The personal identity code;citation_author=The personal identity code"/>
  <meta name="citation_reference" content="citation_title=A short history of national identification numbering in Iceland;citation_volume=1;citation_issn=1670-7796;citation_author=Ian Watson"/>
  <meta name="citation_reference" content="citation_title=Personal identity number;citation_publisher=Population; Welfare Statistics;citation_author=Personal identity number"/>
  <meta name="citation_reference" content="citation_title=Från bläckpenna till datorhjärna;citation_publisher=Riksskatteverket;citation_author=Åke Johansson"/>
  <meta name="citation_reference" content="citation_title=Henkilötunnus – ihmisten koodaaja;citation_author=Tuomas Salste"/>
  <meta name="citation_reference" content="citation_title=Numbered individuals, digital traditions, and individual rights: civil status registration in Denmark 1645 to 2010;citation_volume=28;citation_author=Karl Jakob Krogness"/>
  <meta name="citation_reference" content="citation_title=50-årsjubilant med behov for oppgradering;citation_volume=2015;citation_author=Jan Furseth;citation_author=Olav Ljones"/>
  <meta name="citation_reference" content="citation_title=Personnummeret i CPR-systemet;citation_author=Personnummeret i CPR-systemet"/>
  <meta name="citation_reference" content="citation_title=Udviklingen på CPR-området i de seneste 20-25 år frem til 2009;citation_publisher=CPR-kontoret;citation_author=Torben Jerlach"/>
  <meta name="citation_reference" content="citation_title=Preliminary population statistics [online publication];citation_publisher=Statistics Finland;citation_author=Preliminary population statistics [online publication]"/>
  <meta name="citation_reference" content="citation_title=SCB statistikdatabasen. [Elektronisk resurs] : Statistical database;citation_publisher=Statistiska centralbyrån;citation_author=SCB statistikdatabasen. [Elektronisk resurs] : Statistical database"/>
  <meta name="citation_reference" content="citation_title=Dates and times made easy with lubridate;citation_volume=40;citation_author=Garrett Grolemund;citation_author=Hadley Wickham"/>
  <meta name="citation_reference" content="citation_title=Personnummer: SKV 704 ed. 8;citation_author=Personnummer: SKV 704 ed. 8"/>
  <meta name="citation_reference" content="citation_title=Wrangling with non-standard data;citation_volume=2612;citation_author=E Mäkelä;citation_author=K Lagus;citation_author=L Lahti;citation_author=T Säily;citation_author=M Tolonen;citation_author=M Hämäläinen;citation_author=S Kaislaniemi;citation_author=T Nevalainen"/>
  <meta name="citation_reference" content="citation_title=Redesign of the personal identity code system lays the foundation for development of digital services;citation_author=Redesign of the personal identity code system lays the foundation for development of digital services"/>
  <meta name="citation_reference" content="citation_title=Reform of the separators in the personal identity code;citation_author=Reform of the separators in the personal identity code"/>
  <meta name="citation_reference" content="citation_title=Legislative proposals on digital identity and redesigning the system of personal identity codes will not be considered during this parliamentary session;citation_author= Valtiovarainministeriö"/>
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","date","description","draft","author","type","output","bibliography","date_received","volume","issue","slug","journal","pdf_url","citation_url","doi","creative_commons","packages","CTV","csl"]}},"value":[{"type":"character","attributes":{},"value":["Validating and Extracting Information from National Identification Numbers in R: The Case of Finland and Sweden"]},{"type":"character","attributes":{},"value":["2025-05-27"]},{"type":"character","attributes":{},"value":["National identification numbers (NIN) and similar identification code systems are widely used for uniquely identifying individuals and organizations in Finland, Sweden, and many other countries. To increase the general understanding of such techniques of identification, openly available methods and tools for NIN analysis and validation are needed. The hetu and sweidnumbr R packages provide functions for extracting embedded information, checking the validity, and generating random but valid numbers in the context of Finnish and Swedish NINs and other identification codes. In this article, we demonstrate these functions from both packages and provide theoretical context and motivation on the importance of the subject matter. Our work contributes to the growing toolkit of standardized methods for computational social science research, epidemiology, demographic studies, and other register-based inquiries."]},{"type":"logical","attributes":{},"value":[false]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","address","orcid_id","email"]}},"value":[{"type":"character","attributes":{},"value":["Pyry Kantanen"]},{"type":"character","attributes":{},"value":["Department of Computing \\newline PO Box 20014 University of Turku \\newline Finland"]},{"type":"character","attributes":{},"value":["0000-0003-2853-2765"]},{"type":"character","attributes":{},"value":["pyry.kantanen@utu.fi"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","address","email","orcid_id"]}},"value":[{"type":"character","attributes":{},"value":["Erik Bülow"]},{"type":"character","attributes":{},"value":["Department of Orthopaedics, Institute of Clinical Sciences \\newline Sahlgrenska Academy at University of Gothenburg \\newline Sweden"]},{"type":"character","attributes":{},"value":["erik.bulow@gu.se"]},{"type":"character","attributes":{},"value":["0000-0002-9973-456X"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","address","email","orcid_id"]}},"value":[{"type":"character","attributes":{},"value":["Aleksi Lahtinen"]},{"type":"character","attributes":{},"value":["Deparment of computing \\newline University of Turku \\newline Finland"]},{"type":"character","attributes":{},"value":["aleksi.l.lahtinen@utu.fi"]},{"type":"character","attributes":{},"value":["0009-0009-9640-5187"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","address","email","orcid_id"]}},"value":[{"type":"character","attributes":{},"value":["Måns Magnusson"]},{"type":"character","attributes":{},"value":["Department of Statistics \\newline Uppsala University \\newline Sweden"]},{"type":"character","attributes":{},"value":["mans.magnusson@statistik.uu.se"]},{"type":"character","attributes":{},"value":["0000-0002-0296-2719"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","address","email","orcid_id"]}},"value":[{"type":"character","attributes":{},"value":["Jussi Paananen"]},{"type":"character","attributes":{},"value":["Institute of Biomedicine \\newline University of Eastern Finland \\newline Finland"]},{"type":"character","attributes":{},"value":["jussi.paananen@uef.fi"]},{"type":"character","attributes":{},"value":["0000-0001-5100-4907"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","address","email","orcid_id"]}},"value":[{"type":"character","attributes":{},"value":["Leo Lahti"]},{"type":"character","attributes":{},"value":["Department of computing \\newline PO Box 20014 University of Turku \\newline Finland"]},{"type":"character","attributes":{},"value":["leo.lahti@utu.fi"]},{"type":"character","attributes":{},"value":["0000-0001-5537-637X"]}]}]},{"type":"character","attributes":{},"value":["package"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["rjtools::rjournal_pdf_article","distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","citation_package"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["natbib"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"character","attributes":{},"value":["lahti.bib"]},{"type":"character","attributes":{},"value":["2022-06-20"]},{"type":"integer","attributes":{},"value":[16]},{"type":"integer","attributes":{},"value":[3]},{"type":"character","attributes":{},"value":["RJ-2024-036"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","issn","firstpage","lastpage"]}},"value":[{"type":"character","attributes":{},"value":["The R Journal"]},{"type":"character","attributes":{},"value":["2073-4859"]},{"type":"double","attributes":{},"value":[1]},{"type":"NULL"}]},{"type":"character","attributes":{},"value":["RJ-2024-036.pdf"]},{"type":"character","attributes":{},"value":["https://doi.org/10.32614/RJ-2024-036"]},{"type":"character","attributes":{},"value":["10.32614/RJ-2024-036"]},{"type":"character","attributes":{},"value":["CC BY"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["cran","bioc"]}},"value":[{"type":"character","attributes":{},"value":["hetu","sweidnumbr","numbersBR","cprr","generator","lubridate"]},{"type":"list","attributes":{},"value":[]}]},{"type":"character","attributes":{},"value":["ReproducibleResearch","TimeSeries"]},{"type":"character","attributes":{},"value":["/home/hyndman/R/x86_64-pc-linux-gnu-library/4.5/rjtools/rjournal.csl"]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["lahti.bib","lahti.tex","RJ-2024-036.pdf","RJ-2024-036.zip","RJwrapper.tex"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
    font-size: 100%;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  hr.section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    margin: 0px;
  }


  d-byline {
    border-top: none;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
    border-top: none;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  /* tweak for Pandoc numbered line within distill */
  d-article pre.numberSource code > span {
      left: -2em;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // separator
    var separator = '<hr class="section-separator" style="clear: both"/>';
    // prepend separator above appendix
    $('.d-byline').before(separator);
    $('.d-article').before(separator);

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme, except when numbering line
    // in code chunk
    $('pre:not(.numberLines) code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        var author_name = front_matter.authors[i].author
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', author_name ? 'ORCID ID for ' + author_name : 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        const citeChild = $(this).children()[0]
        // Do not process if @xyz has been used without escaping and without bibliography activated
        // https://github.com/rstudio/distill/issues/466
        if (citeChild === undefined) return true

        if (citeChild.nodeName == "D-FOOTNOTE") {
          var fn = citeChild
          $(this).html(fn.shadowRoot.querySelector("sup"))
          $(this).id = fn.id
          fn.remove()
        }
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          // Could use CSS.escape too here, we insure backward compatibility in navigator
          return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // fix footnotes in tables (#411)
      // replacing broken distill.pub feature
      $('table d-footnote').each(function() {
        // we replace internal showAtNode methode which is triggered when hovering a footnote
        this.hoverBox.showAtNode = function(node) {
          // ported from https://github.com/distillpub/template/pull/105/files
          calcOffset = function(elem) {
              let x = elem.offsetLeft;
              let y = elem.offsetTop;
              // Traverse upwards until an `absolute` element is found or `elem`
              // becomes null.
              while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                  x += elem.offsetLeft;
                  y += elem.offsetTop;
              }

              return { left: x, top: y };
          }
          // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
          const bbox = node.getBoundingClientRect();
          const offset = calcOffset(node);
          this.show([offset.left + bbox.width, offset.top + bbox.height]);
        }
      })

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      // ignore leaflet img layers (#106)
      figures = figures.filter(':not(img[class*="leaflet"])')
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="RJ-2024-036_files/header-attrs-2.29/header-attrs.js"></script>
  <script src="RJ-2024-036_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="RJ-2024-036_files/popper-2.6.0/popper.min.js"></script>
  <link href="RJ-2024-036_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="RJ-2024-036_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="RJ-2024-036_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="RJ-2024-036_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="RJ-2024-036_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="RJ-2024-036_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="RJ-2024-036_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->
  <script>
    $(function() {
      console.log("Starting...")

      // Mathjax config (add automatic linebreaks when supported)
      // MathJax = {
      //    tex: {
      //        inlineMath: [['$', '$'], ['\\(', '\\)']],
      //        displayMath: [['$$', '$$'], ['\\[', '\\]']],
      //        tags: 'ams',
      //        multline: true,
      //    },
      //    options: {
      //        linebreaks: { automatic: true },
      //    },
      // };

      // Always show Published - distill hides it if not set
      function show_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'visible');
      }

      show_byline_column('Published')

      // tweak function
      var rmd_meta = JSON.parse($("#radix-rmarkdown-metadata").html());
      function get_meta(name, meta) {
        var ind = meta.attributes.names.value.findIndex((e) => e == name)
        var val = meta.value[ind]
        if (val.type != 'list') {
          return val.value.toString()
        }
        return val
      }

      // tweak description
      // Add clickable tags
      const slug = get_meta('slug', rmd_meta)
      const cite_url = get_meta('citation_url', rmd_meta)

      var title = $("d-title").text

      const buttons = $('<div class="dt-tags" style="grid-column: page;">')
      buttons.append('<a href="#citation" class="dt-tag"><i class="fas fa-quote-left"></i> Cite</a>')
      buttons.append('<a href="' + slug + '.pdf" class="dt-tag"><i class="fas fa-file-pdf"></i> PDF</a>')
      buttons.append('<a href="' + slug + '.zip" class="dt-tag"><i class="fas fa-file-zipper"></i> Supplement</a>')

      // adds Abstract: in front of the first <p> in the title section --
      // unless it happens to be the subtitle (FIXME: this is a bad hack - can't distill do this?)
      var tpar = $("d-title p:not(:empty)").filter(function() {
        return !$(this).hasClass("subtitle");
      }).first();
      if (tpar) {
        const abstract = $('<d-abstract>')
        abstract.append('<b>Abstract:</b><br>')
        abstract.append(tpar) // Move description to d-abstract
        $("d-title p:empty").remove() // Remove empty paragraphs after title
        abstract.append(buttons)
        abstract.insertAfter($('d-title')) // Add abstract section after title */
      }

      // tweak by-line
      var byline = $("d-byline div.byline")
      ind = rmd_meta.attributes.names.value.findIndex((e) => e == "journal")
      const journal = get_meta('journal', rmd_meta)
      const volume = get_meta('volume', rmd_meta)
      const issue = get_meta('issue', rmd_meta)
      const jrtitle = get_meta('title', journal)
      const year = ((jrtitle == "R News") ? 2000 : 2008) + parseInt(volume)
      const firstpage = get_meta('firstpage', journal)
      const lastpage = get_meta('lastpage', journal)
      byline.append('<div class="rjournal grid">')
      $('div.rjournal').append('<h3>Volume</h3>')
      $('div.rjournal').append('<h3>Pages</h3>')
      $('div.rjournal').append('<a class="volume" href="../../issues/'+year+'-'+issue+'">'+volume+'/'+issue+'</a>')
      $('div.rjournal').append('<p class="pages">'+firstpage+' - '+lastpage+'</p>')

      const received_date = new Date(get_meta('date_received', rmd_meta))
      byline.find('h3:contains("Published")').parent().append('<h3>Received</h3><p>'+received_date.toLocaleDateString('en-US', {month: 'short'})+' '+received_date.getDate()+', '+received_date.getFullYear()+'</p>')

    })
  </script>

  <style>
      /*
    .nav-dropdown-content .nav-dropdown-header {
      text-transform: lowercase;
    }
    */

    d-byline .byline {
      grid-template-columns: 2fr 2fr 2fr 2fr;
    }

    d-byline .rjournal {
      grid-column-end: span 2;
      grid-template-columns: 1fr 1fr;
      margin-bottom: 0;
    }

    d-title h1, d-title p, d-title figure,
    d-abstract p, d-abstract b {
      grid-column: page;
    }

    d-title .dt-tags {
      grid-column: page;
    }

    .dt-tags .dt-tag {
      text-transform: lowercase;
    }

    d-article h1 {
      line-height: 1.1em;
    }

    d-abstract p, d-article p {
      text-align: justify;
    }

    @media(min-width: 1000px) {
      .d-contents.d-contents-float {
        justify-self: end;
      }

      nav.toc {
        border-right: 1px solid rgba(0, 0, 0, 0.1);
        border-right-width: 1px;
        border-right-style: solid;
        border-right-color: rgba(0, 0, 0, 0.1);
      }
    }

    .posts-list .dt-tags .dt-tag {
      text-transform: lowercase;
    }

    @keyframes highlight-target {
      0% {
        background-color: #ffa;
      }
      66% {
        background-color: #ffa;
      }
      100% {
        background-color: none;
      }
    }

    d-article :target, d-appendix :target {
       animation: highlight-target 3s;
    }

    .header-section-number {
      margin-right: 0.5em;
    }
    
    d-appendix .citation-appendix,
    .d-appendix .citation-appendix {
      color: rgb(60, 60, 60);
    }

    d-article h2 {
      border-bottom: 0px solid rgba(0, 0, 0, 0.1);
      padding-bottom: 0rem;
    }
    d-article h3 {
      font-size: 20px;
    }
    d-article h4 {
      font-size: 18px;
      text-transform: none;
    }

    @media (min-width: 1024px) {
      d-article h2 {
        font-size: 32px;
      }
      d-article h3 {
        font-size: 24px;
      }
      d-article h4 {
        font-size: 20px;
      }
    }
  </style>


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Validating and Extracting Information from National Identification Numbers in R: The Case of Finland and Sweden","description":"National identification numbers (NIN) and similar identification code systems are widely used for uniquely identifying individuals and organizations in Finland, Sweden, and many other countries. To increase the general understanding of such techniques of identification, openly available methods and tools for NIN analysis and validation are needed. The hetu and sweidnumbr R packages provide functions for extracting embedded information, checking the validity, and generating random but valid numbers in the context of Finnish and Swedish NINs and other identification codes. In this article, we demonstrate these functions from both packages and provide theoretical context and motivation on the importance of the subject matter. Our work contributes to the growing toolkit of standardized methods for computational social science research, epidemiology, demographic studies, and other register-based inquiries.","doi":"10.32614/RJ-2024-036","authors":[{"author":"Pyry Kantanen","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":"0000-0003-2853-2765"},{"author":"Erik Bülow","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":"0000-0002-9973-456X"},{"author":"Aleksi Lahtinen","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":"0009-0009-9640-5187"},{"author":"Måns Magnusson","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":"0000-0002-0296-2719"},{"author":"Jussi Paananen","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":"0000-0001-5100-4907"},{"author":"Leo Lahti","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":"0000-0001-5537-637X"}],"publishedDate":"2025-05-27T00:00:00.000+10:00","citationText":"Kantanen, et al., 2025"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Validating and Extracting Information from National Identification Numbers in R: The Case of Finland and Sweden</h1>

<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p>National identification numbers (NIN) and similar identification code systems are widely used for uniquely identifying individuals and organizations in Finland, Sweden, and many other countries. To increase the general understanding of such techniques of identification, openly available methods and tools for NIN analysis and validation are needed. The hetu and sweidnumbr R packages provide functions for extracting embedded information, checking the validity, and generating random but valid numbers in the context of Finnish and Swedish NINs and other identification codes. In this article, we demonstrate these functions from both packages and provide theoretical context and motivation on the importance of the subject matter. Our work contributes to the growing toolkit of standardized methods for computational social science research, epidemiology, demographic studies, and other register-based inquiries.</p>
</div>

<div class="d-byline">
  Pyry Kantanen  
  
,   Erik Bülow  
  
,   Aleksi Lahtinen  
  
,   Måns Magnusson  
  
,   Jussi Paananen  
  
,   Leo Lahti  
  
<br/>2025-05-27
</div>

<div class="d-article">
<h2 data-number="1" id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>Technical systems for identifying people, organizations, places and other objects are an important but often overlooked aspect of governance and management tools in modern societies <span class="citation" data-cites="dodge2005">(<a href="#ref-dodge2005" role="doc-biblioref">Dodge and Kitchin 2005</a>)</span>. Universal and persistent identification numbering systems for natural persons are vital for facilitating research activities that combine data from different sources, for example in the fields of epidemiology, population studies and social research <span class="citation" data-cites="gissler2004">(<a href="#ref-gissler2004" role="doc-biblioref">Gissler and Haukka 2004</a>)</span>. Outside the field of academic research, universal identifiers for natural persons enable work in a multi-disciplinary and multi-agency context due to greater <em>administrative fluency</em> and <em>bureaucratic effectiveness</em> <span class="citation" data-cites="alastalo2022">(<a href="#ref-alastalo2022" role="doc-biblioref">Alastalo and Helén 2022</a>)</span>. This may be useful, for example, in tackling wicked social problems that require cooperation from professionals from multiple fields, such as social workers, psychologists, police, and health care professionals.</p>
<p>The <a href="https://cran.r-project.org/package=hetu">hetu</a> and <a href="https://cran.r-project.org/package=sweidnumbr">sweidnumbr</a> R packages provide open tools for handling and extracting data from identification codes for natural persons and juridical persons in the national contexts of Finland and Sweden. These tools can also be used to handle Finnish and Swedish Business ID codes. Prior R packages with similar scope include <a href="https://cran.r-project.org/package=numbersBR">numbersBR</a> for Brazilian identity numbers for individuals, vehicles, and organizations <span class="citation" data-cites="numbersbr">(<a href="#ref-numbersbr" role="doc-biblioref">Freitas 2018</a>)</span>, <a href="https://cran.r-project.org/package=cprr">cprr</a> for Danish “Det Centrale Personregister” (CPR) numbers <span class="citation" data-cites="cprr">(<a href="#ref-cprr" role="doc-biblioref">Anhøj 2019</a>)</span>, and <a href="https://cran.r-project.org/package=generator">generator</a> for generating various types of Personally Identifiable Information (PII), such as fake e-mail addresses, names and the United States Social Security Numbers <span class="citation" data-cites="generator">(<a href="#ref-generator" role="doc-biblioref">Hendricks 2015</a>)</span>.</p>
<p>Identification code generators and validators are not a novel concept. In the case of Finland, the handling of identification codes can be seen as a common entry-level task for new computer science students to familiarize themselves with regular expressions, handling dates, string subsetting and similar concepts, and examples in various programming languages can easily be found online. However, in research there is a need for standardized, well documented and reproducible methods. These requirements are the main reason for developing R packages for handling Finnish and Swedish identification codes. The packages ensure reproducibility and transparency while also offering user manuals, semantic versioning and documentation of changes between versions <span class="citation" data-cites="wickham2024">(as outlined by <a href="#ref-wickham2024" role="doc-biblioref">Wickham and Bryan 2024</a>)</span>.</p>
<h2 data-number="2" id="features-of-identification-number-systems"><span class="header-section-number">2</span> Features of identification number systems</h2>
<p>Reliably keeping track of individuals, organizations, objects and flows in a given territory has long been seen as an important feature of modern governance <span class="citation" data-cites="dodge2005">(<a href="#ref-dodge2005" role="doc-biblioref">Dodge and Kitchin 2005</a>)</span>. <span class="citation" data-cites="foucault7778">Foucault (<a href="#ref-foucault7778" role="doc-biblioref">2009 115–120</a>)</span> observed a historical pattern where practices first implemented in disciplinary institutions, such as prisons, military units and schools have spread to influence whole societies. We can see the results of this development today when alphanumeric identifiers originally assigned to prisoners, soldiers and students have been transformed into nationwide identification code systems around the world. Differences in legal, political and historical frameworks in different countries have affected how these systems are implemented in practice, causing heterogeneity for example in identification system designs across Europe <span class="citation" data-cites="otjacques2007">(<a href="#ref-otjacques2007" role="doc-biblioref">Otjacques et al. 2007</a>)</span>.</p>
<p>This heterogeneity and linguistic differences seem to contribute to variance in the terminology used when referring to identification code systems. <em>Unique identifier</em> (UID) is an umbrella term that can be used to refer to unique identifiers for all sorts of things, from books (ISBN), chemicals (CAS) and legal entities (LEI) to anything imaginable <span class="citation" data-cites="dodge2005">(see <a href="#ref-dodge2005" role="doc-biblioref">Dodge and Kitchin 2005</a>)</span>. In this paper, we are mainly interested in unique identifiers for natural persons and juridical persons.</p>
<p>Names such as <em>personal identification code</em> <span class="citation" data-cites="dodge2005">(<a href="#ref-dodge2005" role="doc-biblioref">Dodge and Kitchin 2005</a>)</span>, <em>personal identity number</em> <span class="citation" data-cites="alastalo2022">(<a href="#ref-alastalo2022" role="doc-biblioref">Alastalo and Helén 2022</a>)</span> and <em>single identification number</em> (SIN) <span class="citation" data-cites="otjacques2007">(<a href="#ref-otjacques2007" role="doc-biblioref">Otjacques et al. 2007</a>)</span> are used in literature as generic terms. Personal identification codes can sometimes be confused with <em>personal identification numbers</em> (PINs) that refer to numeric or alphanumeric passcodes used for authentication, for example, to withdraw cash or open a locked mobile phone. On the other hand names such as <em>personal identity code</em> (PIC) <span class="citation" data-cites="hetudvv sund2012">(<a href="#ref-sund2012" role="doc-biblioref">Sund 2012</a>; <a href="#ref-hetudvv" role="doc-biblioref">Digital and Population Data Services Agency 2022b</a>)</span>, name number <span class="citation" data-cites="watson2010">(<a href="#ref-watson2010" role="doc-biblioref">Watson 2010</a>)</span> and personal number <span class="citation" data-cites="scb2016">(<a href="#ref-scb2016" role="doc-biblioref">Statistics Sweden 2016</a>)</span> are used in official translations to refer to national implementations of NINs; in the mentioned cases, Finnish, Icelandic and Swedish NINs, respectively. Due to <em>function creep</em> <span class="citation" data-cites="brensinger2021 alastalo2022">(see <a href="#ref-brensinger2021" role="doc-biblioref">Brensinger and Eyal 2021</a>; <a href="#ref-alastalo2022" role="doc-biblioref">Alastalo and Helén 2022</a>)</span> or <em>control creep</em> <span class="citation" data-cites="dodge2005">(see <a href="#ref-dodge2005" role="doc-biblioref">Dodge and Kitchin 2005</a>)</span>, historically sector-specific identifiers may also be used as a <em>de facto</em> NIN. This is the case with the US <em>social security number</em> (SSN) <span class="citation" data-cites="brensinger2021">(<a href="#ref-brensinger2021" role="doc-biblioref">Brensinger and Eyal 2021</a>)</span> and Finnish employee pension card numbers and social security codes <span class="citation" data-cites="alastalo2022">(<a href="#ref-alastalo2022" role="doc-biblioref">Alastalo and Helén 2022</a>)</span>.</p>
<p>For clarity’s sake, we will be using the generic term <em>national identification number</em> (NIN) to refer to all identification number systems and their country-specific implementations for natural persons, in this case, the Finnish <em>personal identity code</em> and the Swedish <em>personal number</em>. For organizations, we will use the generic term <em>organization identifier</em> when discussing Finnish <em>business IDs</em> (BID) and Swedish <em>organizational identity numbers</em> (OIN) / <em>Swedish organizational numbers</em> (SON).</p>
<p>All identification systems should strive to be both <em>unique</em> and <em>self-same</em> over time. Self-sameness refers to a degree of immutability that allows organizations to identify and reidentify a person over time. A combination of attributes such as name, occupation and address would probably form a unique identifier even in relatively large crowds, but such attributes might not stay the same over time. <span class="citation" data-cites="brensinger2021">(<a href="#ref-brensinger2021" role="doc-biblioref">Brensinger and Eyal 2021</a>)</span>.</p>
<p>According to <span class="citation" data-cites="Alterman2003">Alterman (<a href="#ref-Alterman2003" role="doc-biblioref">2003</a>)</span>, a distinction can be made between <em>biocentric data</em> and <em>indexical data</em>. The former is biometric data connected to the individual’s physical features whereas the latter has no distinguishable relation to the individual, physiologically, psychologically, or otherwise. An example of biocentric data could be a fingerprint or an iris scan and an example of indexical data could be a randomly assigned number from which nothing can be deduced. <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>For several reasons, many identification numbers are not just random strings. The American SSN originally contained information about the person’s birth year and where the number was first registered <span class="citation" data-cites="brensinger2021">(<a href="#ref-brensinger2021" role="doc-biblioref">Brensinger and Eyal 2021 32</a>)</span> whereas Nordic countries’ NINs often contain (or used to contain) information about the individual, usually birth date and sex <span class="citation" data-cites="watson2010 salste2021">(<a href="#ref-watson2010" role="doc-biblioref">Watson 2010</a>; <a href="#ref-salste2021" role="doc-biblioref">Salste 2021</a>)</span>. One reason for this was to make the code easier to remember <span class="citation" data-cites="alastalo2022">(<a href="#ref-alastalo2022" role="doc-biblioref">Alastalo and Helén 2022</a>)</span>. Even when sex and birth date are not biocentric data in the sense as <span class="citation" data-cites="Alterman2003">Alterman (<a href="#ref-Alterman2003" role="doc-biblioref">2003</a>)</span> defined it, including them takes Nordic NINs further away from being pure indexical data, thus making them arguably more sensitive to handle. Table <a href="#tab:nin-table">1</a> provides a summary of the introduction of NINs in the Nordic countries as well as information which they contain.</p>
<div class="layout-chunk" data-layout="l-body">
<table>
<caption><span id="tab:nin-table">Table 1: </span>Nordic NINs: year introduced and embedded information.</caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 18%" />
<col style="width: 14%" />
<col style="width: 20%" />
<col style="width: 14%" />
<col style="width: 5%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: left;">NIN name</th>
<th style="text-align: right;">introduced</th>
<th style="text-align: right;">characters (n)</th>
<th style="text-align: left;">birth date</th>
<th style="text-align: left;">sex</th>
<th style="text-align: left;">birth place</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Sweden</td>
<td style="text-align: left;">personnummer</td>
<td style="text-align: right;">1947</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">yes</td>
</tr>
<tr class="even">
<td style="text-align: left;">Iceland</td>
<td style="text-align: left;">kennitala</td>
<td style="text-align: right;">1950</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">no</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Norway</td>
<td style="text-align: left;">fødselsnummer</td>
<td style="text-align: right;">1964</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">no</td>
</tr>
<tr class="even">
<td style="text-align: left;">Denmark</td>
<td style="text-align: left;">CPR-nummer</td>
<td style="text-align: right;">1968</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">no</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Finland</td>
<td style="text-align: left;">henkilötunnus</td>
<td style="text-align: right;">1968</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">no</td>
</tr>
</tbody>
</table>
</div>
<p>In the Nordic countries, comprehensive national identification number systems were developed and implemented from the 1940s to the 1960s <span class="citation" data-cites="watson2010">(<a href="#ref-watson2010" role="doc-biblioref">Watson 2010</a>)</span>. In Sweden, the personal identity number (PIN) was introduced in 1947 and it consisted of both date of birth and an additional three-digit birth number. In 1967 a check digit was added finalizing the design of Swedish PIN <span class="citation" data-cites="johansson2003 scb2016">(<a href="#ref-johansson2003" role="doc-biblioref">Johansson 2003</a>; <a href="#ref-scb2016" role="doc-biblioref">Statistics Sweden 2016</a>)</span>. The Finnish personal identity code has its roots in specialized employment pension number introduced in 1962, which was then gradually expanded to cover the whole population in the form of social security number. In Finland personal identity code was introduced as specialized employment pension number in 1962, which was gradually expanded to cover the whole population in the form of social security number. The Finnish PIN was most likely inspired by early iteration of the Swedish NIN <span class="citation" data-cites="alastalo2022">(<a href="#ref-alastalo2022" role="doc-biblioref">Alastalo and Helén 2022</a>)</span>. The design has proven to be resilient and with some minor tweaks, it continues to be used, with the modern iteration being called a <em>personal identity code</em> <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> <span class="citation" data-cites="salste2021">(<a href="#ref-salste2021" role="doc-biblioref">Salste 2021</a>)</span>.</p>
<p>Like Finland, other Nordic countries took inspiration from Sweden as well <span class="citation" data-cites="Krogness2011">(<a href="#ref-Krogness2011" role="doc-biblioref">Krogness 2011</a>)</span>. Table <a href="#tab:nin-table2">2</a> illustrates the structural similarity of NINs in different Nordic countries. Some national variation does exist. In Norway and Denmark, individual numbers are used to denote the century in the birth date in addition to differentiating individuals from one another <span class="citation" data-cites="furseth2015 cpr2008">(<a href="#ref-cpr2008" role="doc-biblioref">CPR-kontoret 2008</a>; <a href="#ref-furseth2015" role="doc-biblioref">Furseth and Ljones 2015</a>)</span>. Since 2007 the Danish CPR numbers have dropped the check digit in favour of having an extra individual number to expand the pool of available unique numbers from roughly 500 per day to 4000-6000 per day <span class="citation" data-cites="cpr2008 jerlach2009">(<a href="#ref-cpr2008" role="doc-biblioref">CPR-kontoret 2008</a>; <a href="#ref-jerlach2009" role="doc-biblioref">Jerlach 2009</a>)</span>. All Nordic NIN designs prioritize a shorter length of 10-11 characters and use a combination of 2-digit years and a century marker or certain individual number ranges to denote the full year. For example, “52-” from the Finnish number and “99551” from the Norwegian number translate to 1952 and 1899, respectively. The more unambiguous Swedish 12-digit variant is used exclusively in automatic data processing systems (ADB, from Swedish <em>automatisk databehandling</em>) and not in day-to-day interactions.</p>
<div class="layout-chunk" data-layout="l-body">
<table>
<caption><span id="tab:nin-table2">Table 2: </span>Examples of national identification numbers and their composition in five Nordic countries. DD: day, MM: month, YY: year, C: century marker, N: individual number / serial number, Q: check digit or a control character.</caption>
<thead>
<tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: left;">NIN name</th>
<th style="text-align: left;">NIN example</th>
<th style="text-align: left;">NIN structure</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Sweden</td>
<td style="text-align: left;">personnummer</td>
<td style="text-align: left;">610321-3499</td>
<td style="text-align: left;">YYMMDDCNNNQ</td>
</tr>
<tr class="even">
<td style="text-align: left;">Iceland</td>
<td style="text-align: left;">kennitala</td>
<td style="text-align: left;">121212-1239</td>
<td style="text-align: left;">DDMMYYNNQC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Norway</td>
<td style="text-align: left;">fødselsnummer</td>
<td style="text-align: left;">01129955131</td>
<td style="text-align: left;">DDMMYYNNNQQ</td>
</tr>
<tr class="even">
<td style="text-align: left;">Denmark</td>
<td style="text-align: left;">CPR-nummer</td>
<td style="text-align: left;">300280-1178</td>
<td style="text-align: left;">DDMMYY-NNNN</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Finland</td>
<td style="text-align: left;">henkilötunnus</td>
<td style="text-align: left;">131052-308T</td>
<td style="text-align: left;">DDMMYYCNNNQ</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sweden</td>
<td style="text-align: left;">personnummer (ADB)</td>
<td style="text-align: left;">196103213499</td>
<td style="text-align: left;">YYYYMMDDNNNQ</td>
</tr>
</tbody>
</table>
</div>
<p>In Finland, the expansion of sector-specific social security numbers and employment pension numbers to universal NINs in 1969 has contributed to widespread secondary use of different data sources <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> in public administration, education, and research and development. In Sweden, the NIN is currently used extensively in all parts of society, not only for taxation. It is used in education, for military service, in health care and by financial institutions and insurance companies. The role of the Swedish NIN has also made it central to register-based research <span class="citation" data-cites="scb2016">(<a href="#ref-scb2016" role="doc-biblioref">Statistics Sweden 2016</a>)</span>. It could be argued that the most important feature of NIN systems is the interoperability it enables between different sectors of society <span class="citation" data-cites="alastalo2022">(<a href="#ref-alastalo2022" role="doc-biblioref">Alastalo and Helén 2022</a>)</span>.</p>
<h2 data-number="3" id="working-with-national-identification-numbers-in-r"><span class="header-section-number">3</span> Working with national identification numbers in R</h2>
<p>The method of validating and extracting information from identification numbers is manually doable and simple in principle but in practice becomes unfeasible with datasets larger than a few dozen observations. The <a href="https://cran.r-project.org/package=hetu">hetu</a> and <a href="https://cran.r-project.org/package=sweidnumbr">sweidnumbr</a> packages provide easy-to-use tools for programmatic handling of Finnish and Swedish personal identity codes and Business ID codes <a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. As shown in Table <a href="#tab:function-table">3</a>, both packages share several core functions and function names.</p>
<div class="layout-chunk" data-layout="l-body">
<table>
<caption><span id="tab:function-table">Table 3: </span>Exported functions that are shared between both <code>sweidnumbr</code> and <code>hetu</code>. Function alias in parentheses.</caption>
<colgroup>
<col style="width: 24%" />
<col style="width: 22%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">sweidnumbr</th>
<th style="text-align: left;">hetu</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">rpin</td>
<td style="text-align: left;">rpin (rhetu)</td>
<td style="text-align: left;">Generate a vector of random NINs</td>
</tr>
<tr class="even">
<td style="text-align: left;">pin_age</td>
<td style="text-align: left;">pin_age (hetu_age)</td>
<td style="text-align: left;">Calculate age from NIN</td>
</tr>
<tr class="odd">
<td style="text-align: left;">luhn_algo</td>
<td style="text-align: left;">hetu_control_char</td>
<td style="text-align: left;">Calculate check digit / control character from NIN</td>
</tr>
<tr class="even">
<td style="text-align: left;">pin_ctrl</td>
<td style="text-align: left;">pin_ctrl (hetu_ctrl)</td>
<td style="text-align: left;">Check NIN validity</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pin_date (pin_to_date)</td>
<td style="text-align: left;">pin_date (hetu_date)</td>
<td style="text-align: left;">Extract Birth date from NIN</td>
</tr>
<tr class="even">
<td style="text-align: left;">pin_sex</td>
<td style="text-align: left;">pin_sex (hetu_sex)</td>
<td style="text-align: left;">Extract Sex from NIN</td>
</tr>
<tr class="odd">
<td style="text-align: left;">oin_ctrl</td>
<td style="text-align: left;">bid_ctrl</td>
<td style="text-align: left;">Check OIN/BID validity</td>
</tr>
<tr class="even">
<td style="text-align: left;">roin</td>
<td style="text-align: left;">rbid</td>
<td style="text-align: left;">Generate a vector of random OINs/BIDs</td>
</tr>
</tbody>
</table>
</div>
<p>Both packages utilize R’s efficient vectorized operations, generating and validating over 5 million personal identity codes or Business Identity Codes in less than 10 minutes on a regular laptop <a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>. This can meet the practical upper limit set by the current population of Finland (5.5 million people) <span class="citation" data-cites="svt2022">(<a href="#ref-svt2022" role="doc-biblioref">Official Statistics of Finland (OSF) 2022</a>)</span> and Sweden (10.5 million people) <span class="citation" data-cites="scb2022">(<a href="#ref-scb2022" role="doc-biblioref">Statistiska centralbyrån 2022</a>)</span>, providing adequate headroom for the handling of relatively large registry datasets containing information on people currently alive and deceased.</p>
<h2 data-number="4" id="the-package"><span class="header-section-number">4</span> The <a href="https://cran.r-project.org/package=hetu">hetu</a> package</h2>
<p>Printing a data frame containing extracted information in a structured form can be done as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ropengov.github.io/hetu/'>hetu</a></span><span class='op'>)</span></span>
<span><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"010101A0101"</span>, <span class='st'>"111111-111C"</span>, <span class='st'>"290201A010M"</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://ropengov.github.io/hetu/reference/hetu.html'>hetu</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>The <code>hetu()</code> function is the workhorse of the <a href="https://cran.r-project.org/package=hetu">hetu</a> package. Without additional parameters, it prints out a data frame with all information that can be extracted from Finnish NINs as well as a single column that indicates if the NIN is valid as a whole or if it has any problems that make it invalid. For demonstration purposes the 3rd NIN listed below has an invalid date part; the 29th of February would only be a valid date if the year was a leap year, which we know that 2001 is not. The NIN would be correct if the year was changed from 2001 to 2000.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>         hetu    sex p.num ctrl.char       date day month year
1 010101A0101 Female   010         1 2001-01-01   1     1 2001
2 111111-111C   Male   111         C 1911-11-11  11    11 1911
3 290201A010M Female   010         M       &lt;NA&gt;  29     2 2001
  century valid.pin
1       A      TRUE
2       -      TRUE
3       A     FALSE</code></pre>
</div>
<p>The full birth year is constructed by reading the 2-digit year information and the century marker; in the case of the first-row example, “01” and “A”. “A” means that the person is born in the 2000s, “-” means the 1900s and “+” means the 1800s. A binary sex classification can be constructed simply by calculating if the personal number (<code>p.num</code> column) is an odd or an even number: Even numbers (for example “010”) denote a female and odd numbers (for example “111”) denote a male. The final character of the NIN is the control character, which is determined by dividing the concatenated integers (for example 290201010) by 31 and using the remainder as a key to retrieve a value from a list that includes numbers between 0 and 9 and English alphabets (without letters that might be mixed with numbers: I, G, O, Q and Z) <span class="citation" data-cites="hetudvv salste2021">(<a href="#ref-salste2021" role="doc-biblioref">Salste 2021</a>; <a href="#ref-hetudvv" role="doc-biblioref">Digital and Population Data Services Agency 2022b</a>)</span>.</p>
<p>In 2023 there was a reform of the personal identity code seperators. In addition to letter A, letters B, C, D, E and F also signify that the person was born in 2000s. For 1900s letters Y, X, W, V and U were added. These new seperators were added to ensure that there are enough personal identity codes. The change also made the seperator a distinguishing element of the NIN. <span class="citation" data-cites="hetureform">(<a href="#ref-hetureform" role="doc-biblioref">Digital and Population Data Services Agency 2022a</a>)</span></p>
<p>The generic way of outputting information found on individual columns is to use the standard <code>hetu()</code> function with extract-parameter.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/hetu/reference/hetu.html'>hetu</a></span><span class='op'>(</span><span class='st'>"010101A0101"</span>, extract <span class='op'>=</span> <span class='st'>"sex"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;Female&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/hetu/reference/hetu.html'>hetu</a></span><span class='op'>(</span><span class='st'>"010101A0101"</span>, extract <span class='op'>=</span> <span class='st'>"date"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;2001-01-01&quot;</code></pre>
</div>
<p>All column names printed out by the <code>hetu()</code> function are valid extract parameters. Most commonly used columns have wrapper functions that are identical in output:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/hetu/reference/pin_sex.html'>pin_sex</a></span><span class='op'>(</span><span class='st'>"010101A0101"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;Female&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/hetu/reference/pin_date.html'>pin_date</a></span><span class='op'>(</span><span class='st'>"010101A0101"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;2001-01-01&quot;</code></pre>
</div>
<p>With the help of imported functions from the <a href="https://cran.r-project.org/package=lubridate">lubridate</a> package <span class="citation" data-cites="lubridate">(<a href="#ref-lubridate" role="doc-biblioref">Grolemund and Wickham 2011</a>)</span>, we can calculate ages from NINs not only in years and days but also in months and weeks by using the <code>pin_age()</code> function. By default, the age is calculated in years at the current date and time but this end date can also be manually set by using the date parameter.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/hetu/reference/pin_age.html'>pin_age</a></span><span class='op'>(</span><span class='st'>"010101A0101"</span>, date <span class='op'>=</span> <span class='st'>"2004-02-01"</span>, timespan <span class='op'>=</span> <span class='st'>"months"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 37</code></pre>
</div>
<p>All NINs passed through the <code>hetu()</code> function are checked with 10 different tests to determine their validity. All tests need to be passed for a NIN to be valid. The results from different tests are summarized in the valid.pin column of the <code>hetu()</code> function output data frame. The user can print individual test results with the <code>hetu_diagnostic()</code> function for debugging purposes.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/hetu/reference/hetu_diagnostic.html'>hetu_diagnostic</a></span><span class='op'>(</span><span class='st'>"290201A010M"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>         hetu is.temp valid.p.num valid.ctrl.char correct.ctrl.char
1 290201A010M   FALSE        TRUE            TRUE             FALSE
  valid.date valid.day valid.month valid.year valid.length
1      FALSE      TRUE        TRUE       TRUE         TRUE
  valid.century
1          TRUE</code></pre>
</div>
<p>When data is inputted manually without validity checks, input errors can creep in. The control character in Finnish personal identity codes combined with validity checks in the <code>hetu()</code> function can help to catch the most obvious errors. In the example above we can see that the date is incorrect, but also the control character is incorrect <a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>. We can simply try three different dates to see if the input error is in the day, month or year part, assuming that the personal number and control character parts were inputted correctly. In this manufactured example the error was in the year part, resulting in the rare leap day date being the correct one.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>example_vector</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"290201A010M"</span>, <span class='st'>"280201A010M"</span>, <span class='st'>"290301A010M"</span>, <span class='st'>"290200A010M"</span><span class='op'>)</span></span>
<span><span class='va'>columns</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"valid.p.num"</span>, <span class='st'>"valid.ctrl.char"</span>, <span class='st'>"correct.ctrl.char"</span>, <span class='st'>"valid.date"</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://ropengov.github.io/hetu/reference/hetu_diagnostic.html'>hetu_diagnostic</a></span><span class='op'>(</span><span class='va'>example_vector</span>, extract <span class='op'>=</span> <span class='va'>columns</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>         hetu valid.p.num valid.ctrl.char correct.ctrl.char
1 290201A010M        TRUE            TRUE             FALSE
2 280201A010M        TRUE            TRUE             FALSE
3 290301A010M        TRUE            TRUE             FALSE
4 290200A010M        TRUE            TRUE              TRUE
  valid.date
1      FALSE
2       TRUE
3       TRUE
4       TRUE</code></pre>
</div>
<p>The <a href="https://cran.r-project.org/package=hetu">hetu</a> package can generate a large number of personal identity codes with the <code>rpin()</code> function. The date range of the generated identity codes can be changed with parameters, but it has a hardcoded lower limit at the year 1860 and an upper limit at the current date. It has been theorized that the oldest individuals that received a personal identity code in the 1960s were born the in 1850s or 1860s. Personal identity codes are never assigned beforehand and therefore it is impossible to have valid personal identity codes that have a future date. <span class="citation" data-cites="salste2021">(<a href="#ref-salste2021" role="doc-biblioref">Salste 2021</a>)</span></p>
<p>The function can also be used to generate so-called temporary personal identity codes. Temporary identity codes are never used as a persistent and unique identifier for a single individual but as a placeholder in institutions such as hospitals when a person does not have a Finnish NIN or the NIN is not known. They can be identified by having a personal number (p.num column in <code>hetu()</code> function output or NNN as in Table 2) in the range of 900-999.</p>
<p>Below is an example of generating 4 temporary Finnish NINs and checking their validity with the <code>pin_ctrl()</code> function. Since all NINs are temporary, they do not pass the check validity checks meant for normal pins if they are not explicitly allowed. A vector with no valid NINs returns a single NA.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>125</span><span class='op'>)</span></span>
<span><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ropengov.github.io/hetu/reference/rpin.html'>rpin</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>4</span>, p.male <span class='op'>=</span> <span class='fl'>0.25</span>, p.temp <span class='op'>=</span> <span class='fl'>1.0</span><span class='op'>)</span></span>
<span><span class='va'>x</span></span></code></pre>
</div>
<pre><code>[1] &quot;201215-940S&quot; &quot;080854-929H&quot; &quot;241258-9669&quot; &quot;090405A980X&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/hetu/reference/pin_ctrl.html'>pin_ctrl</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] NA</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/hetu/reference/pin_ctrl.html'>pin_ctrl</a></span><span class='op'>(</span><span class='va'>x</span>, allow.temp <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] TRUE TRUE TRUE TRUE</code></pre>
</div>
<p>As mentioned earlier, our package also supports similarly generating and checking the validity of Finnish organization identifiers, or Finnish Business ID (BID) numbers. Despite the name, BIDs are used not only for companies and businesses but also for other types of organizations and other juridical persons. Unlike personal identity codes, BIDs do not contain any information about the company. BIDs consist of a random string of 7 numbers followed by a dash and 1 check digit, a number between 0 and 9.</p>
<p>In addition, we have added support for the less known and less widely used numbering scheme for natural persons, Finnish Unique Identification (FINUID) numbers.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> FINUID numbers consist of 8 random numbers and 1 control character that is calculated in the same way as in Finnish NINs. FINUID numbers are similar to BID numbers in the sense that they do not contain any biocentric data on the individual or the corporation <a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>, but unlike BID numbers that are ubiquitous in corporate documents and public databases, FINUID numbers are mainly used by government authorities in internal IT systems.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/hetu/reference/bid_ctrl.html'>bid_ctrl</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"0000000-0"</span>, <span class='st'>"0000001-9"</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] TRUE TRUE</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/hetu/reference/satu_ctrl.html'>satu_ctrl</a></span><span class='op'>(</span><span class='st'>"10000001N"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] TRUE</code></pre>
</div>
<p>The <a href="https://cran.r-project.org/package=hetu">hetu</a> package contains some functions that are not shared with the <a href="https://cran.r-project.org/package=sweidnumbr">sweidnumbr</a> package, the most notable being the <code>hetu()</code> function. These functions are listed and described in Table <a href="#tab:hetu-function-table">4</a>.</p>
<div class="layout-chunk" data-layout="l-body">
<table>
<caption><span id="tab:hetu-function-table">Table 4: </span>Functions that are unique to the <code>hetu</code> package and have no equivalent in the <code>sweidnumbr</code> package. Function alias in parentheses.</caption>
<colgroup>
<col style="width: 39%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Function (alias)</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">hetu</td>
<td style="text-align: left;">Finnish personal identification number extraction</td>
</tr>
<tr class="even">
<td style="text-align: left;">pin_diagnostic (hetu_diagnostic)</td>
<td style="text-align: left;">Diagnostics Tool for HETU</td>
</tr>
<tr class="odd">
<td style="text-align: left;">satu_control_char</td>
<td style="text-align: left;">FINUID Number Control Character Calculator</td>
</tr>
<tr class="even">
<td style="text-align: left;">satu_ctrl</td>
<td style="text-align: left;">Check FINUID Number validity</td>
</tr>
</tbody>
</table>
</div>
<p>Version 1.1.0 of the <a href="https://cran.r-project.org/package=hetu">hetu</a> has been released, which addresses feedback on the earlier version. This new version implements summary and plot methods for the data frames produced by <code>hetu_diagnostic()</code>. Using the summary methods prints a neat diagnostic of the data frame.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>diagnostics</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ropengov.github.io/hetu/reference/hetu_diagnostic.html'>hetu_diagnostic</a></span><span class='op'>(</span><span class='va'>example_vector</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>diagnostics</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>Diagnostics for 4 hetu objects: 
Number of valid hetu objects: 1 
Number of valid and non-temporary* hetu objects: 1 
Number of invalid hetu objects: 3 
Number of invalid and non-temporary* hetu objects: 3 

 * non-temporary: p.num in range [002-899]</code></pre>
</div>
<p>The <a href="https://cran.r-project.org/package=sweidnumbr">sweidnumbr</a> R package has similar functionality as the <a href="https://cran.r-project.org/package=hetu">hetu</a> package, but for Swedish NINs and with a slightly different syntax. At the time of writing, the package has been downloaded roughly 30 000 times from CRAN <a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a>. The example NINs below are taken from the example published by the Swedish Tax Authority <span class="citation" data-cites="sv2007">(<a href="#ref-sv2007" role="doc-biblioref">The Swedish Tax Agency 2007</a>)</span>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/rOpenGov/sweidnumbr'>sweidnumbr</a></span><span class='op'>)</span></span>
<span><span class='va'>example_pin</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"640823-3234"</span>, <span class='st'>"6408233234"</span>, <span class='st'>"19640823-3230"</span><span class='op'>)</span></span>
<span><span class='va'>example_pin</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ropengov.github.io/sweidnumbr/reference/as.pin.html'>as.pin</a></span><span class='op'>(</span><span class='va'>example_pin</span><span class='op'>)</span></span>
<span><span class='va'>example_pin</span></span></code></pre>
</div>
<pre><code>[1] &quot;196408233234&quot; &quot;196408233234&quot; &quot;196408233230&quot;
Personal identity number(s)</code></pre>
</div>
<p>Unlike the <a href="https://cran.r-project.org/package=hetu">hetu</a> package, the <a href="https://cran.r-project.org/package=sweidnumbr">sweidnumbr</a> takes advantage of a custom S3 class structure. Therefore the first step is to convert strings with different Swedish NIN formats or numeric variables into a <code>pin</code> vector using the <code>as.pin()</code> function. The <code>as.pin()</code> function formats all inputted numbers to a so-called ADB-format <a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> with 12 digits and no century marker, which results in less ambiguity and no need to change the century marker from “-” to “+” when a person turns 100 years old. The <code>pin</code> vector is an S3 object and can be checked by using the <code>is.pin()</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/sweidnumbr/reference/as.pin.html'>is.pin</a></span><span class='op'>(</span><span class='va'>example_pin</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] TRUE</code></pre>
</div>
<p>This function only checks that the vector is a <code>pin</code> object, but not if the actual NINs are valid. To check the Swedish NIN using the control numbers, or check digits, we simply use the <code>pin_ctrl()</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/sweidnumbr/reference/pin_ctrl.html'>pin_ctrl</a></span><span class='op'>(</span><span class='va'>example_pin</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1]  TRUE  TRUE FALSE</code></pre>
</div>
<p>Just as in the <a href="https://cran.r-project.org/package=hetu">hetu</a> package we can extract information from the Swedish NIN with specialized functions. We can now use <code>pin_birthplace()</code>, <code>pin_sex()</code>, and <code>pin_age()</code> to extract information on county of birth (for NINs assigned before 1990), sex, and age.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/sweidnumbr/reference/pin_sex.html'>pin_sex</a></span><span class='op'>(</span><span class='va'>example_pin</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] Male Male Male
Levels: Male</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/sweidnumbr/reference/pin_birthplace.html'>pin_birthplace</a></span><span class='op'>(</span><span class='va'>example_pin</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] Gotlands län Gotlands län Gotlands län
28 Levels: Stockholm stad Stockholms län ... Born after 31 december 1989</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/sweidnumbr/reference/pin_age.html'>pin_age</a></span><span class='op'>(</span><span class='va'>example_pin</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 60 60 60</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ropengov.github.io/sweidnumbr/reference/pin_age.html'>pin_age</a></span><span class='op'>(</span><span class='va'>example_pin</span>, date <span class='op'>=</span> <span class='st'>"2000-01-01"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 35 35 35</code></pre>
</div>
<p>As with the <a href="https://cran.r-project.org/package=hetu">hetu</a> R package, we can also generate, or simulate, NINs with the <code>rpin()</code> function. Shared functions exist also for Swedish organization identifiers, or Swedish organizational numbers (SON), in the form of <code>as.oin()</code>, <code>is.oin()</code>, and <code>oin_ctrl()</code> functions. Unlike the Finnish BID, the <code>oin</code> number contains information on the type of organization of a given SON, which can be determined by using the <code>oin_group()</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>example_oin</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"556000-4615"</span>, <span class='st'>"232100-0156"</span>, <span class='st'>"802002-4280"</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://ropengov.github.io/sweidnumbr/reference/oin_group.html'>oin_group</a></span><span class='op'>(</span><span class='va'>example_oin</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] Aktiebolag                             
[2] Stat, landsting, kommuner, församlingar
[3] Ideella föreningar och stiftelser      
3 Levels: Aktiebolag ... Stat, landsting, kommuner, församlingar</code></pre>
</div>
<p>Similar to the <code>rbid()</code> function from the <a href="https://cran.r-project.org/package=hetu">hetu</a> package, we can generate new SONs using the <code>roin()</code> function from the <a href="https://cran.r-project.org/package=sweidnumbr">sweidnumbr</a> package.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>125</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://ropengov.github.io/sweidnumbr/reference/roin.html'>roin</a></span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;776264-6144&quot; &quot;274657-0148&quot; &quot;827230-7631&quot;
Organizational identity number(s)</code></pre>
</div>
<p>Due to the national characteristics of Swedish numbering schemes for natural and juridical persons some functions are unique to the <a href="https://cran.r-project.org/package=sweidnumbr">sweidnumbr</a> package. These functions are listed in Table <a href="#tab:swe-function-table">5</a>.</p>
<div class="layout-chunk" data-layout="l-body">
<table>
<caption><span id="tab:swe-function-table">Table 5: </span>Functions that are unique to the <code>sweidnumbr</code> package and have no equivalent in the <code>hetu</code> package.</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Function</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">as.oin</td>
<td style="text-align: left;">Parse organizational identity numbers</td>
</tr>
<tr class="even">
<td style="text-align: left;">as.pin</td>
<td style="text-align: left;">Parse personal identity numbers to ADP format</td>
</tr>
<tr class="odd">
<td style="text-align: left;">format_pin</td>
<td style="text-align: left;">Formatting pin</td>
</tr>
<tr class="even">
<td style="text-align: left;">is.oin</td>
<td style="text-align: left;">Test if a character vector contains correct ‘oin’</td>
</tr>
<tr class="odd">
<td style="text-align: left;">is.pin</td>
<td style="text-align: left;">Parse personal identity numbers to ADP format</td>
</tr>
<tr class="even">
<td style="text-align: left;">oin_group</td>
<td style="text-align: left;">Calculate organization group from ‘oin’</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pin_birthplace</td>
<td style="text-align: left;">Calculate the birthplace of ‘pin’</td>
</tr>
<tr class="even">
<td style="text-align: left;">pin_coordn</td>
<td style="text-align: left;">Check if ‘pin’ is a coordination number</td>
</tr>
</tbody>
</table>
</div>
<h2 data-number="5" id="discussion"><span class="header-section-number">5</span> Discussion</h2>
<p>The <a href="https://cran.r-project.org/package=hetu">hetu</a> and <a href="https://cran.r-project.org/package=sweidnumbr">sweidnumbr</a> R packages provide free and open-source methods for validating and extracting data from a large number of Finnish and Swedish national identity numbers (NIN). While the packages’ target audience most likely mainly consists of Finnish and Swedish users and people with a particular interest in NIN systems around the world, the packages make a generic contribution to developing methodologies related to NIN handling in R, and more generally for <em>structured data</em> in the field of computational humanities <span class="citation" data-cites="makela2020">(see <a href="#ref-makela2020" role="doc-biblioref">Mäkelä et al. 2020</a>)</span>, epidemiology and demographic studies <span class="citation" data-cites="gissler2004">(see <a href="#ref-gissler2004" role="doc-biblioref">Gissler and Haukka 2004</a>)</span>. A possible direction for future developments could be to create more generic class structures or even a completely new R package that could recognize and handle NIN systems from several different countries around the world.</p>
<p>The origins of the <a href="https://cran.r-project.org/package=hetu">hetu</a> package can be traced to the early 2010s when one curious individual wanted to analyze a large number of Finnish NINs that were leaked to the internet by an anonymous hacker, to identify the source of the leak. The legality and morality of handling such datasets containing personal information was and is in a grey area at best. As developers of these packages, we cannot condone such activities, even if they are conducted out of curiosity and not of ill intentions, but we acknowledge that we cannot prevent our users from doing that either. Both <a href="https://cran.r-project.org/package=hetu">hetu</a> and <a href="https://cran.r-project.org/package=sweidnumbr">sweidnumbr</a> packages are free software with permissive licenses and pre-emptively limiting their use to only “good, not evil” causes would be problematic as well. <a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a></p>
<p>We have acknowledged beforehand that random NINs generated with the <a href="https://cran.r-project.org/package=hetu">hetu</a> and <a href="https://cran.r-project.org/package=sweidnumbr">sweidnumbr</a> packages could, theoretically, be used for purposes such as synthetic identity fraud. ^[see <span class="citation" data-cites="brensinger2021">(<a href="#ref-brensinger2021" role="doc-biblioref">Brensinger and Eyal 2021 32</a>} for a short description of synthetic fraud related to American SSNs)</span> On the other hand it is important to note that such NINs could also be created by hand as information on valid NINs is readily available e.g. on the Finnish Digital and Population Data Services Agency and Swedish Tax Authority websites <span class="citation" data-cites="hetudvv sv2007">(<a href="#ref-sv2007" role="doc-biblioref">The Swedish Tax Agency 2007</a>; <a href="#ref-hetudvv" role="doc-biblioref">Digital and Population Data Services Agency 2022b</a>)</span>. Our package can be useful for many, and it does not make fraudulent activities significantly easier for malevolent individuals, which is essential in judging the pros and cons of releasing this software to the public.</p>
<p>Similar data breaches have made people warier about digital services. Privacy concerns can push Finland, Sweden and other Nordic countries towards redesigning their national identification numbers to omit some or all of the embedded personal information sometime in the future. For example, in Finland there has been a project run by the Finnish Ministry of Finance to redesign the Finnish NIN structure <span class="citation" data-cites="valtiovarainministerio2022">(<a href="#ref-valtiovarainministerio2022" role="doc-biblioref">Valtiovarainministeriö 2022</a>)</span>. However the project was pushed back in 2023 due to parliamentary term coming to end <span class="citation" data-cites="hetupostponed">(<a href="#ref-hetupostponed" role="doc-biblioref">Valtiovarainministeriö 2023</a>)</span>. At the moment there is no new information on the state of the project. We will continue to monitor for such policy changes and make changes to the packages if necessary.</p>
<p>As mentioned earlier, both packages are published under a permissive BSD 2-clause license. We encourage our users to give feedback on the packages and their materials, report bugs or any legislative or policy changes related to NIN system implementations, study the source code and submit improvements to our public code repositories <a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a> or fork the code to better suit their needs.</p>
<h2 data-number="6" id="acknowledgements"><span class="header-section-number">6</span> Acknowledgements</h2>
<p>We are grateful to all contributors, in particular Juuso Parkkinen and Joona Lehtomäki for their support in the initial package development. This work is part of rOpenGov <a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a> and contributes to the FIN-CLARIAH research infrastructure for computational humanities. LL, PK and AL were supported by the Research Council of Finland: decision 358720 (FIN-CLARIAH research infrastructure) and decision 352604 (Strategic Research Council, YOUNG Despair Research Consortium).</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<h3 class="appendix" data-number="6.1" id="supplementary-materials"><span class="header-section-number">6.1</span> Supplementary materials</h3>
<p>Supplementary materials are available in addition to this article. It can be downloaded at
<a href="RJ-2024-036.zip">RJ-2024-036.zip</a></p>
<h3 class="appendix" data-number="6.2" id="cran-packages-used"><span class="header-section-number">6.2</span> CRAN packages used</h3>
<p><a href="https://cran.r-project.org/package=hetu">hetu</a>, <a href="https://cran.r-project.org/package=sweidnumbr">sweidnumbr</a>, <a href="https://cran.r-project.org/package=numbersBR">numbersBR</a>, <a href="https://cran.r-project.org/package=cprr">cprr</a>, <a href="https://cran.r-project.org/package=generator">generator</a>, <a href="https://cran.r-project.org/package=lubridate">lubridate</a></p>
<h3 class="appendix" data-number="6.3" id="cran-task-views-implied-by-cited-packages"><span class="header-section-number">6.3</span> CRAN Task Views implied by cited packages</h3>
<p><a href="https://cran.r-project.org/view=ReproducibleResearch">ReproducibleResearch</a>, <a href="https://cran.r-project.org/view=TimeSeries">TimeSeries</a></p>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-alastalo2022" class="csl-entry" role="listitem">
M. Alastalo and I. Helén. A code for care and control: The PIN as an operator of interoperability in the nordic welfare state. <em>History of the Human Sciences</em>, 35(1): 242–265, 2022. URL <a href="https://doi.org/10.1177/09526951211017731">https://doi.org/10.1177/09526951211017731</a>.
</div>
<div id="ref-Alterman2003" class="csl-entry" role="listitem">
A. Alterman. <span class="nocase">”A piece of yourself”: Ethical issues in biometric identification</span>. <em>Ethics and information technology</em>, 5(3): 139–150, 2003.
</div>
<div id="ref-cprr" class="csl-entry" role="listitem">
J. Anhøj. <span class="nocase">cprr: Functions for Working with Danish CPR Numbers</span>. 2019. URL <a href="https://CRAN.R-project.org/package=cprr">https://CRAN.R-project.org/package=cprr</a>. R package version 0.2.0.
</div>
<div id="ref-brensinger2021" class="csl-entry" role="listitem">
J. Brensinger and G. Eyal. <span class="nocase">The Sociology of Personal Identification</span>. <em>Sociological Theory</em>, 2021. URL <a href="https://doi.org/10.1177/07352751211055771">https://doi.org/10.1177/07352751211055771</a>. OnlineFirst.
</div>
<div id="ref-cpr2008" class="csl-entry" role="listitem">
CPR-kontoret. <span class="nocase">Personnummeret i CPR-systemet</span>. 2008. URL <a href="https://cpr.dk/media/12066/personnummeret-i-cpr.pdf">https://cpr.dk/media/12066/personnummeret-i-cpr.pdf</a>. Accessed: 22.4.2022.
</div>
<div id="ref-hetureform" class="csl-entry" role="listitem">
Digital and Population Data Services Agency. Reform of the separators in the personal identity code. 2022a. URL <a href="https://dvv.fi/en/reform-of-personal-identity-code">https://dvv.fi/en/reform-of-personal-identity-code</a>. Accessed: 2025-01-08.
</div>
<div id="ref-hetudvv" class="csl-entry" role="listitem">
Digital and Population Data Services Agency. The personal identity code. 2022b. URL <a href="https://dvv.fi/en/personal-identity-code">https://dvv.fi/en/personal-identity-code</a>. Accessed: 2022-01-17.
</div>
<div id="ref-dodge2005" class="csl-entry" role="listitem">
M. Dodge and R. Kitchin. Codes of life: Identification codes and the machine-readable world. <em>Environment and Planning D: Society and Space</em>, 23: 851–881, 2005.
</div>
<div id="ref-foucault7778" class="csl-entry" role="listitem">
M. Foucault. <em>Security, territory, population: Lectures at the collège de france, 1977-1978.</em> New York: Palgrave Macmillan, 2009. Editors: Michel Senellart, François Ewald, Alessandro Fontana, Arnold I. Davidson.
</div>
<div id="ref-numbersbr" class="csl-entry" role="listitem">
W. Freitas. <span class="nocase">numbersBR: Validate, Compare and Format Identification Numbers from Brazil</span>. 2018. URL <a href="https://CRAN.R-project.org/package=numbersBR">https://CRAN.R-project.org/package=numbersBR</a>. R package version 0.0.2.
</div>
<div id="ref-furseth2015" class="csl-entry" role="listitem">
J. Furseth and O. Ljones. 50-årsjubilant med behov for oppgradering. <em>Samfunnsspeilet</em>, 2015(1): 2015. URL <a href="https://www.ssb.no/befolkning/artikler-og-publikasjoner/50-arsjubilant-med-behov-for-oppgradering">https://www.ssb.no/befolkning/artikler-og-publikasjoner/50-arsjubilant-med-behov-for-oppgradering</a>.
</div>
<div id="ref-gissler2004" class="csl-entry" role="listitem">
M. Gissler and J. Haukka. Finnish health and social welfare registers in epidemiological research. <em><span>Norsk Epidemiologi</span></em>, 14(1): 113–120, 2004.
</div>
<div id="ref-lubridate" class="csl-entry" role="listitem">
G. Grolemund and H. Wickham. Dates and times made easy with <span class="nocase">lubridate</span>. <em>Journal of Statistical Software</em>, 40(3): 1–25, 2011. URL <a href="https://www.jstatsoft.org/v40/i03/">https://www.jstatsoft.org/v40/i03/</a>.
</div>
<div id="ref-generator" class="csl-entry" role="listitem">
P. Hendricks. Generator: Generate data containing fake personally identifiable information. 2015. URL <a href="https://CRAN.R-project.org/package=generator">https://CRAN.R-project.org/package=generator</a>. R package version 0.1.0.
</div>
<div id="ref-jerlach2009" class="csl-entry" role="listitem">
T. Jerlach. <span class="nocase">Udviklingen på CPR-området i de seneste 20-25 år frem til 2009</span>. 2009. URL <a href="https://cpr.dk/media/12060/udviklingen-paa-cpr-omraadet-frem-til-2009.pdf">https://cpr.dk/media/12060/udviklingen-paa-cpr-omraadet-frem-til-2009.pdf</a>.
</div>
<div id="ref-johansson2003" class="csl-entry" role="listitem">
Å. Johansson. <span class="nocase">Från bläckpenna till datorhjärna</span>. <em>Deklarationen 100 år och andra tillbakablickar</em>, 2003.
</div>
<div id="ref-Krogness2011" class="csl-entry" role="listitem">
K. J. Krogness. <span class="nocase">Numbered individuals, digital traditions, and individual rights: civil status registration in Denmark 1645 to 2010</span>. <em>Ritsumeikan Law Review</em>, 28: 87–126, 2011.
</div>
<div id="ref-makela2020" class="csl-entry" role="listitem">
E. Mäkelä, K. Lagus, L. Lahti, T. Säily, M. Tolonen, M. Hämäläinen, S. Kaislaniemi and T. Nevalainen. Wrangling with non-standard data. 2612: 81–96, 2020.
</div>
<div id="ref-svt2022" class="csl-entry" role="listitem">
Official Statistics of Finland (OSF). Preliminary population statistics [online publication]. 2022. URL <a href="https://www.stat.fi/en/publication/cktih2lwgb3db0b531gwi04h8">https://www.stat.fi/en/publication/cktih2lwgb3db0b531gwi04h8</a>. Accessed: 22.4.2022.
</div>
<div id="ref-otjacques2007" class="csl-entry" role="listitem">
B. Otjacques, P. Hitzelberger and F. Feltz. <span class="nocase">Interoperability of E-Government Information Systems: Issues of Identification and Data Sharing</span>. <em><span>Journal of Management Information Systems</span></em>, 23(4): 29–51, 2007. URL <a href="https://doi.org/10.2753/MIS0742-1222230403">https://doi.org/10.2753/MIS0742-1222230403</a>.
</div>
<div id="ref-salste2021" class="csl-entry" role="listitem">
T. Salste. Henkilötunnus – ihmisten koodaaja. 2021. URL <a href="https://www.tuomas.salste.net/doc/tunnus/henkilotunnus.html">https://www.tuomas.salste.net/doc/tunnus/henkilotunnus.html</a>. Accessed: 2021-12-13.
</div>
<div id="ref-scb2016" class="csl-entry" role="listitem">
Statistics Sweden. Personal identity number. 2016.
</div>
<div id="ref-scb2022" class="csl-entry" role="listitem">
Statistiska centralbyrån. <span class="nocase">SCB statistikdatabasen. [Elektronisk resurs] : Statistical database</span>. 2022. URL <a href="https://www.scb.se/hitta-statistik/statistik-efter-amne/befolkning/befolkningens-sammansattning/befolkningsstatistik/pong/tabell-och-diagram/manadsstatistik--riket/befolkningsstatistik-2022/">https://www.scb.se/hitta-statistik/statistik-efter-amne/befolkning/befolkningens-sammansattning/befolkningsstatistik/pong/tabell-och-diagram/manadsstatistik--riket/befolkningsstatistik-2022/</a>. Accessed: 22.4.2022.
</div>
<div id="ref-sund2012" class="csl-entry" role="listitem">
R. Sund. <span class="nocase">Quality of the Finnish Hospital Discharge Register: A systematic review</span>. <em>Scandinavian journal of Public Health</em>, 40: 505–15, 2012. DOI <a href="https://doi.org/10.1177/1403494812456637">10.1177/1403494812456637</a>.
</div>
<div id="ref-sv2007" class="csl-entry" role="listitem">
The Swedish Tax Agency. Personnummer: SKV 704 ed. 8. 2007.
</div>
<div id="ref-hetupostponed" class="csl-entry" role="listitem">
Valtiovarainministeriö. Legislative proposals on digital identity and redesigning the system of personal identity codes will not be considered during this parliamentary session. 2023. URL <a href="https://valtioneuvosto.fi/-/10623/lakiesityksia-digitaalisesta-henkilollisyydesta-ja-henkilotunnuksen-uudistamisesta-ei-ehdita-kasitella-talla-istuntokaudella?languageId=en_US">https://valtioneuvosto.fi/-/10623/lakiesityksia-digitaalisesta-henkilollisyydesta-ja-henkilotunnuksen-uudistamisesta-ei-ehdita-kasitella-talla-istuntokaudella?languageId=en_US</a>. Acessed: 2025-01-08.
</div>
<div id="ref-valtiovarainministerio2022" class="csl-entry" role="listitem">
Valtiovarainministeriö. Redesign of the personal identity code system lays the foundation for development of digital services. 2022. URL <a href="https://vm.fi/en/-/redesign-of-the-personal-identity-code-system-lays-the-foundation-for-development-of-digital-services">https://vm.fi/en/-/redesign-of-the-personal-identity-code-system-lays-the-foundation-for-development-of-digital-services</a>. Accessed: 2025-01-08.
</div>
<div id="ref-watson2010" class="csl-entry" role="listitem">
I. Watson. <span class="nocase">A short history of national identification numbering in Iceland</span>. <em>Bifröst Journal of Social Science / Tímarit um félagsvísindi</em>, 1: 51–89, 2010.
</div>
<div id="ref-wickham2024" class="csl-entry" role="listitem">
H. Wickham and J. Bryan. R packages (2e). 2024. URL <a href="https://r-pkgs.org/introduction.html">https://r-pkgs.org/introduction.html</a>. Accessed: 202X-DD-MM.
</div>
</div>
<aside id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p><span class="citation" data-cites="brensinger2021">Brensinger and Eyal (<a href="#ref-brensinger2021" role="doc-biblioref">2021</a>)</span> discuss the concept of <em>dividuals</em>, manufactured objects that represent the living individual: address, fingerprints, name and so on. These dividuals need to go through the process of disembedding, standardization and re-embedding to be useful. Disembedding means data gathering (e.g. taking a fingerprint sample), standardization means making the disembedded transcription into a standardized digital sample that can be easily compared with other similar samples and re-embedding means linking these standardized records back to their actual flesh-and-blood counterparts. Without a way to re-embed a huge and well-standardized archive of fingerprints back to the population, it is essentially useless. This is also a reason why biometric samples such as iris scans or fingerprints can never replace primary keys in databases.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>In Finnish: henkilötunnus, or <em>hetu</em> for short, hence the name of the package<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Secondary data: Data that has not been collected primarily for a specific research question<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>In Finnish: Yritys- ja Yhteisötunnus, or Y-tunnus for short, In Swedish: Organisationsnummer<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Tested on a 2015 Macbook Pro with Intel i5-5257U @ 2.70GHz<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>By validity we mean that the control character itself is an allowed character. By correctness, we mean that the inputted control character matches the calculated control character<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>FINUID in Finnish: <em>sähköinen asiointitunniste</em> (SATU)<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Aside from sole trader/business name companies that are closely related to the individual entrepreneur, the term “biocentric” is badly suited when talking about corporations and other juridical persons. However, it could be argued that if the BID number contained information such as the company form, the place of registration or the date of registration it could be seen as analogous to biocentric information contained in NINs.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>Source: CRANlogs API, data retrieved at 2022-03-22.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>ADB: Short from the Swedish term <em>automatisk databehandling</em>, meaning <em>automatic data processing</em> (ADP) in English<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>For example, JSON has a license that states that “The Software shall be used for Good, not Evil”. Defining what is good and evil is at least in part up to everyone’s personal judgment, making the license clause ambiguous.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p><a href="https://github.com/rOpenGov/hetu">https://github.com/rOpenGov/hetu</a>, <a href="https://github.com/rOpenGov/sweidnumbr">https://github.com/rOpenGov/sweidnumbr</a><a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p><a href="https://ropengov.org">https://ropengov.org</a><a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</aside>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
<h3 id="references">References</h3>
<div id="references-listing"></div>
<h3 id="reuse">Reuse</h3>
<p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
<h3 id="citation">Citation</h3>
<p>For attribution, please cite this work as</p>
<pre class="citation-appendix short">Kantanen, et al., "Validating and Extracting Information from National Identification Numbers in R: The Case of Finland and Sweden", The R Journal, 2025</pre>
<p>BibTeX citation</p>
<pre class="citation-appendix long">@article{RJ-2024-036,
  author = {Kantanen, Pyry and Bülow, Erik and Lahtinen, Aleksi and Magnusson, Måns and Paananen, Jussi and Lahti, Leo},
  title = {Validating and Extracting Information from National Identification Numbers in R: The Case of Finland and Sweden},
  journal = {The R Journal},
  year = {2025},
  note = {https://doi.org/10.32614/RJ-2024-036},
  doi = {10.32614/RJ-2024-036},
  volume = {16},
  issue = {3},
  issn = {2073-4859},
  pages = {1}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
