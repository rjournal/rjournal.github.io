# Generated by `rjournal_pdf_article()` using `knitr::purl()`: do not edit by hand
# Please edit RJ-2024-020.Rmd to modify this file

## ----setup, include=FALSE-----------------------------------------------------
#knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, fig.pos = "H")
knitr::opts_chunk$set(fig.pos = "H")
library(plotly)
library(ggplot2)
library(mcmsupply)
library(knitr)
set.seed(1209)
#library(kableExtra)


## ----fig-1, echo=FALSE, out.width = "100%", out.height = "35%", fig.cap = "A flow chart to illustrate the relationship between the multi-country and single-country national estimation approaches. The median estimates of the multi-country national model parameters are used as informative priors in the single-country national model. A legend describing each element of the schematic is located in the blue box."----
if(knitr::is_latex_output()) knitr::include_graphics("figures/fig_1.pdf") else knitr::include_graphics("figures/fig_1.svg")


## ----tab-1, echo=FALSE--------------------------------------------------------
if(knitr::is_latex_output()) {
  knitr::kable(tail(mcmsupply::subnat_FPsource_data), format="latex", booktabs=TRUE,
      caption = '(ref:tab1Cap)' ) %>% 
  kableExtra::kable_styling(latex_options="scale_down") %>%
  kableExtra::kable_styling(latex_options = "HOLD_position")
} else{
  knitr::kable(tail(mcmsupply::subnat_FPsource_data), caption = '(ref:tab1Cap)' )
}


## ----tab-2, echo=FALSE--------------------------------------------------------
if(knitr::is_latex_output()) {
  knitr::kable(head(mcmsupply::Country_and_area_classification), format="latex",
      booktabs=TRUE, caption = '(ref:tab2Cap)' ) %>% 
  kableExtra::kable_styling(latex_options="scale_down") %>%
  kableExtra::kable_styling(latex_options = "HOLD_position")
} else{
  knitr::kable(tail(mcmsupply::Country_and_area_classification), caption = '(ref:tab2Cap)' )
}


## ----te-tab1, echo = FALSE, results = "asis"----------------------------------
latex_tab1 <- r"(
\begin{table}[h]
\resizebox{\textwidth}{!}{%
\begin{tabular}{|c|c|c|}
\hline
\textbf{Argument} &
  \textbf{Data type} &
  \textbf{Description} \\ \hline
national &
  Character &
  \begin{tabular}[c]{@{}c@{}}It indicates whether the user is interested in using data at the\\ national or subnational administration level. \\ This is a binary TRUE or FALSE argument. \\ Default is TRUE which retrieves national level data, while \\ FALSE retrieves subnational data.\end{tabular} \\ \hline
local &
  Character &
  \begin{tabular}[c]{@{}c@{}}It indicates whether the user is interested in using data for a\\ single population or not. \\ This is a binary TRUE or FALSE argument. \\ Default is FALSE.\end{tabular} \\ \hline
mycountry &
  Character &
  \begin{tabular}[c]{@{}c@{}}This is the name of the country you wish to do single-country \\ estimation for. The data will only be returned for this country. \\ Default is NULL.\end{tabular} \\ \hline
fp2030 &
  Character &
  \begin{tabular}[c]{@{}c@{}}It indicates whether the user is interested in using only \\ countries participating in FP2030. \\ This is a binary TRUE or FALSE argument. \\ Default is TRUE.\end{tabular} \\ \hline
surveydata\_filepath &
  Character string &
  \begin{tabular}[c]{@{}c@{}}Pathway to the location of the custom dataset. \\ When left as NULL, the function \\ automatically uses the stored datasets. \\ Default is NULL.\end{tabular} \\ \hline
\end{tabular}%
}
\caption{The arguments of the get\_data function. The purpose of this function is to retrieve and clean the Demographic and Health Survey (DHS) data or custom user supplied data for use in supply share estimation. The ‘Argument’ column names the function component. Data type describes the argument. Description explains the purpose of the argument and any default entries. }
\label{tab:tab1}
\end{table}
)"

md_tab1 <- r"(
| **Argument**          | **Data type**      | **Description**                                                                                                                                                                                                                                                             |
|-----------------------|--------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| national              | Character          | It indicates whether the user is interested in using data at the national or subnational administration level. This is a binary TRUE or FALSE argument. Default is TRUE which retrieves national level data, while FALSE retrieves subnational data.                            |
| local                 | Character          | It indicates whether the user is interested in using data for a single population or not. This is a binary TRUE or FALSE argument. Default is FALSE.                                                                                                                         |
| mycountry             | Character          | This is the name of the country you wish to do single-country estimation for. The data will only be returned for this country. Default is NULL.                                                                                                                              |
| fp2030                | Character          | It indicates whether the user is interested in using only countries participating in FP2030. This is a binary TRUE or FALSE argument. Default is TRUE.                                                                                                                      |
| surveydata_filepath   | Character string   | Pathway to the location of the custom dataset. When left as NULL, the function automatically uses the stored datasets. Default is NULL.                                                                                                                                     |

Table: (\#tab:tab1) The arguments of the `get_data` function. The purpose of this function is to retrieve and clean the Demographic and Health Survey (DHS) data or custom user supplied data for use in supply share estimation. The ‘Argument’ column names the function component. Data type describes the argument. Description explains the purpose of the argument and any default entries.
)"

if(knitr::is_latex_output()) cat(latex_tab1) else cat(md_tab1)


## ----te-tab2, echo = FALSE, results = "asis"----------------------------------
latex_tab2 <- r"(
\begin{table}[h]
\caption{The arguments of the get\_modelinputs function. The purpose of this function is to get the model inputs for the JAGS model used for supply share estimation. In the table, the argument name and data type of the argument is stated, a description of the argument and any default values is then provided.}
\resizebox{\textwidth}{!}{%
\begin{tabular}{|c|c|c|}
\hline
\textbf{Argument} & \textbf{Data type} & \textbf{Description}                            \\ \hline
startyear         & Numeric            & The year you wish to start your estimation at.  \\ \hline
endyear           & Numeric            & The year you wish to finish your estimation at. \\ \hline
nsegments &
  Numeric &
  \begin{tabular}[c]{@{}c@{}}The number of knots   you wish to include in your basis functions. \\ Default is 12.\end{tabular} \\ \hline
raw\_data &
  List &
  \begin{tabular}[c]{@{}c@{}}The output of the get\_data function, which includes a list \\ of the function arguments used and the \\ cleaned contraceptive supply source data.\end{tabular} \\ \hline
\end{tabular}%
}
\label{tab:tab2}
\end{table}
)"

md_tab2 <- r"(
| **Argument** | **Data type** | **Description**                                                                                                                                                                                          |
|--------------|---------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| startyear    | Numeric       | The year you wish to start your estimation at.                                                                                                                                                            |
| endyear      | Numeric       | The year you wish to finish your estimation at.                                                                                                                                                           |
| nsegments    | Numeric       | The number of knots you wish to include in your basis functions. Default is 12.                                                                                                                           |
| raw_data     | List          | The output of the get_data function, which includes a list of the function arguments used and the cleaned contraceptive supply source data.                                                                |

Table: (\#tab:tab2) The arguments of the `get_modelinputs` function. The purpose of this function is to get the model inputs for the JAGS model used for supply share estimation. In the table, the argument name and data type of the argument is stated, a description of the argument and any default values is then provided.
)"


if(knitr::is_latex_output()) cat(latex_tab2) else cat(md_tab2)


## ----te-tab4, echo = FALSE, results = "asis"----------------------------------
latex_tab4 <- r"(
\begin{table}[H]
\resizebox{\textwidth}{!}{%
\begin{tabular}{|c|c|c|}
\hline
\textbf{Model type} &
  \textbf{Parameter name} &
  \textbf{Parameter purpose} \\ \hline
\multirow{4}{*}{Multi-country national} &
  P &
  \begin{tabular}[c]{@{}c@{}} The method supply share proportions \\ across all countries, methods and sectors.\end{tabular} \\ \cline{2-3} 
 &
  beta.k &
  \begin{tabular}[c]{@{}c@{}}The set of spline coefficients for ($\beta_{c,m,s,k}$) \\ for all countries, methods and sectors at each knot.\end{tabular} \\ \cline{2-3} 
 &
  alpha\_cms &
  \begin{tabular}[c]{@{}c@{}}The intercept term ($\alpha_{c,m,s}$) \\ for all countries, methods and sectors.\end{tabular} \\ \cline{2-3} 
 &
  delta.k &
  \begin{tabular}[c]{@{}c@{}}The   first order differences between spline coefficients ($\delta_{c,m,s,k}$) \\ across all knots for all countries, methods and sectors\end{tabular} \\ \hline
\multirow{4}{*}{Single-country national} &
  P &
  \begin{tabular}[c]{@{}c@{}}The method supply share proportions \\ for a given country, across all methods and sectors.\end{tabular} \\ \cline{2-3} 
 &
  alpha\_cms &
  \begin{tabular}[c]{@{}c@{}}The intercept term ($\alpha_{c,m,s}$) for \\ the country of interest c, across all methods and sectors.\end{tabular} \\ \cline{2-3} 
 &
  inv.sigma\_delta &
  \begin{tabular}[c]{@{}c@{}}The precision matrix used in the \\ multivariate normal prior of $\delta_{c,1:M,s,k}$\end{tabular} \\ \cline{2-3} 
 &
  beta.k &
  \begin{tabular}[c]{@{}c@{}}The set of spline coefficients ($\beta_{c,m,s,k}$) for \\ the country of interest c, across all methods and sectors at each knot.\end{tabular} \\ \hline
\multirow{6}{*}{Multi-country subnational} &
  alpha\_pms &
  \begin{tabular}[c]{@{}c@{}}The intercept term ($\alpha_{p,m,s}$)  \\ for all subnational provinces, methods and sectors.\end{tabular} \\ \cline{2-3} 
 &
  alpha\_cms &
  \begin{tabular}[c]{@{}c@{}}The intercept term   ($\alpha_{c,m,s}$) \\ for all countries, methods and sectors.   \\ $\alpha_{c[p],m,s}$ is the expected value of $\alpha_{p,m,s}$.\end{tabular} \\ \cline{2-3} 
 &
  inv.sigma\_delta &
  \begin{tabular}[c]{@{}c@{}}The precision matrix used in the \\ multivariate normal prior of  $\delta_{p,1:M,s,k}$\end{tabular} \\ \cline{2-3} 
 &
  tau\_alpha\_pms &
  \begin{tabular}[c]{@{}c@{}}The sector-specific precision\\ associated with $\alpha_{p,m,s}$\end{tabular} \\ \cline{2-3} 
 &
  beta.k &
  \begin{tabular}[c]{@{}c@{}}The set of spline coefficients ($\beta_{p,m,s,k}$) \\ across all subnational provinces, methods and sectors at each knot.\end{tabular} \\ \cline{2-3} 
 &
  delta.k &
  \begin{tabular}[c]{@{}c@{}}The first order differences between spline coefficients \\ across all knots ($\delta_{p,m,s,k}$) for all provinces, methods and sectors.\end{tabular} \\ \hline
\multirow{3}{*}{Single-country subnational} &
  P &
  \begin{tabular}[c]{@{}c@{}}The method supply share proportions for the \\ subnational provinces in the country of interest, for all methods and sectors.\end{tabular} \\ \cline{2-3} 
 &
  alpha\_pms &
  \begin{tabular}[c]{@{}c@{}}The intercept term ($\alpha_{p,m,s}$) for the \\ subnational provinces in the country of interest, for all methods and sectors.\end{tabular} \\ \cline{2-3} 
 &
  beta.k &
  \begin{tabular}[c]{@{}c@{}}The set of spline coefficients ($\beta_{p,m,s,k}$) \\ for the subnational provinces in the country of interest, \\ across all methods and sectors at each knot\end{tabular} \\ \hline
\end{tabular}%
}
\caption{(ref:tab4)}
\label{tab:tab4}
\end{table}
)"

md_tab4 <- r"(
| **Model type**              | **Parameter name** | **Parameter purpose**                                                                                                                                                             |
|-----------------------------|--------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Multi-country national      | P                  | The method supply share proportions across all countries, methods and sectors.                                                                                                    |
|                             | beta.k             | The set of spline coefficients for ($\beta_{c,m,s,k}$) for all countries, methods and sectors at each knot.                                                                       |
|                             | alpha\_cms         | The intercept term ($\alpha_{c,m,s}$) for all countries, methods and sectors.                                                                                                     |
|                             | delta.k            | The first order differences between spline coefficients ($\delta_{c,m,s,k}$) across all knots for all countries, methods and sectors.                                             |
| Single-country national     | P                  | The method supply share proportions for a given country, across all methods and sectors.                                                                                          |
|                             | alpha\_cms         | The intercept term ($\alpha_{c,m,s}$) for the country of interest c, across all methods and sectors.                                                                              |
|                             | inv.sigma\_delta   | The precision matrix used in the multivariate normal prior of $\delta_{c,1:M,s,k}$.                                                                                               |
|                             | beta.k             | The set of spline coefficients ($\beta_{c,m,s,k}$) for the country of interest c, across all methods and sectors at each knot.                                                    |
| Multi-country subnational   | alpha\_pms         | The intercept term ($\alpha_{p,m,s}$) for all subnational provinces, methods and sectors.                                                                                         |
|                             | alpha\_cms         | The intercept term ($\alpha_{c,m,s}$) for all countries, methods and sectors. $\alpha_{c[p],m,s}$ is the expected value of $\alpha_{p,m,s}$.                                       |
|                             | inv.sigma\_delta   | The precision matrix used in the multivariate normal prior of $\delta_{p,1:M,s,k}$.                                                                                               |
|                             | tau\_alpha\_pms    | The sector-specific precision associated with $\alpha_{p,m,s}$.                                                                                                                   |
|                             | beta.k             | The set of spline coefficients ($\beta_{p,m,s,k}$) across all subnational provinces, methods and sectors at each knot.                                                            |
|                             | delta.k            | The first order differences between spline coefficients across all knots ($\delta_{p,m,s,k}$) for all provinces, methods and sectors.                                             |
| Single-country subnational  | P                  | The method supply share proportions for the subnational provinces in the country of interest, for all methods and sectors.                                                        |
|                             | alpha\_pms         | The intercept term ($\alpha_{p,m,s}$) for the subnational provinces in the country of interest, for all methods and sectors.                                                      |
|                             | beta.k             | The set of spline coefficients ($\beta_{p,m,s,k}$) for the subnational provinces in the country of interest, across all methods and sectors at each knot.                         |

Table: (\#tab:tab4) The parameters for different model types. Each parameter is described by its use in modeling supply share proportions, the intercept term, spline coefficients, and the precision matrix.
)"


if(knitr::is_latex_output()) cat(latex_tab4) else cat(md_tab4)


## ----te-tab3, echo = FALSE, results = "asis"----------------------------------
latex_tab3 <- r"(
\begin{table}[]
\resizebox{\textwidth}{!}{%
\begin{tabular}{|c|c|c|}
\hline
\textbf{Argument} & \textbf{Data type} & \textbf{Description} \\ \hline
jagsdata &
  List &
  \begin{tabular}[c]{@{}c@{}}The output of the get\_modelinputs function. \\ A list of the initial set-up arguments and the JAGS inputs \\ required using the data.\end{tabular} \\ \hline
jagsparams &
  Vector &
  \begin{tabular}[c]{@{}c@{}}A string vector of model parameters to be monitored. \\ NULL invokes a standard  vector to be used \\ Default is NULL.\end{tabular} \\ \hline
n\_iter           & Numeric            & \begin{tabular}[c]{@{}c@{}}Number of iterations you wish to run your JAGS model for. \\ Default is 80000.\end{tabular}       \\ \hline
n\_burnin         & Numeric            & \begin{tabular}[c]{@{}c@{}}Number of burn-in   samples you wish to run your JAGS model for. \\ Default is 10000\end{tabular} \\ \hline
n\_thin           & Numeric            & \begin{tabular}[c]{@{}c@{}}Number of samples you wish to thin your JAGS sample by. \\ Default is 35.\end{tabular}            \\ \hline
\end{tabular}%
}
\caption{The arguments of the run\_jags\_model function. The purpose of this function is to run the Bayesian hierarchical models stored within the \CRANpkg{mcmsupply}  package for either single- or multi-country datasets at the administration level of interest. The argument name and data type of the argument is stated, a description and any default values of the argument are then provided.}
\label{tab:tab3}
\end{table}
)"

md_tab3 <- r"(
| **Argument** | **Data type** | **Description** |
|--------------|---------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| jagsdata     | List          | The output of the `get_modelinputs` function. A list of the initial set-up arguments and the JAGS inputs required using the data.                                                     |
| jagsparams   | Vector        | A string vector of model parameters to be monitored. NULL invokes a standard vector to be used. Default is NULL.                                                                     |
| n_iter       | Numeric       | Number of iterations you wish to run your JAGS model for. Default is 80000.                                                                                                          |
| n_burnin     | Numeric       | Number of burn-in samples you wish to run your JAGS model for. Default is 10000.                                                                                                     |
| n_thin       | Numeric       | Number of samples you wish to thin your JAGS sample by. Default is 35.                                                                                                               |

Table: (\#tab:tab3) The arguments of the `run_jags_model` function. The purpose of this function is to run the Bayesian hierarchical models stored within the mcmsupply package for either single- or multi-country datasets at the administration level of interest. The argument name and data type of the argument is stated, a description and any default values of the argument are then provided.
)"


if(knitr::is_latex_output()) cat(latex_tab3) else cat(md_tab3)


## ----te-tab5, echo = FALSE, results = "asis"----------------------------------
latex_tab5 <- r"(
\begin{table}[]
\resizebox{\textwidth}{!}{%
\begin{tabular}{|c|c|c|}
\hline
\textbf{Argument} &
  \textbf{Data type} &
  \textbf{Description} \\ \hline
jagsdata &
  List &
  \begin{tabular}[c]{@{}c@{}}A list of the initial set-up arguments and the JAGS inputs required \\ using the data retrieved in the get\_modelinputs function.\end{tabular} \\ \hline
model\_output &
  List &
  \begin{tabular}[c]{@{}c@{}}The object assigned to store the list of  MCMC results and estimate \\ summary output from the run\_jags\_model function.\end{tabular} \\ \hline
\end{tabular}%
}
\caption{The arguments of the plot\_estimates function. The purpose of this function is to plot the data alongside the model estimates so that users can visualise their estimated method supply shares. The argument name and data type of the argument is stated, a description of the argument is then provided. }
\label{tab:tab5}
\end{table}
)"

md_tab5 <- r"(
| **Argument**   | **Data type** | **Description**                                                                                                                                                        |
|----------------|---------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| jagsdata       | List          | A list of the initial set-up arguments and the JAGS inputs required using the data retrieved in the get_modelinputs function.                                             |
| model_output   | List          | The object assigned to store the list of MCMC results and estimate summary output from the run_jags_model function.                                                      |

Table:  (\#tab:tab5) The arguments of the `plot_estimates` function. The purpose of this function is to plot the data alongside the model estimates so that users can visualize their estimated method supply shares. The argument name and data type are stated, followed by a description of the argument.
)"


if(knitr::is_latex_output()) cat(latex_tab5) else cat(md_tab5)


## ----fig-2, echo=FALSE, out.width = "100%", out.height = "35%", fig.cap = "A flow chart to illustrate the decision processes that lead to the different estimation types within the mcmsupply package. The first decision is with respect to the administrative level of the estimates you wish to create – they may be either national level or subnational level. An explanation of each division is found on the first row of the figure. The second decision is with respect to the number of countries you wish to estimate – the user may estimate the proportions for all the countries at once or only one country. An explanation of each in the context of the specific administrative division is found on the second row of the figure. A set of sample functions used to estimate and plot the estimates for each modelling option are located on the third row of the figure"----

if(knitr::is_latex_output()) knitr::include_graphics("figures/fig_2.pdf") else knitr::include_graphics("figures/fig_2.svg")


## ----eval=FALSE---------------------------------------------------------------
# cleaned_natdata <- get_data(national = TRUE)
# 
# dplyr::glimpse(cleaned_natdata$mydata)


## ----eval=FALSE---------------------------------------------------------------
# pkg_data <- get_modelinputs(startyear = 1990,
#                             endyear = 2025.5,
#                             nsegments = 12,
#                             raw_data = cleaned_natdata)
# 


## ----eval=FALSE---------------------------------------------------------------
# mod <- run_jags_model(jagsdata = pkg_data,
#                       jagsparams = NULL,
#                       n_iter = 80,
#                       n_burnin = 10,
#                       n_thin = 2)
# 


## ----include=TRUE, message=FALSE, eval=FALSE----------------------------------
# 
# plot(mod$JAGS)
# 
# sample_draws <- tidybayes::tidy_draws(mod$JAGS$BUGSoutput$sims.matrix)
# 
# var <- sample_draws %>% dplyr::select(.chain, .iteration, .draw,`P[1,2,1,1]`) %>%
#   dplyr::mutate(chain = rep(1:2, each=mod$JAGS$BUGSoutput$n.keep)) %>%
#   dplyr::mutate(iteration = rep(1:mod$JAGS$BUGSoutput$n.keep, 2))
# 
# ggplot2::ggplot(data=var) +
#   ggplot2::geom_line(ggplot2::aes(x=iteration, y=`P[1,2,1,1]`, color=as.factor(chain)))


## ----eval=FALSE, message=FALSE------------------------------------------------
# plots <- plot_estimates(jagsdata = pkg_data,
#                         model_output = mod)


## ----fig-3, echo=FALSE, out.width = "100%", out.height = "40%", fig.cap = '(ref:fig3Cap)'----
if(knitr::is_latex_output()) knitr::include_graphics("figures/fig_3.pdf") else knitr::include_graphics("figures/fig_3.svg")


## ----include=TRUE, message=FALSE, eval=FALSE----------------------------------
# estimates_2018 <- pull_estimates(model_output = mod, country = 'Nepal', year=2018)


## ----eval=FALSE---------------------------------------------------------------
# cleaned_natdata <- get_data(national = TRUE,
#                             local = TRUE,
#                             mycountry = "Nepal")


## ----fig-4, echo=FALSE, out.width = "100%", out.height = "40%", fig.cap = '(ref:fig4Cap)'----
if(knitr::is_latex_output()) knitr::include_graphics("figures/fig_4.pdf") else knitr::include_graphics("figures/fig_4.svg")


## -----------------------------------------------------------------------------
cleaned_subnatdata <- get_data(national = FALSE)


## ----eval=FALSE---------------------------------------------------------------
# cleaned_data <- get_data(national = FALSE,
#                          local = TRUE,
#                          mycountry = "Nepal")


## ----fig-5, echo=FALSE, out.width = "100%", out.height = "40%", fig.cap = '(ref:fig5Cap)'----
if(knitr::is_latex_output()) knitr::include_graphics("figures/fig_5.pdf") else knitr::include_graphics("figures/fig_5.svg")


## ----eval=FALSE---------------------------------------------------------------
# cleaned_data <- get_data(national = FALSE,
#                          local = TRUE,
#                          surveydata_filepath =
#                            "inst/data-raw/my_custom_data_good.xlsx",
#                          mycountry = "Ethiopia")


## ----te-tab6, echo = FALSE, results = "asis"----------------------------------
latex_tab6 <- r"(
\begin{table}[]
\resizebox{\textwidth}{!}{%
\begin{tabular}{|c|c|c|c|}
\hline
\textbf{Column name} &
  \textbf{Data type} &
  \textbf{Description} &
  \textbf{Required} \\ \hline
  Country &
  Character &
  \begin{tabular}[c]{@{}c@{}} The name of the country you have the custom data for.\end{tabular} &
  National and subnational \\ \hline
  Region &
  Character &
  \begin{tabular}[c]{@{}c@{}} The name of the subnational area you have the custom data for\end{tabular} &
  Subnational \\ \hline
  Method &
  Character &
  \begin{tabular}[c]{@{}c@{}} The name of the contraceptive method you have the custom data for\end{tabular} &
  National and subnational \\ \hline
  average\_year &
  Numeric &
  \begin{tabular}[c]{@{}c@{}} The year that the observation was collected in. \end{tabular} &
  National and subnational \\ \hline
  sector\_categories &
  Character &
  \begin{tabular}[c]{@{}c@{}} The supply sector of the contraceptive method you have the custom data for.\end{tabular} &
  Subnational \\ \hline
  sector\_category &
  Character &
  \begin{tabular}[c]{@{}c@{}} The supply sector of the contraceptive method you have the custom data for.\end{tabular} &
  National \\ \hline
  proportion &
  Numeric &
  \begin{tabular}[c]{@{}c@{}} The proportion of a given contraceptive method supplied by the observation. \end{tabular} &
  National and subnational \\ \hline
  SE.proportion &
  Numeric &
  \begin{tabular}[c]{@{}c@{}} The associated standard error of the proportion supplied by the observation. \end{tabular} &
  National and subnational \\ \hline
  n &
  Numeric &
  \begin{tabular}[c]{@{}c@{}} The sample size used to estimate the observation. \end{tabular} &
  National and subnational \\ \hline
\end{tabular}%
}
\caption{The required columns when supplying custom data to the get\_data . The column name is given, the type of data expected in each column along with a description of the column. The 'Required' column indicates whether the column belongs in national or subnational custom data files. The get\_data function will carry out a series of internal checks to ensure the custom data matches the stored data layout.}
\label{tab:tab6}
\end{table}
)"

md_tab6 <- r"(
| **Column name**     | **Data type** | **Description**                                                                                                                                             | **Required**          |
|---------------------|---------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| Country             | Character     | The name of the country you have the custom data for.                                                                                                                                              | National and subnational |
| Region              | Character     | The name of the subnational area you have the custom data for.                                                                                                                                     | Subnational           |
| Method              | Character     | The name of the contraceptive method you have the custom data for.                                                                                                                                 | National and subnational |
| average\_year       | Numeric       | The year that the observation was collected in.                                                                                                                                                    | National and subnational |
| sector\_categories  | Character     | The supply sector of the contraceptive method you have the custom data for.                                                                                                                       | Subnational           |
| sector\_category    | Character     | The supply sector of the contraceptive method you have the custom data for.                                                                                                                       | National              |
| proportion          | Numeric       | The proportion of a given contraceptive method supplied by the observation.                                                                                                                        | National and subnational |
| SE.proportion       | Numeric       | The associated standard error of the proportion supplied by the observation.                                                                                                                       | National and subnational |
| n                   | Numeric       | The sample size used to estimate the observation.                                                                                                                                                   | National and subnational |

Table: (\#tab:tab6) The required columns when supplying custom data to the `get_data`. The column name is given, the type of data expected in each column along with a description of the column. The 'Required' column indicates whether the column belongs in national or subnational custom data files. The `get_data` function will carry out a series of internal checks to ensure the custom data matches the stored data layout.
)"


if(knitr::is_latex_output()) cat(latex_tab6) else cat(md_tab6)

